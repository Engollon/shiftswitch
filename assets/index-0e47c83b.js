var an=Object.defineProperty;var cn=(s,e,t)=>e in s?an(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var lt=(s,e,t)=>(cn(s,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(i){if(i.ep)return;i.ep=!0;const l=t(i);fetch(i.href,l)}})();function F(){}function xt(s){return s()}function vt(){return Object.create(null)}function ue(s){s.forEach(xt)}function en(s){return typeof s=="function"}function ne(s,e){return s!=s?e==e:s!==e||s&&typeof s=="object"||typeof s=="function"}let Ye;function de(s,e){return s===e?!0:(Ye||(Ye=document.createElement("a")),Ye.href=e,s===Ye.href)}function un(s){return Object.keys(s).length===0}function dn(s,...e){if(s==null){for(const n of e)n(void 0);return F}const t=s.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function M(s,e,t){s.$$.on_destroy.push(dn(e,t))}function ye(s){return s??""}function ht(s,e,t){return s.set(t),e}function u(s,e){s.appendChild(e)}function O(s,e,t){s.insertBefore(e,t||null)}function C(s){s.parentNode&&s.parentNode.removeChild(s)}function ve(s,e){for(let t=0;t<s.length;t+=1)s[t]&&s[t].d(e)}function g(s){return document.createElement(s)}function P(s){return document.createTextNode(s)}function S(){return P(" ")}function fe(){return P("")}function L(s,e,t,n){return s.addEventListener(e,t,n),()=>s.removeEventListener(e,t,n)}function hn(s){return function(e){return e.preventDefault(),s.call(this,e)}}function m(s,e,t){t==null?s.removeAttribute(e):s.getAttribute(e)!==t&&s.setAttribute(e,t)}function fn(s){return Array.from(s.childNodes)}function q(s,e){e=""+e,s.data!==e&&(s.data=e)}function B(s,e){s.value=e??""}function rt(s,e,t,n){t==null?s.style.removeProperty(e):s.style.setProperty(e,t,n?"important":"")}function Le(s,e,t){for(let n=0;n<s.options.length;n+=1){const i=s.options[n];if(i.__value===e){i.selected=!0;return}}(!t||e!==void 0)&&(s.selectedIndex=-1)}function at(s){const e=s.querySelector(":checked");return e&&e.__value}let He;function Me(s){He=s}function pn(){if(!He)throw new Error("Function called outside component initialization");return He}function st(s){pn().$$.on_mount.push(s)}function mn(s,e){const t=s.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const qe=[],et=[];let Re=[];const ut=[],gn=Promise.resolve();let dt=!1;function vn(){dt||(dt=!0,gn.then(tn))}function $e(s){Re.push(s)}function bn(s){ut.push(s)}const ct=new Set;let Ae=0;function tn(){if(Ae!==0)return;const s=He;do{try{for(;Ae<qe.length;){const e=qe[Ae];Ae++,Me(e),_n(e.$$)}}catch(e){throw qe.length=0,Ae=0,e}for(Me(null),qe.length=0,Ae=0;et.length;)et.pop()();for(let e=0;e<Re.length;e+=1){const t=Re[e];ct.has(t)||(ct.add(t),t())}Re.length=0}while(qe.length);for(;ut.length;)ut.pop()();dt=!1,ct.clear(),Me(s)}function _n(s){if(s.fragment!==null){s.update(),ue(s.before_update);const e=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,e),s.after_update.forEach($e)}}function wn(s){const e=[],t=[];Re.forEach(n=>s.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),Re=e}const Xe=new Set;let Se;function Ke(){Se={r:0,c:[],p:Se}}function ze(){Se.r||ue(Se.c),Se=Se.p}function U(s,e){s&&s.i&&(Xe.delete(s),s.i(e))}function G(s,e,t,n){if(s&&s.o){if(Xe.has(s))return;Xe.add(s),Se.c.push(()=>{Xe.delete(s),n&&(t&&s.d(1),n())}),s.o(e)}else n&&n()}function W(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function yn(s,e){s.d(1),e.delete(s.key)}function kn(s,e,t,n,i,l,o,r,a,c,f,d){let h=s.length,p=l.length,w=h;const y={};for(;w--;)y[s[w].key]=w;const _=[],b=new Map,v=new Map,k=[];for(w=p;w--;){const I=d(i,l,w),N=t(I);let A=o.get(N);A?n&&k.push(()=>A.p(I,e)):(A=c(N,I),A.c()),b.set(N,_[w]=A),N in y&&v.set(N,Math.abs(w-y[N]))}const E=new Set,j=new Set;function $(I){U(I,1),I.m(r,f),o.set(I.key,I),f=I.first,p--}for(;h&&p;){const I=_[p-1],N=s[h-1],A=I.key,J=N.key;I===N?(f=I.first,h--,p--):b.has(J)?!o.has(A)||E.has(A)?$(I):j.has(J)?h--:v.get(A)>v.get(J)?(j.add(A),$(I)):(E.add(J),h--):(a(N,o),h--)}for(;h--;){const I=s[h];b.has(I.key)||a(I,o)}for(;p;)$(_[p-1]);return ue(k),_}function Sn(s,e,t){const n=s.$$.props[e];n!==void 0&&(s.$$.bound[n]=t,t(s.$$.ctx[n]))}function le(s){s&&s.c()}function ee(s,e,t){const{fragment:n,after_update:i}=s.$$;n&&n.m(e,t),$e(()=>{const l=s.$$.on_mount.map(xt).filter(en);s.$$.on_destroy?s.$$.on_destroy.push(...l):ue(l),s.$$.on_mount=[]}),i.forEach($e)}function te(s,e){const t=s.$$;t.fragment!==null&&(wn(t.after_update),ue(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Cn(s,e){s.$$.dirty[0]===-1&&(qe.push(s),vn(),s.$$.dirty.fill(0)),s.$$.dirty[e/31|0]|=1<<e%31}function re(s,e,t,n,i,l,o,r=[-1]){const a=He;Me(s);const c=s.$$={fragment:null,ctx:[],props:l,update:F,not_equal:i,bound:vt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:vt(),dirty:r,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let f=!1;if(c.ctx=t?t(s,e.props||{},(d,h,...p)=>{const w=p.length?p[0]:h;return c.ctx&&i(c.ctx[d],c.ctx[d]=w)&&(!c.skip_bound&&c.bound[d]&&c.bound[d](w),f&&Cn(s,d)),h}):[],c.update(),f=!0,ue(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const d=fn(e.target);c.fragment&&c.fragment.l(d),d.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&U(s.$$.fragment),ee(s,e.target,e.anchor),tn()}Me(a)}class ae{constructor(){lt(this,"$$");lt(this,"$$set")}$destroy(){te(this,1),this.$destroy=F}$on(e,t){if(!en(t))return F;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const i=n.indexOf(t);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!un(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const On="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(On);function Q(s,e,t,n){return new(t||(t=Promise))(function(i,l){function o(c){try{a(n.next(c))}catch(f){l(f)}}function r(c){try{a(n.throw(c))}catch(f){l(f)}}function a(c){c.done?i(c.value):function(d){return d instanceof t?d:new t(function(h){h(d)})}(c.value).then(o,r)}a((n=n.apply(s,e||[])).next())})}class he extends Error{constructor(e){var t,n,i,l;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,he.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof he||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((l=(i=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||i===void 0?void 0:i.message)===null||l===void 0)&&l.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const Qe=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Pn(s,e){const t={};if(typeof s!="string")return t;const n=Object.assign({},e||{}).decode||Dn;let i=0;for(;i<s.length;){const l=s.indexOf("=",i);if(l===-1)break;let o=s.indexOf(";",i);if(o===-1)o=s.length;else if(o<l){i=s.lastIndexOf(";",l-1)+1;continue}const r=s.slice(i,l).trim();if(t[r]===void 0){let a=s.slice(l+1,o).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[r]=n(a)}catch{t[r]=a}}i=o+1}return t}function bt(s,e,t){const n=Object.assign({},t||{}),i=n.encode||Tn;if(!Qe.test(s))throw new TypeError("argument name is invalid");const l=i(e);if(l&&!Qe.test(l))throw new TypeError("argument val is invalid");let o=s+"="+l;if(n.maxAge!=null){const r=n.maxAge-0;if(isNaN(r)||!isFinite(r))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(r)}if(n.domain){if(!Qe.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Qe.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function Dn(s){return s.indexOf("%")!==-1?decodeURIComponent(s):s}function Tn(s){return encodeURIComponent(s)}let nn;function Ze(s){if(s)try{const e=decodeURIComponent(nn(s.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function En(s,e=0){let t=Ze(s);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}nn=typeof atob=="function"?atob:s=>{let e=String(s).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,i=0,l=0,o="";n=e.charAt(l++);~n&&(t=i%4?64*t+n:n,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const _t="pb_auth";class In{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!En(this.token)}get isAdmin(){return Ze(this.token).type==="admin"}get isAuthRecord(){return Ze(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=_t){const n=Pn(e||"")[t]||"";let i={};try{i=JSON.parse(n),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.model||null)}exportToCookie(e,t=_t){var n,i;const l={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},o=Ze(this.token);o!=null&&o.exp?l.expires=new Date(1e3*o.exp):l.expires=new Date("1970-01-01"),e=Object.assign({},l,e);const r={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let a=bt(t,JSON.stringify(r),e);const c=typeof Blob<"u"?new Blob([a]).size:a.length;if(r.model&&c>4096){r.model={id:(n=r==null?void 0:r.model)===null||n===void 0?void 0:n.id,email:(i=r==null?void 0:r.model)===null||i===void 0?void 0:i.email};const f=["collectionId","username","verified"];for(const d in this.model)f.includes(d)&&(r.model[d]=this.model[d]);a=bt(t,JSON.stringify(r),e)}return a}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Ln extends In{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class Oe{constructor(e){this.client=e}}class An extends Oe{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,i,l,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:i,duration:l}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class ft extends Oe{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(i=>{var l;return i.items=((l=i.items)===null||l===void 0?void 0:l.map(o=>this.decode(o)))||[],i})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var i;if(!(!((i=n==null?void 0:n.items)===null||i===void 0)&&i.length))throw new he({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(i=>this.decode(i))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],i=l=>Q(this,void 0,void 0,function*(){return this.getList(l,e||500,t).then(o=>{const r=o.items;return n=n.concat(r),r.length==o.perPage?i(l+1):n})});return i(1)}}function ce(s,e,t,n){const i=n!==void 0;return i||t!==void 0?i?(console.warn(s),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):e=Object.assign(e,t):e}class jn extends ft{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(i=>{var l,o;return((l=this.client.authStore.model)===null||l===void 0?void 0:l.id)===i.id&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,l;return n&&((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)===e&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,i){let l={method:"POST",body:{identity:e,password:t}};return l=ce("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",l,n,i),this.client.send(this.baseCrudPath+"/auth-with-password",l).then(this.authResponse.bind(this))}authRefresh(e,t){let n={method:"POST"};return n=ce("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=ce("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,l){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=ce("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,i,l),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class sn extends Oe{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return Q(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const i=function(l){const o=l;let r;try{r=JSON.parse(o==null?void 0:o.data)}catch{}t(r||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(i),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,i):yield this.connect(),()=>Q(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,i)})})}unsubscribe(e){var t;return Q(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return Q(this,void 0,void 0,function*(){let n=!1;for(let i in this.subscriptions)if(i.startsWith(e)){n=!0;for(let l of this.subscriptions[i])(t=this.eventSource)===null||t===void 0||t.removeEventListener(i,l);delete this.subscriptions[i]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return Q(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let i=!1;for(let l=this.subscriptions[e].length-1;l>=0;l--)this.subscriptions[e][l]===t&&(i=!0,delete this.subscriptions[e][l],this.subscriptions[e].splice(l,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));i&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let i in this.subscriptions)if(!((n=this.subscriptions[i])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return Q(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return Q(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>Q(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new he(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class qn extends ft{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return Q(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return Q(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return Q(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(i=>{var l,o,r;return((l=this.client.authStore.model)===null||l===void 0?void 0:l.id)!==(i==null?void 0:i.id)||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,i),i})}delete(e,t){return super.delete(e,t).then(n=>{var i,l,o;return!n||((i=this.client.authStore.model)===null||i===void 0?void 0:i.id)!==e||((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,i){let l={method:"POST",body:{identity:e,password:t}};return l=ce("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",l,n,i),this.client.send(this.baseCollectionPath+"/auth-with-password",l).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,i,l,o,r){let a={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:i,createData:l}};return a=ce("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,o,r),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(c=>this.authResponse(c))}authWithOAuth2(...e){return Q(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!n)throw new he(new Error(`Missing or invalid provider "${t.provider}".`));const i=this.client.buildUrl("/api/oauth2-redirect"),l=new sn(this.client);let o=null;function r(){o==null||o.close(),l.unsubscribe()}return t.urlCallback||(o=wt(void 0)),new Promise((a,c)=>Q(this,void 0,void 0,function*(){var f;try{yield l.subscribe("@oauth2",w=>Q(this,void 0,void 0,function*(){const y=l.clientId;try{if(!w.state||y!==w.state)throw new Error("State parameters don't match.");const _=Object.assign({},t);delete _.provider,delete _.scopes,delete _.createData,delete _.urlCallback;const b=yield this.authWithOAuth2Code(n.name,w.code,n.codeVerifier,i,t.createData,_);a(b)}catch(_){c(new he(_))}r()}));const d={state:l.clientId};!((f=t.scopes)===null||f===void 0)&&f.length&&(d.scope=t.scopes.join(" "));const h=this._replaceQueryParams(n.authUrl+i,d);yield(t.urlCallback||function(w){o?o.location.href=w:o=wt(w)})(h)}catch(d){r(),c(new he(d))}}))})}authRefresh(e,t){let n={method:"POST"};return n=ce("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(i=>this.authResponse(i))}requestPasswordReset(e,t,n){let i={method:"POST",body:{email:e}};return i=ce("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}confirmPasswordReset(e,t,n,i,l){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=ce("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,l),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let i={method:"POST",body:{email:e}};return i=ce("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}confirmVerification(e,t,n){let i={method:"POST",body:{token:e}};return i=ce("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>!0)}requestEmailChange(e,t,n){let i={method:"POST",body:{newEmail:e}};return i=ce("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}confirmEmailChange(e,t,n,i){let l={method:"POST",body:{token:e,password:t}};return l=ce("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",l,n,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",l).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,i="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const l={},o=i.split("&");for(const r of o){if(r=="")continue;const a=r.split("=");l[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let r in t)t.hasOwnProperty(r)&&(t[r]==null?delete l[r]:l[r]=t[r]);i="";for(let r in l)l.hasOwnProperty(r)&&(i!=""&&(i+="&"),i+=encodeURIComponent(r.replace(/%20/g,"+"))+"="+encodeURIComponent(l[r].replace(/%20/g,"+")));return i!=""?n+"?"+i:n}}function wt(s){if(typeof window>"u"||!(window!=null&&window.open))throw new he(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,i=window.innerHeight;e=e>n?n:e,t=t>i?i:t;let l=n/2-e/2,o=i/2-t/2;return window.open(s,"popup_window","width="+e+",height="+t+",top="+o+",left="+l+",resizable,menubar=no")}class Rn extends ft{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return Q(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class $n extends Oe{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class Nn extends Oe{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Un extends Oe{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let l=this.client.buildUrl(i.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);l+=(l.includes("?")?"&":"?")+o}return l}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Fn extends Oe{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Mn=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class Hn{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Ln,this.admins=new jn(this),this.collections=new Rn(this),this.files=new Un(this),this.logs=new $n(this),this.settings=new An(this),this.realtime=new sn(this),this.health=new Nn(this),this.backups=new Fn(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new qn(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return Q(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(t.query!==void 0){const i=this.serializeQueryParams(t.query);i&&(n+=(n.includes("?")?"&":"?")+i),delete t.query}if(this.beforeSend){const i=Object.assign({},yield this.beforeSend(n,t));i.url!==void 0||i.options!==void 0?(n=i.url||n,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(i=>Q(this,void 0,void 0,function*(){let l={};try{l=yield i.json()}catch{}if(this.afterSend&&(l=yield this.afterSend(i,l)),i.status>=400)throw new he({url:i.url,status:i.status,data:l});return l})).catch(i=>{throw new he(i)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Mn.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const i=new AbortController;this.cancelControllers[n]=i,t.signal=i.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const i=Array.isArray(e[n])?e[n]:[e[n]];for(let l of i)t.append(n,l)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let i of n)if(typeof Blob<"u"&&i instanceof Blob||typeof File<"u"&&i instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const i=e[n],l=encodeURIComponent(n);if(Array.isArray(i))for(const o of i)t.push(l+"="+encodeURIComponent(o));else i instanceof Date?t.push(l+"="+encodeURIComponent(i.toISOString())):typeof i!==null&&typeof i=="object"?t.push(l+"="+encodeURIComponent(JSON.stringify(i))):t.push(l+"="+encodeURIComponent(i))}return t.join("&")}}const je=[];function be(s,e=F){let t;const n=new Set;function i(r){if(ne(s,r)&&(s=r,t)){const a=!je.length;for(const c of n)c[1](),je.push(c,s);if(a){for(let c=0;c<je.length;c+=2)je[c][0](je[c+1]);je.length=0}}}function l(r){i(r(s))}function o(r,a=F){const c=[r,a];return n.add(c),n.size===1&&(t=e(i,l)||F),r(s),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:i,update:l,subscribe:o}}const z=new Hn("https://shiftswitch.pockethost.io"),_e=be(z.authStore.model),on=be(!1);z.authStore.onChange(s=>{_e.set(z.authStore.model),z.authStore.model!=null&&on.set(z.authStore.model.isAdmin)});const Ge=be(!1),tt=be(!1),xe=be(!1),Be=be(new Date),Ne=be(null),ln=be("v0.2.2"),Ce=be([]);function Gn(s){let e,t,n,i,l,o=new Date(s[0].dateStart).toLocaleDateString("fr-CH")+"",r,a,c=s[0].location+"",f,d,h,p,w,y,_,b;return{c(){e=g("div"),t=g("div"),n=P(s[1]),i=S(),l=g("div"),r=P(o),a=P(" - "),f=P(c),d=S(),h=g("div"),p=g("button"),p.textContent="Oui",w=S(),y=g("button"),y.textContent="Non",m(p,"class","button svelte-1r3mzht"),m(y,"class","button svelte-1r3mzht"),m(h,"class","group svelte-1r3mzht"),m(e,"class","popup svelte-1r3mzht")},m(v,k){O(v,e,k),u(e,t),u(t,n),u(e,i),u(e,l),u(l,r),u(l,a),u(l,f),u(e,d),u(e,h),u(h,p),u(h,w),u(h,y),_||(b=[L(p,"click",s[2]),L(y,"click",s[3])],_=!0)},p(v,[k]){k&2&&q(n,v[1]),k&1&&o!==(o=new Date(v[0].dateStart).toLocaleDateString("fr-CH")+"")&&q(r,o),k&1&&c!==(c=v[0].location+"")&&q(f,c)},i:F,o:F,d(v){v&&C(e),_=!1,ue(b)}}}function Bn(s,e,t){let{object:n}=e,{text:i}=e,{onClose:l}=e;function o(){l(!0)}function r(){l(!1)}return s.$$set=a=>{"object"in a&&t(0,n=a.object),"text"in a&&t(1,i=a.text),"onClose"in a&&t(4,l=a.onClose)},[n,i,o,r,l]}class rn extends ae{constructor(e){super(),re(this,e,Bn,Gn,ne,{object:0,text:1,onClose:4})}}function yt(s,e,t){const n=s.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function kt(s,e,t){const n=s.slice();return n[17]=e[t],n}function St(s){var r,a;let e,t,n,i,l,o;return n=new rn({props:{object:s[3],onClose:s[5],text:s[1].id==((a=(r=s[3].expand)==null?void 0:r.employee)==null?void 0:a.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"}}),{c(){e=g("div"),t=S(),le(n.$$.fragment),m(e,"class","overlay svelte-y5ee6k")},m(c,f){O(c,e,f),O(c,t,f),ee(n,c,f),i=!0,l||(o=L(e,"click",s[6]),l=!0)},p(c,f){var h,p;const d={};f&8&&(d.object=c[3]),f&10&&(d.text=c[1].id==((p=(h=c[3].expand)==null?void 0:h.employee)==null?void 0:p.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"),n.$set(d)},i(c){i||(U(n.$$.fragment,c),i=!0)},o(c){G(n.$$.fragment,c),i=!1},d(c){c&&(C(e),C(t)),te(n,c),l=!1,o()}}}function Ct(s){let e,t,n=s[13]+"",i,l,o=[],r=new Map,a,c=W(s[14]);const f=d=>d[17].id;for(let d=0;d<c.length;d+=1){let h=kt(s,c,d),p=f(h);r.set(p,o[d]=Pt(p,h))}return{c(){e=g("div"),t=g("div"),i=P(n),l=S();for(let d=0;d<o.length;d+=1)o[d].c();a=S(),m(t,"class","date svelte-y5ee6k"),m(e,"class","scroll_day svelte-y5ee6k")},m(d,h){O(d,e,h),u(e,t),u(t,i),u(e,l);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(e,null);u(e,a)},p(d,h){h&1&&n!==(n=d[13]+"")&&q(i,n),h&135&&(c=W(d[14]),o=kn(o,h,f,1,d,c,r,e,yn,Pt,a,kt))},d(d){d&&C(e);for(let h=0;h<o.length;h+=1)o[h].d()}}}function Ot(s){let e;function t(l,o){var r,a;return((a=(r=l[17].expand)==null?void 0:r.employee)==null?void 0:a.username)===l[1].username?zn:Kn}let n=t(s),i=n(s);return{c(){i.c(),e=fe()},m(l,o){i.m(l,o),O(l,e,o)},p(l,o){n===(n=t(l))&&i?i.p(l,o):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&C(e),i.d(l)}}}function Kn(s){var $,I;let e,t,n=nt((I=($=s[17].expand)==null?void 0:$.employee)==null?void 0:I.username)+"",i,l,o,r,a=new Date(s[17].dateStart).getHours()+"",c,f,d=new Date(s[17].dateEnd).getHours()+"",h,p,w,y,_=s[17].location+"",b,v,k,E;function j(){return s[11](s[17])}return{c(){e=g("div"),t=g("div"),i=P(n),l=S(),o=g("div"),r=P("("),c=P(a),f=P("h-"),h=P(d),p=P("h)"),w=S(),y=g("div"),b=P(_),m(t,"class","name svelte-y5ee6k"),m(o,"class","time svelte-y5ee6k"),m(y,"class","loc svelte-y5ee6k"),m(e,"class",v=ye(s[17].swap?"shift swap":"shift noswap")+" svelte-y5ee6k")},m(N,A){O(N,e,A),u(e,t),u(t,i),u(e,l),u(e,o),u(o,r),u(o,c),u(o,f),u(o,h),u(o,p),u(e,w),u(e,y),u(y,b),k||(E=L(e,"click",j),k=!0)},p(N,A){var J,X;s=N,A&1&&n!==(n=nt((X=(J=s[17].expand)==null?void 0:J.employee)==null?void 0:X.username)+"")&&q(i,n),A&1&&a!==(a=new Date(s[17].dateStart).getHours()+"")&&q(c,a),A&1&&d!==(d=new Date(s[17].dateEnd).getHours()+"")&&q(h,d),A&1&&_!==(_=s[17].location+"")&&q(b,_),A&1&&v!==(v=ye(s[17].swap?"shift swap":"shift noswap")+" svelte-y5ee6k")&&m(e,"class",v)},d(N){N&&C(e),k=!1,E()}}}function zn(s){var $,I;let e,t,n=nt((I=($=s[17].expand)==null?void 0:$.employee)==null?void 0:I.username)+"",i,l,o,r,a=new Date(s[17].dateStart).getHours()+"",c,f,d=new Date(s[17].dateEnd).getHours()+"",h,p,w,y,_=s[17].location+"",b,v,k,E;function j(){return s[10](s[17])}return{c(){e=g("div"),t=g("div"),i=P(n),l=S(),o=g("div"),r=P("("),c=P(a),f=P("h-"),h=P(d),p=P("h)"),w=S(),y=g("div"),b=P(_),m(t,"class","name svelte-y5ee6k"),m(o,"class","time svelte-y5ee6k"),m(y,"class","loc svelte-y5ee6k"),m(e,"class",v=ye(s[17].swap?"shift swap":"shift")+" svelte-y5ee6k")},m(N,A){O(N,e,A),u(e,t),u(t,i),u(e,l),u(e,o),u(o,r),u(o,c),u(o,f),u(o,h),u(o,p),u(e,w),u(e,y),u(y,b),k||(E=L(e,"click",j),k=!0)},p(N,A){var J,X;s=N,A&1&&n!==(n=nt((X=(J=s[17].expand)==null?void 0:J.employee)==null?void 0:X.username)+"")&&q(i,n),A&1&&a!==(a=new Date(s[17].dateStart).getHours()+"")&&q(c,a),A&1&&d!==(d=new Date(s[17].dateEnd).getHours()+"")&&q(h,d),A&1&&_!==(_=s[17].location+"")&&q(b,_),A&1&&v!==(v=ye(s[17].swap?"shift swap":"shift")+" svelte-y5ee6k")&&m(e,"class",v)},d(N){N&&C(e),k=!1,E()}}}function Pt(s,e){var l,o;let t,n,i=(e[2]&&((o=(l=e[17].expand)==null?void 0:l.employee)==null?void 0:o.username)==e[1].username||!e[2])&&Ot(e);return{key:s,first:null,c(){t=fe(),i&&i.c(),n=fe(),this.first=t},m(r,a){O(r,t,a),i&&i.m(r,a),O(r,n,a)},p(r,a){var c,f;e=r,e[2]&&((f=(c=e[17].expand)==null?void 0:c.employee)==null?void 0:f.username)==e[1].username||!e[2]?i?i.p(e,a):(i=Ot(e),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},d(r){r&&(C(t),C(n)),i&&i.d(r)}}}function Dt(s){let e,t=s[14].length!=0&&Ct(s);return{c(){t&&t.c(),e=fe()},m(n,i){t&&t.m(n,i),O(n,e,i)},p(n,i){n[14].length!=0?t?t.p(n,i):(t=Ct(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&C(e),t&&t.d(n)}}}function Wn(s){let e,t,n,i=s[4]&&St(s),l=W(Object.entries(s[0])),o=[];for(let r=0;r<l.length;r+=1)o[r]=Dt(yt(s,l,r));return{c(){i&&i.c(),e=S();for(let r=0;r<o.length;r+=1)o[r].c();t=fe()},m(r,a){i&&i.m(r,a),O(r,e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(r,a);O(r,t,a),n=!0},p(r,[a]){if(r[4]?i?(i.p(r,a),a&16&&U(i,1)):(i=St(r),i.c(),U(i,1),i.m(e.parentNode,e)):i&&(Ke(),G(i,1,1,()=>{i=null}),ze()),a&135){l=W(Object.entries(r[0]));let c;for(c=0;c<l.length;c+=1){const f=yt(r,l,c);o[c]?o[c].p(f,a):(o[c]=Dt(f),o[c].c(),o[c].m(t.parentNode,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=l.length}},i(r){n||(U(i),n=!0)},o(r){G(i),n=!1},d(r){r&&(C(e),C(t)),i&&i.d(r),ve(o,r)}}}function nt(s){return s.charAt(0).toUpperCase()+s.slice(1)}function Vn(s,e,t){let n,i,l,o;M(s,_e,_=>t(1,n=_)),M(s,Ce,_=>t(8,i=_)),M(s,Be,_=>t(9,l=_)),M(s,tt,_=>t(2,o=_));let r={},a=null,c=!1,f=_=>{var b,v;_&&(n.id==((v=(b=a.expand)==null?void 0:b.employee)==null?void 0:v.id)?t(3,a.swap=!a.swap,a):(t(3,a.swap=!a.swap,a),t(3,a.expand.employee=n,a))),t(4,c=!1),d(a,a.swap)};async function d(_,b){const v=i.map(E=>E.id===_.id?{...E,swap:b}:E);ht(Ce,i=v,i);const k={employee:n.id,swap:!1};await z.collection("shifts").update(_.id,k),_=null}function h(){t(4,c=!1),t(3,a=null)}function p(_){t(3,a=_),t(4,c=!0)}const w=_=>p(_),y=_=>{_.swap&&p(_)};return s.$$.update=()=>{var _,b;if(s.$$.dirty&775){t(0,r={});for(const v of Object.values(i))if((o&&((b=(_=v.expand)==null?void 0:_.employee)==null?void 0:b.username)==n.username||!o)&&new Date(v.dateStart).getMonth()==l.getMonth()){const k=new Date(v.dateStart).getDate();r.hasOwnProperty(k)?r[k].push(v):t(0,r[k]=[v],r)}}},[r,n,o,a,c,f,h,p,i,l,w,y]}class Jn extends ae{constructor(e){super(),re(this,e,Vn,Wn,ne,{})}}function Yn(s){let e,t,n,i,l,o,r,a,c;return{c(){e=g("nav"),t=g("div"),n=g("div"),i=P(s[0]),l=S(),o=g("img"),a=S(),c=g("div"),c.textContent=`${Xn}`,m(n,"class","version svelte-1261hd6"),m(o,"class","logo_img svelte-1261hd6"),de(o.src,r=Qn)||m(o,"src",r),m(o,"alt","Logo"),m(t,"class","logo svelte-1261hd6"),m(c,"class","nav-text svelte-1261hd6"),m(e,"class","navbar svelte-1261hd6")},m(f,d){O(f,e,d),u(e,t),u(t,n),u(n,i),u(t,l),u(t,o),u(e,a),u(e,c)},p(f,[d]){d&1&&q(i,f[0])},i:F,o:F,d(f){f&&C(e)}}}let Qn="valderuzlogo.png",Xn="ShiftSwitch";function Zn(s,e,t){let n;return M(s,ln,i=>t(0,n=i)),[n]}class xn extends ae{constructor(e){super(),re(this,e,Zn,Yn,ne,{})}}function es(s){let e,t,n,i,l,o,r,a,c,f,d,h,p,w,y,_;return{c(){e=g("div"),t=g("button"),n=g("img"),l=S(),o=g("button"),r=g("img"),c=S(),f=g("button"),d=g("img"),p=S(),w=g("button"),w.innerHTML='<img src="logout.png" class="svelte-1s3xfw5"/>',de(n.src,i=s[1]?"grid.png":"scroll.png")||m(n,"src",i),m(n,"class","svelte-1s3xfw5"),m(t,"class","toggle-button grid svelte-1s3xfw5"),de(r.src,a=s[0]?"single_user.png":"multi_user.png")||m(r,"src",a),m(r,"class","svelte-1s3xfw5"),m(o,"class","toggle-button svelte-1s3xfw5"),de(d.src,h=s[2]?s[2]:"nopic.png")||m(d,"src",h),m(d,"class","profilepic svelte-1s3xfw5"),m(f,"class","toggle-button svelte-1s3xfw5"),m(w,"class","toggle-button svelte-1s3xfw5"),m(e,"class","navbar svelte-1s3xfw5")},m(b,v){O(b,e,v),u(e,t),u(t,n),u(e,l),u(e,o),u(o,r),u(e,c),u(e,f),u(f,d),u(e,p),u(e,w),y||(_=[L(t,"click",s[3]),L(o,"click",s[4]),L(f,"click",s[5]),L(w,"click",s[6])],y=!0)},p(b,[v]){v&2&&!de(n.src,i=b[1]?"grid.png":"scroll.png")&&m(n,"src",i),v&1&&!de(r.src,a=b[0]?"single_user.png":"multi_user.png")&&m(r,"src",a),v&4&&!de(d.src,h=b[2]?b[2]:"nopic.png")&&m(d,"src",h)},i:F,o:F,d(b){b&&C(e),y=!1,ue(_)}}}function ts(s,e,t){let n,i,l,o,r;M(s,_e,h=>t(7,n=h)),M(s,xe,h=>t(8,i=h)),M(s,tt,h=>t(0,l=h)),M(s,Ge,h=>t(1,o=h)),M(s,Ne,h=>t(2,r=h));function a(){i&&xe.set(!i),Ge.set(!o)}function c(){tt.set(!l)}function f(){xe.set(!i)}function d(){z.authStore.clear()}return st(()=>{Ne.set(z.files.getUrl(n,n.avatar,{thumb:"100x250"}))}),[l,o,r,a,c,f,d]}class ns extends ae{constructor(e){super(),re(this,e,ts,es,ne,{})}}function ss(s){let e,t,n,i,l,o,r=s[0].toLocaleString("fr-CH",{month:"long"})+"",a,c,f=s[0].getFullYear()+"",d,h,p,w,y,_,b;return{c(){e=g("div"),t=g("button"),n=g("img"),l=S(),o=g("div"),a=P(r),c=S(),d=P(f),h=S(),p=g("button"),w=g("img"),de(n.src,i=Tt)||m(n,"src",i),m(n,"alt","Button"),m(n,"class","svelte-co2y0d"),m(t,"class","toggle-button svelte-co2y0d"),m(w,"class","rot svelte-co2y0d"),de(w.src,y=Tt)||m(w,"src",y),m(w,"alt","Button"),m(p,"class","toggle-button svelte-co2y0d"),m(e,"class","layout svelte-co2y0d")},m(v,k){O(v,e,k),u(e,t),u(t,n),u(e,l),u(e,o),u(o,a),u(o,c),u(o,d),u(e,h),u(e,p),u(p,w),_||(b=[L(t,"click",s[3]),L(p,"click",s[4])],_=!0)},p(v,[k]){k&1&&r!==(r=v[0].toLocaleString("fr-CH",{month:"long"})+"")&&q(a,r),k&1&&f!==(f=v[0].getFullYear()+"")&&q(d,f)},i:F,o:F,d(v){v&&C(e),_=!1,ue(b)}}}let Tt="left_arrow.png";function is(s,e,t){let{renderDate:n}=e;function i(){n.setMonth(n.getMonth()+1),t(0,n)}function l(){n.setMonth(n.getMonth()-1),t(0,n)}const o=()=>l(),r=()=>i();return s.$$set=a=>{"renderDate"in a&&t(0,n=a.renderDate)},[n,i,l,o,r]}class os extends ae{constructor(e){super(),re(this,e,is,ss,ne,{renderDate:0})}}function Et(s,e,t){const n=s.slice();return n[16]=e[t],n}function It(s,e,t){const n=s.slice();return n[19]=e[t],n}function Lt(s,e,t){const n=s.slice();return n[16]=e[t],n}function At(s){var r,a;let e,t,n,i,l,o;return n=new rn({props:{object:s[3],onClose:s[5],text:s[2].id==((a=(r=s[3].expand)==null?void 0:r.employee)==null?void 0:a.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"}}),{c(){e=g("div"),t=S(),le(n.$$.fragment),m(e,"class","overlay svelte-yi5pnl")},m(c,f){O(c,e,f),O(c,t,f),ee(n,c,f),i=!0,l||(o=L(e,"click",s[6]),l=!0)},p(c,f){var h,p;const d={};f&8&&(d.object=c[3]),f&12&&(d.text=c[2].id==((p=(h=c[3].expand)==null?void 0:h.employee)==null?void 0:p.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"),n.$set(d)},i(c){i||(U(n.$$.fragment,c),i=!0)},o(c){G(n.$$.fragment,c),i=!1},d(c){c&&(C(e),C(t)),te(n,c),l=!1,o()}}}function jt(s){let e;return{c(){e=g("div"),e.textContent=`${s[16]}`},m(t,n){O(t,e,n)},p:F,d(t){t&&C(e)}}}function qt(s){let e,t=W(s[1][s[16]]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Rt(It(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=fe()},m(i,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,l);O(i,e,l)},p(i,l){if(l&135){t=W(i[1][i[16]]);let o;for(o=0;o<t.length;o+=1){const r=It(i,t,o);n[o]?n[o].p(r,l):(n[o]=Rt(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(i){i&&C(e),ve(n,i)}}}function ls(s){var y,_;let e,t,n=((_=(y=s[19].expand)==null?void 0:y.employee)==null?void 0:_.username)+"",i,l,o,r,a=s[19].location+"",c,f,d,h,p;function w(){return s[14](s[19])}return{c(){e=g("div"),t=g("div"),i=P(n),l=P(" |"),o=S(),r=g("div"),c=P(a),f=S(),m(t,"class","name svelte-yi5pnl"),m(r,"class","loc svelte-yi5pnl"),m(e,"class",d=ye(s[19].swap?"shift swap":"shift noswap")+" svelte-yi5pnl")},m(b,v){O(b,e,v),u(e,t),u(t,i),u(t,l),u(e,o),u(e,r),u(r,c),u(e,f),h||(p=L(e,"click",w),h=!0)},p(b,v){var k,E;s=b,v&3&&n!==(n=((E=(k=s[19].expand)==null?void 0:k.employee)==null?void 0:E.username)+"")&&q(i,n),v&3&&a!==(a=s[19].location+"")&&q(c,a),v&3&&d!==(d=ye(s[19].swap?"shift swap":"shift noswap")+" svelte-yi5pnl")&&m(e,"class",d)},d(b){b&&C(e),h=!1,p()}}}function rs(s){var y,_;let e,t,n=((_=(y=s[19].expand)==null?void 0:y.employee)==null?void 0:_.username)+"",i,l,o,r,a=s[19].location+"",c,f,d,h,p;function w(){return s[13](s[19])}return{c(){e=g("div"),t=g("div"),i=P(n),l=P(" |"),o=S(),r=g("div"),c=P(a),f=S(),m(t,"class","name svelte-yi5pnl"),m(r,"class","loc svelte-yi5pnl"),m(e,"class",d=ye(s[19].swap?"shift swap":"shift")+" svelte-yi5pnl")},m(b,v){O(b,e,v),u(e,t),u(t,i),u(t,l),u(e,o),u(e,r),u(r,c),u(e,f),h||(p=L(e,"click",w),h=!0)},p(b,v){var k,E;s=b,v&3&&n!==(n=((E=(k=s[19].expand)==null?void 0:k.employee)==null?void 0:E.username)+"")&&q(i,n),v&3&&a!==(a=s[19].location+"")&&q(c,a),v&3&&d!==(d=ye(s[19].swap?"shift swap":"shift")+" svelte-yi5pnl")&&m(e,"class",d)},d(b){b&&C(e),h=!1,p()}}}function Rt(s){let e;function t(l,o){var r,a;return((a=(r=l[19].expand)==null?void 0:r.employee)==null?void 0:a.username)===l[2].username?rs:ls}let n=t(s),i=n(s);return{c(){i.c(),e=fe()},m(l,o){i.m(l,o),O(l,e,o)},p(l,o){n===(n=t(l))&&i?i.p(l,o):(i.d(1),i=n(l),i&&(i.c(),i.m(e.parentNode,e)))},d(l){l&&C(e),i.d(l)}}}function $t(s){let e,t,n=new Date(s[16]).getDate()+"",i,l,o,r=s[1][s[16]]&&typeof s[1][s[16]]=="object"&&s[1][s[16]].length>0&&qt(s);return{c(){e=g("div"),t=g("div"),i=P(n),l=S(),r&&r.c(),o=S(),m(t,"class","time svelte-yi5pnl"),m(e,"class","calendar-card svelte-yi5pnl")},m(a,c){O(a,e,c),u(e,t),u(t,i),u(e,l),r&&r.m(e,null),u(e,o)},p(a,c){c&1&&n!==(n=new Date(a[16]).getDate()+"")&&q(i,n),a[1][a[16]]&&typeof a[1][a[16]]=="object"&&a[1][a[16]].length>0?r?r.p(a,c):(r=qt(a),r.c(),r.m(e,o)):r&&(r.d(1),r=null)},d(a){a&&C(e),r&&r.d()}}}function as(s){let e,t,n,i,l,o=s[4]&&At(s),r=W(s[8]),a=[];for(let d=0;d<r.length;d+=1)a[d]=jt(Lt(s,r,d));let c=W(s[0]),f=[];for(let d=0;d<c.length;d+=1)f[d]=$t(Et(s,c,d));return{c(){o&&o.c(),e=S(),t=g("div");for(let d=0;d<a.length;d+=1)a[d].c();n=S(),i=g("div");for(let d=0;d<f.length;d+=1)f[d].c();m(t,"class","weekdays svelte-yi5pnl"),m(i,"class","calendar-grid svelte-yi5pnl")},m(d,h){o&&o.m(d,h),O(d,e,h),O(d,t,h);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(t,null);O(d,n,h),O(d,i,h);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(i,null);l=!0},p(d,[h]){if(d[4]?o?(o.p(d,h),h&16&&U(o,1)):(o=At(d),o.c(),U(o,1),o.m(e.parentNode,e)):o&&(Ke(),G(o,1,1,()=>{o=null}),ze()),h&256){r=W(d[8]);let p;for(p=0;p<r.length;p+=1){const w=Lt(d,r,p);a[p]?a[p].p(w,h):(a[p]=jt(w),a[p].c(),a[p].m(t,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=r.length}if(h&135){c=W(d[0]);let p;for(p=0;p<c.length;p+=1){const w=Et(d,c,p);f[p]?f[p].p(w,h):(f[p]=$t(w),f[p].c(),f[p].m(i,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=c.length}},i(d){l||(U(o),l=!0)},o(d){G(o),l=!1},d(d){d&&(C(e),C(t),C(n),C(i)),o&&o.d(d),ve(a,d),ve(f,d)}}}function cs(s,e,t){let n,i,l,o;M(s,_e,k=>t(2,n=k)),M(s,Ce,k=>t(10,i=k)),M(s,Be,k=>t(11,l=k)),M(s,tt,k=>t(12,o=k));let r,a=[],c={},f=null,d=!1,h=k=>{var E,j;k&&(n.id==((j=(E=f.expand)==null?void 0:E.employee)==null?void 0:j.id)?t(3,f.swap=!f.swap,f):(t(3,f.swap=!f.swap,f),t(3,f.expand.employee=n,f))),t(4,d=!1),p(f,f.swap)};async function p(k,E){const j=i.map(I=>I.id===k.id?{...I,swap:E}:I);ht(Ce,i=j,i);const $={employee:n.id,swap:!1};await z.collection("shifts").update(k.id,$),k=null}function w(){t(4,d=!1),t(3,f=null)}function y(k){t(3,f=k),t(4,d=!0)}let _=["Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi","Dimanche"];const b=k=>y(k),v=k=>{k.swap&&y(k)};return s.$$.update=()=>{var k,E;if(s.$$.dirty&2049){t(0,a=[]);let j=new Date(l.getFullYear(),l.getMonth());for(;j.getDay()!=2;)j.setDate(j.getDate()-1),a.unshift(new Date(j).toISOString().split("T")[0]);const $=new Date(l.getFullYear(),l.getMonth());for(;$.getMonth()==l.getMonth();)a.push(new Date($).toISOString().split("T")[0]),$.setDate($.getDate()+1);a.push(new Date($).toISOString().split("T")[0])}if(s.$$.dirty&7687){t(9,r=new Date(a[0])),t(1,c={});for(const j of Object.values(i))if((o&&((E=(k=j.expand)==null?void 0:k.employee)==null?void 0:E.username)==n.username||!o)&&r<=new Date(j.dateStart)&&new Date(j.dateStart)<=new Date(l.getFullYear(),l.getMonth()+1,1)){const $=new Date(j.dateStart).toISOString().split("T")[0];c.hasOwnProperty($)?c[$].push(j):t(1,c[$]=[j],c)}}},[a,c,n,f,d,h,w,y,_,r,i,l,o,b,v]}class us extends ae{constructor(e){super(),re(this,e,cs,as,ne,{})}}function Nt(s){let e,t,n,i,l,o,r,a,c,f,d,h,p,w,y,_=s[0]&&Ut(s);return{c(){e=g("div"),t=g("div"),t.innerHTML='<img src="valderuzlogo.png" alt="Logo" class="svelte-11pokrt"/> <div class="title svelte-11pokrt">ShiftSwitch</div>',n=S(),i=g("div"),l=P(s[4]),o=S(),r=g("form"),_&&_.c(),a=S(),c=g("input"),f=S(),d=g("input"),h=S(),p=g("button"),p.textContent="Login",m(t,"class","logo svelte-11pokrt"),m(c,"placeholder","Username"),m(c,"type","text"),m(c,"class","input svelte-11pokrt"),m(d,"placeholder","Password"),m(d,"type","password"),m(d,"class","input svelte-11pokrt"),m(p,"class","button svelte-11pokrt"),m(r,"class","form svelte-11pokrt"),m(e,"class","container svelte-11pokrt")},m(b,v){O(b,e,v),u(e,t),u(e,n),u(e,i),u(i,l),u(e,o),u(e,r),_&&_.m(r,null),u(r,a),u(r,c),B(c,s[1]),u(r,f),u(r,d),B(d,s[2]),u(r,h),u(r,p),w||(y=[L(c,"input",s[7]),L(d,"input",s[8]),L(p,"click",s[5]),L(r,"submit",hn(s[6]))],w=!0)},p(b,v){v&16&&q(l,b[4]),b[0]?_?_.p(b,v):(_=Ut(b),_.c(),_.m(r,a)):_&&(_.d(1),_=null),v&2&&c.value!==b[1]&&B(c,b[1]),v&4&&d.value!==b[2]&&B(d,b[2])},d(b){b&&C(e),_&&_.d(),w=!1,ue(y)}}}function Ut(s){let e,t;return{c(){e=g("div"),t=P(s[0]),m(e,"class","errmsg svelte-11pokrt")},m(n,i){O(n,e,i),u(e,t)},p(n,i){i&1&&q(t,n[0])},d(n){n&&C(e)}}}function ds(s){let e,t=!s[3]&&Nt(s);return{c(){t&&t.c(),e=fe()},m(n,i){t&&t.m(n,i),O(n,e,i)},p(n,[i]){n[3]?t&&(t.d(1),t=null):t?t.p(n,i):(t=Nt(n),t.c(),t.m(e.parentNode,e))},i:F,o:F,d(n){n&&C(e),t&&t.d(n)}}}function hs(s,e,t){let n,i;M(s,_e,h=>t(3,n=h)),M(s,ln,h=>t(4,i=h));let l="",o,r;async function a(){try{await z.collection("users").authWithPassword(o,r);const h=await z.collection("users").getOne(n.id,{});Ne.set(z.files.getUrl(h,h.avatar,{thumb:"100x100"}))}catch(h){console.log("signup failed: "+h.message),h.message==="Failed to authenticate."?t(0,l="Invalid username or password. Please try again."):h.message==="NetworkError"?t(0,l="Network error. Please check your internet connection."):t(0,l=h.message)}}function c(h){mn.call(this,s,h)}function f(){o=this.value,t(1,o)}function d(){r=this.value,t(2,r)}return[l,o,r,n,i,a,c,f,d]}class fs extends ae{constructor(e){super(),re(this,e,hs,ds,ne,{})}}function ps(s){let e,t,n,i,l,o,r,a,c,f,d,h,p,w,y,_;return{c(){e=g("div"),t=g("div"),t.textContent="Changer le mot de passe:",n=S(),i=g("div"),l=g("input"),o=S(),r=g("input"),a=S(),c=g("input"),f=S(),d=g("div"),h=g("button"),h.textContent="Exit",p=S(),w=g("button"),w.textContent="Change",m(l,"placeholder","Old Password"),m(l,"type","password"),m(l,"class","input"),m(r,"placeholder","Password"),m(r,"type","password"),m(r,"class","input"),m(c,"placeholder","Password Confirmation"),m(c,"type","password"),m(c,"class","input"),m(i,"class","group-flex svelte-hb9kik"),m(h,"class","button svelte-hb9kik"),m(w,"class","button svelte-hb9kik"),m(d,"class","group svelte-hb9kik"),m(e,"class","popup svelte-hb9kik")},m(b,v){O(b,e,v),u(e,t),u(e,n),u(e,i),u(i,l),B(l,s[0]),u(i,o),u(i,r),B(r,s[1]),u(i,a),u(i,c),B(c,s[2]),u(e,f),u(e,d),u(d,h),u(d,p),u(d,w),y||(_=[L(l,"input",s[6]),L(r,"input",s[7]),L(c,"input",s[8]),L(h,"click",s[4]),L(w,"click",s[3])],y=!0)},p(b,[v]){v&1&&l.value!==b[0]&&B(l,b[0]),v&2&&r.value!==b[1]&&B(r,b[1]),v&4&&c.value!==b[2]&&B(c,b[2])},i:F,o:F,d(b){b&&C(e),y=!1,ue(_)}}}function ms(s,e,t){let n;M(s,_e,p=>t(9,n=p));let{onClose:i}=e,l,o,r;async function a(){try{const p={password:o,passwordConfirm:r,oldPassword:l},w=await z.collection("users").update(n.id,p);i()}catch{console.log("passwords do not match")}}function c(){i()}function f(){l=this.value,t(0,l)}function d(){o=this.value,t(1,o)}function h(){r=this.value,t(2,r)}return s.$$set=p=>{"onClose"in p&&t(5,i=p.onClose)},[l,o,r,a,c,i,f,d,h]}class gs extends ae{constructor(e){super(),re(this,e,ms,ps,ne,{onClose:5})}}function Ft(s,e,t){const n=s.slice();return n[6]=e[t],n}function Mt(s){let e,t=new Date(s[6]).getDate()+"",n;return{c(){e=g("div"),n=P(t),m(e,"class","day svelte-1o1p8")},m(i,l){O(i,e,l),u(e,n)},p(i,l){l&1&&t!==(t=new Date(i[6]).getDate()+"")&&q(n,t)},d(i){i&&C(e)}}}function vs(s){let e,t,n=W(s[0]),i=[];for(let l=0;l<n.length;l+=1)i[l]=Mt(Ft(s,n,l));return{c(){e=g("div"),t=g("div");for(let l=0;l<i.length;l+=1)i[l].c();m(t,"class","calendar-grid svelte-1o1p8")},m(l,o){O(l,e,o),u(e,t);for(let r=0;r<i.length;r+=1)i[r]&&i[r].m(t,null)},p(l,[o]){if(o&1){n=W(l[0]);let r;for(r=0;r<n.length;r+=1){const a=Ft(l,n,r);i[r]?i[r].p(a,o):(i[r]=Mt(a),i[r].c(),i[r].m(t,null))}for(;r<i.length;r+=1)i[r].d(1);i.length=n.length}},i:F,o:F,d(l){l&&C(e),ve(i,l)}}}function bs(s,e,t){let n;M(s,Be,r=>t(3,n=r));let{text:i}=e,{onClose:l}=e,o=[];return s.$$set=r=>{"text"in r&&t(1,i=r.text),"onClose"in r&&t(2,l=r.onClose)},s.$$.update=()=>{if(s.$$.dirty&9){t(0,o=[]);let r=new Date(n.getFullYear(),n.getMonth());for(;r.getDay()!=2;)r.setDate(r.getDate()-1),o.unshift(new Date(r).toISOString().split("T")[0]);const a=new Date(n.getFullYear(),n.getMonth());for(;a.getMonth()==n.getMonth();)o.push(new Date(a).toISOString().split("T")[0]),a.setDate(a.getDate()+1);o.push(new Date(a).toISOString().split("T")[0])}},[o,i,l,n]}class _s extends ae{constructor(e){super(),re(this,e,bs,vs,ne,{text:1,onClose:2})}}function Ht(s,e,t){const n=s.slice();return n[6]=e[t],n[18]=t,n}function Gt(s,e,t){const n=s.slice();return n[19]=e[t],n}function Bt(s,e,t){const n=s.slice();return n[6]=e[t],n[18]=t,n}function Kt(s){let e,t=s[6].username+"",n,i;return{c(){e=g("option"),n=P(t),e.__value=i=s[6].username,B(e,e.__value)},m(l,o){O(l,e,o),u(e,n)},p(l,o){o&32&&t!==(t=l[6].username+"")&&q(n,t),o&32&&i!==(i=l[6].username)&&(e.__value=i,B(e,e.__value))},d(l){l&&C(e)}}}function zt(s){var p,w;let e,t=((w=(p=s[19].expand)==null?void 0:p.employee)==null?void 0:w.username)+"",n,i,l=(s[19].dateStart!=""?new Date(s[19].dateStart).toLocaleDateString("fr-CH",{}):"")+"",o,r,a=(s[19].dateEnd!=""?new Date(s[19].dateEnd).toLocaleDateString("fr-CH",{}):"")+"",c,f,d=s[19].swap?"":"",h;return{c(){e=g("div"),n=P(t),i=P(" ("),o=P(l),r=P(" - "),c=P(a),f=P(") "),h=P(d),m(e,"class","shift svelte-ee5wpv")},m(y,_){O(y,e,_),u(e,n),u(e,i),u(e,o),u(e,r),u(e,c),u(e,f),u(e,h)},p(y,_){var b,v;_&16&&t!==(t=((v=(b=y[19].expand)==null?void 0:b.employee)==null?void 0:v.username)+"")&&q(n,t),_&16&&l!==(l=(y[19].dateStart!=""?new Date(y[19].dateStart).toLocaleDateString("fr-CH",{}):"")+"")&&q(o,l),_&16&&a!==(a=(y[19].dateEnd!=""?new Date(y[19].dateEnd).toLocaleDateString("fr-CH",{}):"")+"")&&q(c,a),_&16&&d!==(d=y[19].swap?"":"")&&q(h,d)},d(y){y&&C(e)}}}function Wt(s){let e,t=s[6].username+"",n,i;return{c(){e=g("option"),n=P(t),e.__value=i=s[6].username,B(e,e.__value)},m(l,o){O(l,e,o),u(e,n)},p(l,o){o&32&&t!==(t=l[6].username+"")&&q(n,t),o&32&&i!==(i=l[6].username)&&(e.__value=i,B(e,e.__value))},d(l){l&&C(e)}}}function ws(s){let e,t,n,i,l,o,r,a,c,f,d,h,p,w,y,_,b,v,k,E,j,$,I,N,A,J,X,Pe,pe,De,Z,x,me,ge,K,Y,R,H,pt,We,Ue,it,ke,Ve,mt,Je,Fe,ot,gt,Te=W(s[5]),se=[];for(let T=0;T<Te.length;T+=1)se[T]=Kt(Bt(s,Te,T));let Ee=W(s[4]),ie=[];for(let T=0;T<Ee.length;T+=1)ie[T]=zt(Gt(s,Ee,T));let Ie=W(s[5]),oe=[];for(let T=0;T<Ie.length;T+=1)oe[T]=Wt(Ht(s,Ie,T));return{c(){e=g("div"),t=g("div"),t.textContent="Modifier un horaire",n=S(),i=g("div"),l=P("Date:"),o=g("input"),r=P(`\r
        Garde-Bains:\r
            `),a=g("select");for(let T=0;T<se.length;T+=1)se[T].c();c=P(`\r
        Remplacement:`),f=g("input"),d=S(),h=g("button"),h.textContent="Rechercher",p=S();for(let T=0;T<ie.length;T+=1)ie[T].c();w=S(),y=g("div"),y.innerHTML='<button class="button svelte-ee5wpv">Modifier</button>',_=S(),b=g("div"),v=g("div"),v.textContent="Ajouter un horaire",k=S(),E=g("div"),j=g("div"),$=P("Date de dbut "),I=g("input"),N=S(),A=g("div"),J=P("Date de fin "),X=g("input"),Pe=S(),pe=g("div"),De=P(`Lieu \r
            `),Z=g("select"),x=g("option"),x.textContent="Engollon",me=g("option"),me.textContent="GSC",ge=g("option"),ge.textContent="Fontnelle",K=S(),Y=g("div"),R=P(`Garde-Bains \r
            `),H=g("select");for(let T=0;T<oe.length;T+=1)oe[T].c();pt=S(),We=g("div"),Ue=g("button"),Ue.textContent="Ajouter",it=S(),ke=g("div"),Ve=g("div"),Ve.textContent="Generer les horaires",mt=S(),Je=g("div"),Fe=g("button"),Fe.textContent="Generer les horaires",m(t,"class","header svelte-ee5wpv"),m(o,"type","datetime-local"),s[6]===void 0&&$e(()=>s[10].call(a)),m(f,"type","checkbox"),m(h,"class","button svelte-ee5wpv"),m(i,"class","subsection svelte-ee5wpv"),m(y,"class","subsection svelte-ee5wpv"),m(e,"class","section svelte-ee5wpv"),m(v,"class","header svelte-ee5wpv"),m(I,"type","datetime-local"),m(X,"type","datetime-local"),x.selected=!0,x.__value="Engollon",B(x,x.__value),me.__value="GSC",B(me,me.__value),ge.__value="Fontnelle",B(ge,ge.__value),s[3]===void 0&&$e(()=>s[14].call(Z)),s[6]===void 0&&$e(()=>s[15].call(H)),m(E,"class","subsection svelte-ee5wpv"),m(Ue,"class","button svelte-ee5wpv"),m(We,"class","subsection svelte-ee5wpv"),m(b,"class","section svelte-ee5wpv"),m(Ve,"class","header svelte-ee5wpv"),m(Fe,"class","button svelte-ee5wpv"),m(Je,"class","subsection svelte-ee5wpv"),m(ke,"class","section svelte-ee5wpv")},m(T,V){O(T,e,V),u(e,t),u(e,n),u(e,i),u(i,l),u(i,o),B(o,s[1]),u(i,r),u(i,a);for(let D=0;D<se.length;D+=1)se[D]&&se[D].m(a,null);Le(a,s[6],!0),u(i,c),u(i,f),f.checked=s[2],u(i,d),u(i,h),u(i,p);for(let D=0;D<ie.length;D+=1)ie[D]&&ie[D].m(i,null);u(e,w),u(e,y),O(T,_,V),O(T,b,V),u(b,v),u(b,k),u(b,E),u(E,j),u(j,$),u(j,I),B(I,s[1]),u(E,N),u(E,A),u(A,J),u(A,X),B(X,s[0]),u(E,Pe),u(E,pe),u(pe,De),u(pe,Z),u(Z,x),u(Z,me),u(Z,ge),Le(Z,s[3],!0),u(E,K),u(E,Y),u(Y,R),u(Y,H);for(let D=0;D<oe.length;D+=1)oe[D]&&oe[D].m(H,null);Le(H,s[6],!0),u(b,pt),u(b,We),u(We,Ue),O(T,it,V),O(T,ke,V),u(ke,Ve),u(ke,mt),u(ke,Je),u(Je,Fe),ot||(gt=[L(o,"input",s[9]),L(a,"change",s[10]),L(f,"change",s[11]),L(h,"click",s[8]),L(I,"input",s[12]),L(X,"input",s[13]),L(Z,"change",s[14]),L(H,"change",s[15]),L(Ue,"click",s[7]),L(Fe,"click",ys)],ot=!0)},p(T,[V]){if(V&2&&B(o,T[1]),V&32){Te=W(T[5]);let D;for(D=0;D<Te.length;D+=1){const we=Bt(T,Te,D);se[D]?se[D].p(we,V):(se[D]=Kt(we),se[D].c(),se[D].m(a,null))}for(;D<se.length;D+=1)se[D].d(1);se.length=Te.length}if(V&96&&Le(a,T[6]),V&4&&(f.checked=T[2]),V&16){Ee=W(T[4]);let D;for(D=0;D<Ee.length;D+=1){const we=Gt(T,Ee,D);ie[D]?ie[D].p(we,V):(ie[D]=zt(we),ie[D].c(),ie[D].m(i,null))}for(;D<ie.length;D+=1)ie[D].d(1);ie.length=Ee.length}if(V&2&&B(I,T[1]),V&1&&B(X,T[0]),V&8&&Le(Z,T[3]),V&32){Ie=W(T[5]);let D;for(D=0;D<Ie.length;D+=1){const we=Ht(T,Ie,D);oe[D]?oe[D].p(we,V):(oe[D]=Wt(we),oe[D].c(),oe[D].m(H,null))}for(;D<oe.length;D+=1)oe[D].d(1);oe.length=Ie.length}V&96&&Le(H,T[6])},i:F,o:F,d(T){T&&(C(e),C(_),C(b),C(it),C(ke)),ve(se,T),ve(ie,T),ve(oe,T),ot=!1,ue(gt)}}}function ys(){alert("Du calme! J'y travaille...")}function ks(s,e,t){let n,i=new Date().toISOString().slice(0,16),l=new Date().toISOString().slice(0,16),o=!1,r,a=[],c=[];st(()=>{f()});async function f(){t(5,c=await z.collection("users").getFullList({sort:"-created"}))}async function d(){const E=await z.collection("users").getFirstListItem(`username="${n}"`,{}),j={dateStart:new Date(l),dateEnd:new Date(i),employee:E.id,swap:!1,location:r};await z.collection("shifts").create(j)}async function h(){const E=await z.collection("shifts").getList(1,50,{sort:"dateStart",expand:"employee",filter:`employee.username="${n}" && swap=${o} && dateStart>="${new Date(l).toISOString()}"`});t(4,a=E.items)}function p(){l=this.value,t(1,l)}function w(){n=at(this),t(6,n),t(5,c)}function y(){o=this.checked,t(2,o)}function _(){l=this.value,t(1,l)}function b(){i=this.value,t(0,i)}function v(){r=at(this),t(3,r)}function k(){n=at(this),t(6,n),t(5,c)}return[i,l,o,r,a,c,n,d,h,p,w,y,_,b,v,k]}class Ss extends ae{constructor(e){super(),re(this,e,ks,ws,ne,{})}}function Vt(s){let e,t,n,i,l,o;return n=new gs({props:{onClose:s[8]}}),{c(){e=g("div"),t=S(),le(n.$$.fragment),m(e,"class","overlay svelte-161penl")},m(r,a){O(r,e,a),O(r,t,a),ee(n,r,a),i=!0,l||(o=L(e,"click",s[8]),l=!0)},p:F,i(r){i||(U(n.$$.fragment,r),i=!0)},o(r){G(n.$$.fragment,r),i=!1},d(r){r&&(C(e),C(t)),te(n,r),l=!1,o()}}}function Jt(s){return{c:F,m:F,d:F}}function Cs(s){let e,t,n,i,l,o,r,a,c,f=(s[2].username?s[2].username:"Admin")+"",d,h,p,w,y=s[3]?"Grid":"Scroll",_,b,v,k,E,j,$,I,N,A,J=s[5]?"Tu est admin!":"Tu n'est pas admin",X,Pe,pe,De,Z,x,me,ge,K=s[1]&&Vt(s);$=new _s({props:{onClose:s[8],text:"heyy"}});let Y=s[5]&&Jt();return Z=new Ss({}),{c(){e=g("div"),t=g("div"),n=g("form"),i=g("img"),o=S(),r=g("input"),a=S(),c=g("div"),d=P(f),h=S(),p=g("div"),w=g("button"),_=P(y),b=S(),v=g("button"),v.textContent="Change Password",k=S(),K&&K.c(),E=S(),j=g("div"),le($.$$.fragment),I=S(),Y&&Y.c(),N=S(),A=g("div"),X=P(J),Pe=S(),pe=g("div"),pe.textContent="Ces fonctionalits sont normalement reserves aux admins. Cassez pas tout SVP!",De=S(),le(Z.$$.fragment),de(i.src,l=s[4]?s[4]:"nopic.png")||m(i,"src",l),m(i,"alt","Selected Image"),m(i,"class","profilepic svelte-161penl"),m(r,"type","file"),m(r,"name","avatar"),m(r,"accept",".jpg, .jpeg, .png"),rt(r,"display","none"),m(n,"enctype","multipart/form-data"),m(c,"class","name svelte-161penl"),m(w,"class","toggle svelte-161penl"),m(v,"class","flat-button svelte-161penl"),m(t,"class","settings svelte-161penl"),m(j,"class","dispo svelte-161penl"),m(e,"class","card svelte-161penl"),rt(A,"color","white"),rt(pe,"color","white")},m(R,H){O(R,e,H),u(e,t),u(t,n),u(n,i),u(n,o),u(n,r),s[11](r),u(t,a),u(t,c),u(c,d),u(t,h),u(t,p),u(p,w),u(w,_),u(t,b),u(t,v),u(t,k),K&&K.m(t,null),u(e,E),u(e,j),ee($,j,null),O(R,I,H),Y&&Y.m(R,H),O(R,N,H),O(R,A,H),u(A,X),O(R,Pe,H),O(R,pe,H),O(R,De,H),ee(Z,R,H),x=!0,me||(ge=[L(i,"click",s[10]),L(r,"change",s[7]),L(w,"click",s[6]),L(v,"click",s[9])],me=!0)},p(R,[H]){(!x||H&16&&!de(i.src,l=R[4]?R[4]:"nopic.png"))&&m(i,"src",l),(!x||H&4)&&f!==(f=(R[2].username?R[2].username:"Admin")+"")&&q(d,f),(!x||H&8)&&y!==(y=R[3]?"Grid":"Scroll")&&q(_,y),R[1]?K?(K.p(R,H),H&2&&U(K,1)):(K=Vt(R),K.c(),U(K,1),K.m(t,null)):K&&(Ke(),G(K,1,1,()=>{K=null}),ze()),R[5]?Y||(Y=Jt(),Y.c(),Y.m(N.parentNode,N)):Y&&(Y.d(1),Y=null),(!x||H&32)&&J!==(J=R[5]?"Tu est admin!":"Tu n'est pas admin")&&q(X,J)},i(R){x||(U(K),U($.$$.fragment,R),U(Z.$$.fragment,R),x=!0)},o(R){G(K),G($.$$.fragment,R),G(Z.$$.fragment,R),x=!1},d(R){R&&(C(e),C(I),C(N),C(A),C(Pe),C(pe),C(De)),s[11](null),K&&K.d(),te($),Y&&Y.d(R),te(Z,R),me=!1,ue(ge)}}}function Os(s,e,t){let n,i,l,o;M(s,_e,b=>t(2,n=b)),M(s,Ge,b=>t(3,i=b)),M(s,Ne,b=>t(4,l=b)),M(s,on,b=>t(5,o=b));async function r(){Ge.set(!i);const b={useGrid:!i};await z.collection("users").update(n.id,b)}st(()=>{Ne.set(z.files.getUrl(n,n.avatar,{thumb:"100x250"}))});let a,c,f=new FormData;async function d(b){a=b.target.files[0],f.set("avatar",a),Ne.set(URL.createObjectURL(a)),await z.collection("users").update(n.id,{avatar:a})}let h=!1,p=()=>{t(1,h=!1)},w=()=>{t(1,h=!0)};const y=()=>c.click();function _(b){et[b?"unshift":"push"](()=>{c=b,t(0,c)})}return[c,h,n,i,l,o,r,d,p,w,y,_]}class Ps extends ae{constructor(e){super(),re(this,e,Os,Cs,ne,{})}}function Ds(s){let e,t;return e=new Ps({}),{c(){le(e.$$.fragment)},m(n,i){ee(e,n,i),t=!0},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){te(e,n)}}}function Ts(s){let e,t;return e=new Jn({}),{c(){le(e.$$.fragment)},m(n,i){ee(e,n,i),t=!0},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){te(e,n)}}}function Es(s){let e,t;return e=new us({}),{c(){le(e.$$.fragment)},m(n,i){ee(e,n,i),t=!0},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){G(e.$$.fragment,n),t=!1},d(n){te(e,n)}}}function Is(s){let e,t,n,i;const l=[Es,Ts,Ds],o=[];function r(a,c){return a[0]&&!a[1]?0:!a[0]&&!a[1]?1:2}return e=r(s),t=o[e]=l[e](s),{c(){t.c(),n=fe()},m(a,c){o[e].m(a,c),O(a,n,c),i=!0},p(a,[c]){let f=e;e=r(a),e!==f&&(Ke(),G(o[f],1,1,()=>{o[f]=null}),ze(),t=o[e],t||(t=o[e]=l[e](a),t.c()),U(t,1),t.m(n.parentNode,n))},i(a){i||(U(t),i=!0)},o(a){G(t),i=!1},d(a){a&&C(n),o[e].d(a)}}}function Ls(s,e,t){let n,i;return M(s,Ge,l=>t(0,n=l)),M(s,xe,l=>t(1,i=l)),[n,i]}class As extends ae{constructor(e){super(),re(this,e,Ls,Is,ne,{})}}function Yt(s,e,t){const n=s.slice();return n[2]=e[t],n}function Qt(s){var c,f;let e,t,n=((f=(c=s[2].expand)==null?void 0:c.employee)==null?void 0:f.username)+"",i,l,o=new Date(s[2].dateStart).toLocaleString("default")+"",r,a;return{c(){e=g("div"),t=P("De dieu! "),i=P(n),l=P(" a besoin de toi! Peut-tu prendre son horaire le "),r=P(o),a=P(" ?"),m(e,"class","swap_notification svelte-jxanx5")},m(d,h){O(d,e,h),u(e,t),u(e,i),u(e,l),u(e,r),u(e,a)},p(d,h){var p,w;h&1&&n!==(n=((w=(p=d[2].expand)==null?void 0:p.employee)==null?void 0:w.username)+"")&&q(i,n),h&1&&o!==(o=new Date(d[2].dateStart).toLocaleString("default")+"")&&q(r,o)},d(d){d&&C(e)}}}function Xt(s){var i,l;let e=s[2].swap&&s[1].id!=((l=(i=s[2].expand)==null?void 0:i.employee)==null?void 0:l.id)&&new Date(s[2].dateStart)>=new Date,t,n=e&&Qt(s);return{c(){n&&n.c(),t=fe()},m(o,r){n&&n.m(o,r),O(o,t,r)},p(o,r){var a,c;r&3&&(e=o[2].swap&&o[1].id!=((c=(a=o[2].expand)==null?void 0:a.employee)==null?void 0:c.id)&&new Date(o[2].dateStart)>=new Date),e?n?n.p(o,r):(n=Qt(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(o){o&&C(t),n&&n.d(o)}}}function js(s){let e,t=W(s[0]),n=[];for(let i=0;i<t.length;i+=1)n[i]=Xt(Yt(s,t,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=fe()},m(i,l){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,l);O(i,e,l)},p(i,[l]){if(l&3){t=W(i[0]);let o;for(o=0;o<t.length;o+=1){const r=Yt(i,t,o);n[o]?n[o].p(r,l):(n[o]=Xt(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:F,o:F,d(i){i&&C(e),ve(n,i)}}}function qs(s,e,t){let n,i;return M(s,Ce,l=>t(0,n=l)),M(s,_e,l=>t(1,i=l)),[n,i]}class Rs extends ae{constructor(e){super(),re(this,e,qs,js,ne,{})}}function $s(s,e,t){let n;return M(s,Ce,i=>t(0,n=i)),st(async()=>{const i=await z.collection("shifts").getList(1,50,{sort:"dateStart",expand:"employee"});ht(Ce,n=i.items,n)}),[]}class Ns extends ae{constructor(e){super(),re(this,e,$s,null,ne,{})}}function Zt(s){let e,t,n,i,l,o,r,a,c,f,d,h,p,w,y;e=new Ns({}),i=new xn({});function _(v){s[2](v)}let b={};return s[1]!==void 0&&(b.renderDate=s[1]),o=new os({props:b}),et.push(()=>Sn(o,"renderDate",_)),c=new ns({}),h=new Rs({}),w=new As({}),{c(){le(e.$$.fragment),t=S(),n=g("div"),le(i.$$.fragment),l=S(),le(o.$$.fragment),a=S(),le(c.$$.fragment),f=S(),d=g("div"),le(h.$$.fragment),p=S(),le(w.$$.fragment),m(n,"class","navbar svelte-1krkm0i"),m(d,"class","content svelte-1krkm0i")},m(v,k){ee(e,v,k),O(v,t,k),O(v,n,k),ee(i,n,null),u(n,l),ee(o,n,null),u(n,a),ee(c,n,null),O(v,f,k),O(v,d,k),ee(h,d,null),u(d,p),ee(w,d,null),y=!0},p(v,k){const E={};!r&&k&2&&(r=!0,E.renderDate=v[1],bn(()=>r=!1)),o.$set(E)},i(v){y||(U(e.$$.fragment,v),U(i.$$.fragment,v),U(o.$$.fragment,v),U(c.$$.fragment,v),U(h.$$.fragment,v),U(w.$$.fragment,v),y=!0)},o(v){G(e.$$.fragment,v),G(i.$$.fragment,v),G(o.$$.fragment,v),G(c.$$.fragment,v),G(h.$$.fragment,v),G(w.$$.fragment,v),y=!1},d(v){v&&(C(t),C(n),C(f),C(d)),te(e,v),te(i),te(o),te(c),te(h),te(w)}}}function Us(s){let e,t,n,i,l,o=s[0]&&Zt(s);return t=new fs({}),{c(){o&&o.c(),e=S(),le(t.$$.fragment),n=S(),i=g("footer"),i.innerHTML='<div class="footer-bar svelte-1krkm0i"></div> <div class="links svelte-1krkm0i"><a class="link svelte-1krkm0i" href="https://github.com/Engollon/shiftswitch/blob/main/README.md">Documentation</a> <a class="link svelte-1krkm0i" href="https://www.val-de-ruz.ch/decouverte/culture-sports-loisirs/piscines">Piscine</a> <a class="link svelte-1krkm0i" href="mailto:Engollon.piscine@gamil.com">Contact</a></div>'},m(r,a){o&&o.m(r,a),O(r,e,a),ee(t,r,a),O(r,n,a),O(r,i,a),l=!0},p(r,[a]){r[0]?o?(o.p(r,a),a&1&&U(o,1)):(o=Zt(r),o.c(),U(o,1),o.m(e.parentNode,e)):o&&(Ke(),G(o,1,1,()=>{o=null}),ze())},i(r){l||(U(o),U(t.$$.fragment,r),l=!0)},o(r){G(o),G(t.$$.fragment,r),l=!1},d(r){r&&(C(e),C(n),C(i)),o&&o.d(r),te(t,r)}}}function Fs(s,e,t){let n,i;M(s,_e,o=>t(0,n=o)),M(s,Be,o=>t(1,i=o));function l(o){i=o,Be.set(i)}return[n,i,l]}class Ms extends ae{constructor(e){super(),re(this,e,Fs,Us,ne,{})}}new Ms({target:document.getElementById("app")});
