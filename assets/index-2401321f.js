var vt=Object.defineProperty;var _t=(i,e,t)=>e in i?vt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var qe=(i,e,t)=>(_t(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();function I(){}function dt(i){return i()}function Ne(){return Object.create(null)}function Z(i){i.forEach(dt)}function ht(i){return typeof i=="function"}function G(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let ye;function x(i,e){return i===e?!0:(ye||(ye=document.createElement("a")),ye.href=e,i===ye.href)}function wt(i){return Object.keys(i).length===0}function yt(i,...e){if(i==null){for(const n of e)n(void 0);return I}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function L(i,e,t){i.$$.on_destroy.push(yt(e,t))}function me(i){return i??""}function h(i,e){i.appendChild(e)}function C(i,e,t){i.insertBefore(e,t||null)}function k(i){i.parentNode&&i.parentNode.removeChild(i)}function ge(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function _(i){return document.createElement(i)}function T(i){return document.createTextNode(i)}function S(){return T(" ")}function ne(){return T("")}function j(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function St(i){return function(e){return e.preventDefault(),i.call(this,e)}}function g(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function kt(i){return Array.from(i.childNodes)}function A(i,e){e=""+e,i.data!==e&&(i.data=e)}function te(i,e){i.value=e??""}function Ct(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,n?"important":"")}let ve;function be(i){ve=i}function Ot(){if(!ve)throw new Error("Function called outside component initialization");return ve}function De(i){Ot().$$.on_mount.push(i)}function Pt(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const he=[],Pe=[];let fe=[];const je=[],Tt=Promise.resolve();let Le=!1;function Et(){Le||(Le=!0,Tt.then(ft))}function Ae(i){fe.push(i)}function Dt(i){je.push(i)}const Ie=new Set;let ue=0;function ft(){if(ue!==0)return;const i=ve;do{try{for(;ue<he.length;){const e=he[ue];ue++,be(e),qt(e.$$)}}catch(e){throw he.length=0,ue=0,e}for(be(null),he.length=0,ue=0;Pe.length;)Pe.pop()();for(let e=0;e<fe.length;e+=1){const t=fe[e];Ie.has(t)||(Ie.add(t),t())}fe.length=0}while(he.length);for(;je.length;)je.pop()();Le=!1,Ie.clear(),be(i)}function qt(i){if(i.fragment!==null){i.update(),Z(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Ae)}}function It(i){const e=[],t=[];fe.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),fe=e}const ke=new Set;let ce;function se(){ce={r:0,c:[],p:ce}}function ie(){ce.r||Z(ce.c),ce=ce.p}function E(i,e){i&&i.i&&(ke.delete(i),i.i(e))}function q(i,e,t,n){if(i&&i.o){if(ke.has(i))return;ke.add(i),ce.c.push(()=>{ke.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function V(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function jt(i,e){q(i,1,1,()=>{e.delete(i.key)})}function Lt(i,e,t,n,s,o,r,l,c,a,d,u){let f=i.length,p=o.length,m=f;const y={};for(;m--;)y[i[m].key]=m;const b=[],v=new Map,w=new Map,O=[];for(m=p;m--;){const P=u(s,o,m),D=t(P);let R=r.get(D);R?n&&O.push(()=>R.p(P,e)):(R=a(D,P),R.c()),v.set(D,b[m]=R),D in y&&w.set(D,Math.abs(m-y[D]))}const $=new Set,U=new Set;function N(P){E(P,1),P.m(l,d),r.set(P.key,P),d=P.first,p--}for(;f&&p;){const P=b[p-1],D=i[f-1],R=P.key,W=D.key;P===D?(d=P.first,f--,p--):v.has(W)?!r.has(R)||$.has(R)?N(P):U.has(W)?f--:w.get(R)>w.get(W)?(U.add(R),N(P)):($.add(W),f--):(c(D,r),f--)}for(;f--;){const P=i[f];v.has(P.key)||c(P,r)}for(;p;)N(b[p-1]);return Z(O),b}function At(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function J(i){i&&i.c()}function z(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),Ae(()=>{const o=i.$$.on_mount.map(dt).filter(ht);i.$$.on_destroy?i.$$.on_destroy.push(...o):Z(o),i.$$.on_mount=[]}),s.forEach(Ae)}function H(i,e){const t=i.$$;t.fragment!==null&&(It(t.after_update),Z(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Rt(i,e){i.$$.dirty[0]===-1&&(he.push(i),Et(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Y(i,e,t,n,s,o,r,l=[-1]){const c=ve;be(i);const a=i.$$={fragment:null,ctx:[],props:o,update:I,not_equal:s,bound:Ne(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Ne(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};r&&r(a.root);let d=!1;if(a.ctx=t?t(i,e.props||{},(u,f,...p)=>{const m=p.length?p[0]:f;return a.ctx&&s(a.ctx[u],a.ctx[u]=m)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](m),d&&Rt(i,u)),f}):[],a.update(),d=!0,Z(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const u=kt(e.target);a.fragment&&a.fragment.l(u),u.forEach(k)}else a.fragment&&a.fragment.c();e.intro&&E(i.$$.fragment),z(i,e.target,e.anchor),ft()}be(c)}class Q{constructor(){qe(this,"$$");qe(this,"$$set")}$destroy(){H(this,1),this.$destroy=I}$on(e,t){if(!ht(t))return I;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!wt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ut="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ut);function B(i,e,t,n){return new(t||(t=Promise))(function(s,o){function r(a){try{c(n.next(a))}catch(d){o(d)}}function l(a){try{c(n.throw(a))}catch(d){o(d)}}function c(a){a.done?s(a.value):function(u){return u instanceof t?u:new t(function(f){f(u)})}(a.value).then(r,l)}c((n=n.apply(i,e||[])).next())})}class ee extends Error{constructor(e){var t,n,s,o;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,ee.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof ee||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((o=(s=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||s===void 0?void 0:s.message)===null||o===void 0)&&o.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const Se=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Nt(i,e){const t={};if(typeof i!="string")return t;const n=Object.assign({},e||{}).decode||$t;let s=0;for(;s<i.length;){const o=i.indexOf("=",s);if(o===-1)break;let r=i.indexOf(";",s);if(r===-1)r=i.length;else if(r<o){s=i.lastIndexOf(";",o-1)+1;continue}const l=i.slice(s,o).trim();if(t[l]===void 0){let c=i.slice(o+1,r).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=n(c)}catch{t[l]=c}}s=r+1}return t}function $e(i,e,t){const n=Object.assign({},t||{}),s=n.encode||Ft;if(!Se.test(i))throw new TypeError("argument name is invalid");const o=s(e);if(o&&!Se.test(o))throw new TypeError("argument val is invalid");let r=i+"="+o;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");r+="; Max-Age="+Math.floor(l)}if(n.domain){if(!Se.test(n.domain))throw new TypeError("option domain is invalid");r+="; Domain="+n.domain}if(n.path){if(!Se.test(n.path))throw new TypeError("option path is invalid");r+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");r+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":r+="; Priority=Low";break;case"medium":r+="; Priority=Medium";break;case"high":r+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return r}function $t(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function Ft(i){return encodeURIComponent(i)}let pt;function Ce(i){if(i)try{const e=decodeURIComponent(pt(i.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Mt(i,e=0){let t=Ce(i);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}pt=typeof atob=="function"?atob:i=>{let e=String(i).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,s=0,o=0,r="";n=e.charAt(o++);~n&&(t=s%4?64*t+n:n,s++%4)?r+=String.fromCharCode(255&t>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return r};const Fe="pb_auth";class Bt{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Mt(this.token)}get isAdmin(){return Ce(this.token).type==="admin"}get isAuthRecord(){return Ce(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Fe){const n=Nt(e||"")[t]||"";let s={};try{s=JSON.parse(n),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.model||null)}exportToCookie(e,t=Fe){var n,s;const o={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},r=Ce(this.token);r!=null&&r.exp?o.expires=new Date(1e3*r.exp):o.expires=new Date("1970-01-01"),e=Object.assign({},o,e);const l={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let c=$e(t,JSON.stringify(l),e);const a=typeof Blob<"u"?new Blob([c]).size:c.length;if(l.model&&a>4096){l.model={id:(n=l==null?void 0:l.model)===null||n===void 0?void 0:n.id,email:(s=l==null?void 0:l.model)===null||s===void 0?void 0:s.email};const d=["collectionId","username","verified"];for(const u in this.model)d.includes(u)&&(l.model[u]=this.model[u]);c=$e(t,JSON.stringify(l),e)}return c}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Kt extends Bt{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class ae{constructor(e){this.client=e}}class zt extends ae{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,s,o,r){return r=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:s,duration:o}},r),this.client.send("/api/settings/apple/generate-client-secret",r)}}class Re extends ae{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(s=>{var o;return s.items=((o=s.items)===null||o===void 0?void 0:o.map(r=>this.decode(r)))||[],s})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var s;if(!(!((s=n==null?void 0:n.items)===null||s===void 0)&&s.length))throw new ee({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(s=>this.decode(s))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],s=o=>B(this,void 0,void 0,function*(){return this.getList(o,e||500,t).then(r=>{const l=r.items;return n=n.concat(l),l.length==r.perPage?s(o+1):n})});return s(1)}}function X(i,e,t,n){const s=n!==void 0;return s||t!==void 0?s?(console.warn(i),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):e=Object.assign(e,t):e}class Ht extends Re{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(s=>{var o,r;return((o=this.client.authStore.model)===null||o===void 0?void 0:o.id)===s.id&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,o;return n&&((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)===e&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,s){let o={method:"POST",body:{identity:e,password:t}};return o=X("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",o,n,s),this.client.send(this.baseCrudPath+"/auth-with-password",o).then(this.authResponse.bind(this))}authRefresh(e,t){let n={method:"POST"};return n=X("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=X("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,o){let r={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return r=X("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",r,s,o),this.client.send(this.baseCrudPath+"/confirm-password-reset",r).then(()=>!0)}}class mt extends ae{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return B(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const s=function(o){const r=o;let l;try{l=JSON.parse(r==null?void 0:r.data)}catch{}t(l||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(s),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,s):yield this.connect(),()=>B(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,s)})})}unsubscribe(e){var t;return B(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return B(this,void 0,void 0,function*(){let n=!1;for(let s in this.subscriptions)if(s.startsWith(e)){n=!0;for(let o of this.subscriptions[s])(t=this.eventSource)===null||t===void 0||t.removeEventListener(s,o);delete this.subscriptions[s]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return B(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let s=!1;for(let o=this.subscriptions[e].length-1;o>=0;o--)this.subscriptions[e][o]===t&&(s=!0,delete this.subscriptions[e][o],this.subscriptions[e].splice(o,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));s&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let s in this.subscriptions)if(!((n=this.subscriptions[s])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return B(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return B(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>B(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new ee(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class Gt extends Re{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return B(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return B(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return B(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(s=>{var o,r,l;return((o=this.client.authStore.model)===null||o===void 0?void 0:o.id)!==(s==null?void 0:s.id)||((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,o,r;return!n||((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)!==e||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,s){let o={method:"POST",body:{identity:e,password:t}};return o=X("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",o,n,s),this.client.send(this.baseCollectionPath+"/auth-with-password",o).then(r=>this.authResponse(r))}authWithOAuth2Code(e,t,n,s,o,r,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:s,createData:o}};return c=X("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,r,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(a=>this.authResponse(a))}authWithOAuth2(...e){return B(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!n)throw new ee(new Error(`Missing or invalid provider "${t.provider}".`));const s=this.client.buildUrl("/api/oauth2-redirect"),o=new mt(this.client);let r=null;function l(){r==null||r.close(),o.unsubscribe()}return t.urlCallback||(r=Me(void 0)),new Promise((c,a)=>B(this,void 0,void 0,function*(){var d;try{yield o.subscribe("@oauth2",m=>B(this,void 0,void 0,function*(){const y=o.clientId;try{if(!m.state||y!==m.state)throw new Error("State parameters don't match.");const b=Object.assign({},t);delete b.provider,delete b.scopes,delete b.createData,delete b.urlCallback;const v=yield this.authWithOAuth2Code(n.name,m.code,n.codeVerifier,s,t.createData,b);c(v)}catch(b){a(new ee(b))}l()}));const u={state:o.clientId};!((d=t.scopes)===null||d===void 0)&&d.length&&(u.scope=t.scopes.join(" "));const f=this._replaceQueryParams(n.authUrl+s,u);yield(t.urlCallback||function(m){r?r.location.href=m:r=Me(m)})(f)}catch(u){l(),a(new ee(u))}}))})}authRefresh(e,t){let n={method:"POST"};return n=X("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(s=>this.authResponse(s))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=X("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,o){let r={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return r=X("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",r,s,o),this.client.send(this.baseCollectionPath+"/confirm-password-reset",r).then(()=>!0)}requestVerification(e,t,n){let s={method:"POST",body:{email:e}};return s=X("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}confirmVerification(e,t,n){let s={method:"POST",body:{token:e}};return s=X("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>!0)}requestEmailChange(e,t,n){let s={method:"POST",body:{newEmail:e}};return s=X("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}confirmEmailChange(e,t,n,s){let o={method:"POST",body:{token:e,password:t}};return o=X("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",o,n,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",o).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,s="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const o={},r=s.split("&");for(const l of r){if(l=="")continue;const c=l.split("=");o[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete o[l]:o[l]=t[l]);s="";for(let l in o)o.hasOwnProperty(l)&&(s!=""&&(s+="&"),s+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(o[l].replace(/%20/g,"+")));return s!=""?n+"?"+s:n}}function Me(i){if(typeof window>"u"||!(window!=null&&window.open))throw new ee(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,s=window.innerHeight;e=e>n?n:e,t=t>s?s:t;let o=n/2-e/2,r=s/2-t/2;return window.open(i,"popup_window","width="+e+",height="+t+",top="+r+",left="+o+",resizable,menubar=no")}class Wt extends Re{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return B(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class Jt extends ae{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class Vt extends ae{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Yt extends ae{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let o=this.client.buildUrl(s.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const r=new URLSearchParams(n);o+=(o.includes("?")?"&":"?")+r}return o}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Qt extends ae{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Xt=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class Zt{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Kt,this.admins=new Ht(this),this.collections=new Wt(this),this.files=new Yt(this),this.logs=new Jt(this),this.settings=new zt(this),this.realtime=new mt(this),this.health=new Vt(this),this.backups=new Qt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Gt(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return B(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(t.query!==void 0){const s=this.serializeQueryParams(t.query);s&&(n+=(n.includes("?")?"&":"?")+s),delete t.query}if(this.beforeSend){const s=Object.assign({},yield this.beforeSend(n,t));s.url!==void 0||s.options!==void 0?(n=s.url||n,t=s.options||t):Object.keys(s).length&&(t=s,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(s=>B(this,void 0,void 0,function*(){let o={};try{o=yield s.json()}catch{}if(this.afterSend&&(o=yield this.afterSend(s,o)),s.status>=400)throw new ee({url:s.url,status:s.status,data:o});return o})).catch(s=>{throw new ee(s)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Xt.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const s=new AbortController;this.cancelControllers[n]=s,t.signal=s.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const s=Array.isArray(e[n])?e[n]:[e[n]];for(let o of s)t.append(n,o)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let s of n)if(typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const s=e[n],o=encodeURIComponent(n);if(Array.isArray(s))for(const r of s)t.push(o+"="+encodeURIComponent(r));else s instanceof Date?t.push(o+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?t.push(o+"="+encodeURIComponent(JSON.stringify(s))):t.push(o+"="+encodeURIComponent(s))}return t.join("&")}}const de=[];function re(i,e=I){let t;const n=new Set;function s(l){if(G(i,l)&&(i=l,t)){const c=!de.length;for(const a of n)a[1](),de.push(a,i);if(c){for(let a=0;a<de.length;a+=2)de[a][0](de[a+1]);de.length=0}}}function o(l){s(l(i))}function r(l,c=I){const a=[l,c];return n.add(a),n.size===1&&(t=e(s,o)||I),l(i),()=>{n.delete(a),n.size===0&&t&&(t(),t=null)}}return{set:s,update:o,subscribe:r}}const F=new Zt("https://shiftswitch.pockethost.io"),oe=re(F.authStore.model);F.authStore.onChange(i=>{console.log("authStore changed",i),oe.set(F.authStore.model)});const _e=re(!1),Te=re(!1),Oe=re(!1),we=re(new Date),pe=re(null),gt=re("v0.1.6"),xt=re({primary:"blue",secondary:"green",accent:"green"});function en(i){let e,t,n,s,o,r,l,c,a,d;return{c(){e=_("div"),t=_("div"),n=T(i[0]),s=S(),o=_("div"),r=_("button"),r.textContent="Oui",l=S(),c=_("button"),c.textContent="Non",g(r,"class","button svelte-qtz83h"),g(c,"class","button svelte-qtz83h"),g(o,"class","group svelte-qtz83h"),g(e,"class","popup svelte-qtz83h")},m(u,f){C(u,e,f),h(e,t),h(t,n),h(e,s),h(e,o),h(o,r),h(o,l),h(o,c),a||(d=[j(r,"click",i[1]),j(c,"click",i[2])],a=!0)},p(u,[f]){f&1&&A(n,u[0])},i:I,o:I,d(u){u&&k(e),a=!1,Z(d)}}}function tn(i,e,t){let{object:n}=e,{text:s}=e,{onClose:o}=e;function r(){o(!0)}function l(){o(!1)}return i.$$set=c=>{"object"in c&&t(3,n=c.object),"text"in c&&t(0,s=c.text),"onClose"in c&&t(4,o=c.onClose)},[s,r,l,n,o]}class bt extends Q{constructor(e){super(),Y(this,e,tn,en,G,{object:3,text:0,onClose:4})}}function nn(i){var U,N;let e,t,n=Ee((N=(U=i[0].expand)==null?void 0:U.employee)==null?void 0:N.username)+"",s,o,r,l,c=new Date(i[0].dateStart).getHours()+"",a,d,u=new Date(i[0].dateEnd).getHours()+"",f,p,m,y,b=i[0].location+"",v,w,O,$;return{c(){e=_("div"),t=_("div"),s=T(n),o=S(),r=_("div"),l=T("("),a=T(c),d=T("h-"),f=T(u),p=T("h)"),m=S(),y=_("div"),v=T(b),g(t,"class","name svelte-zeakoy"),g(r,"class","time svelte-zeakoy"),g(y,"class","loc svelte-zeakoy"),g(e,"class",w=me(i[2]?"shift swap":"shift noswap")+" svelte-zeakoy")},m(P,D){C(P,e,D),h(e,t),h(t,s),h(e,o),h(e,r),h(r,l),h(r,a),h(r,d),h(r,f),h(r,p),h(e,m),h(e,y),h(y,v),O||($=j(e,"click",i[5]),O=!0)},p(P,D){var R,W;D&1&&n!==(n=Ee((W=(R=P[0].expand)==null?void 0:R.employee)==null?void 0:W.username)+"")&&A(s,n),D&1&&c!==(c=new Date(P[0].dateStart).getHours()+"")&&A(a,c),D&1&&u!==(u=new Date(P[0].dateEnd).getHours()+"")&&A(f,u),D&1&&b!==(b=P[0].location+"")&&A(v,b),D&4&&w!==(w=me(P[2]?"shift swap":"shift noswap")+" svelte-zeakoy")&&g(e,"class",w)},d(P){P&&k(e),O=!1,$()}}}function sn(i){var U,N;let e,t,n=Ee((N=(U=i[0].expand)==null?void 0:U.employee)==null?void 0:N.username)+"",s,o,r,l,c=new Date(i[0].dateStart).getHours()+"",a,d,u=new Date(i[0].dateEnd).getHours()+"",f,p,m,y,b=i[0].location+"",v,w,O,$;return{c(){e=_("div"),t=_("div"),s=T(n),o=S(),r=_("div"),l=T("("),a=T(c),d=T("h-"),f=T(u),p=T("h)"),m=S(),y=_("div"),v=T(b),g(t,"class","name svelte-zeakoy"),g(r,"class","time svelte-zeakoy"),g(y,"class","loc svelte-zeakoy"),g(e,"class",w=me(i[2]?"shift swap":"shift")+" svelte-zeakoy")},m(P,D){C(P,e,D),h(e,t),h(t,s),h(e,o),h(e,r),h(r,l),h(r,a),h(r,d),h(r,f),h(r,p),h(e,m),h(e,y),h(y,v),O||($=j(e,"click",i[4]),O=!0)},p(P,D){var R,W;D&1&&n!==(n=Ee((W=(R=P[0].expand)==null?void 0:R.employee)==null?void 0:W.username)+"")&&A(s,n),D&1&&c!==(c=new Date(P[0].dateStart).getHours()+"")&&A(a,c),D&1&&u!==(u=new Date(P[0].dateEnd).getHours()+"")&&A(f,u),D&1&&b!==(b=P[0].location+"")&&A(v,b),D&4&&w!==(w=me(P[2]?"shift swap":"shift")+" svelte-zeakoy")&&g(e,"class",w)},d(P){P&&k(e),O=!1,$()}}}function on(i){let e;function t(o,r){var l,c;return((c=(l=o[0].expand)==null?void 0:l.employee)==null?void 0:c.username)===o[3].username?sn:nn}let n=t(i),s=n(i);return{c(){s.c(),e=ne()},m(o,r){s.m(o,r),C(o,e,r)},p(o,[r]){n===(n=t(o))&&s?s.p(o,r):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},i:I,o:I,d(o){o&&k(e),s.d(o)}}}function Ee(i){return i.charAt(0).toUpperCase()+i.slice(1)}function rn(i,e,t){let n;L(i,oe,a=>t(3,n=a));let{shift:s}=e,{swap:o}=e,r=s.swap;const l=()=>o(s),c=()=>o(s);return i.$$set=a=>{"shift"in a&&t(0,s=a.shift),"swap"in a&&t(1,o=a.swap)},i.$$.update=()=>{i.$$.dirty&1&&t(2,r=s.swap)},[s,o,r,n,l,c]}class ln extends Q{constructor(e){super(),Y(this,e,rn,on,G,{shift:0,swap:1})}}function Be(i,e,t){const n=i.slice();return n[11]=e[t][0],n[0]=e[t][1],n}function Ke(i,e,t){const n=i.slice();return n[14]=e[t],n}function ze(i){let e,t,n,s,o,r;return n=new bt({props:{object:i[4],onClose:i[6],text:"are you sure"}}),{c(){e=_("div"),t=S(),J(n.$$.fragment),g(e,"class","overlay svelte-e8bv0f")},m(l,c){C(l,e,c),C(l,t,c),z(n,l,c),s=!0,o||(r=j(e,"click",i[7]),o=!0)},p(l,c){const a={};c&16&&(a.object=l[4]),n.$set(a)},i(l){s||(E(n.$$.fragment,l),s=!0)},o(l){q(n.$$.fragment,l),s=!1},d(l){l&&(k(e),k(t)),H(n,l),o=!1,r()}}}function He(i){let e,t,n=i[11]+"",s,o,r=[],l=new Map,c,a,d=V(i[0]);const u=f=>f[14].id;for(let f=0;f<d.length;f+=1){let p=Ke(i,d,f),m=u(p);l.set(m,r[f]=We(m,p))}return{c(){e=_("div"),t=_("div"),s=T(n),o=S();for(let f=0;f<r.length;f+=1)r[f].c();c=S(),g(t,"class","date svelte-e8bv0f"),g(e,"class","scroll_day svelte-e8bv0f")},m(f,p){C(f,e,p),h(e,t),h(t,s),h(e,o);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(e,null);h(e,c),a=!0},p(f,p){(!a||p&2)&&n!==(n=f[11]+"")&&A(s,n),p&270&&(d=V(f[0]),se(),r=Lt(r,p,u,1,f,d,l,e,jt,We,c,Ke),ie())},i(f){if(!a){for(let p=0;p<d.length;p+=1)E(r[p]);a=!0}},o(f){for(let p=0;p<r.length;p+=1)q(r[p]);a=!1},d(f){f&&k(e);for(let p=0;p<r.length;p+=1)r[p].d()}}}function Ge(i){let e,t;return e=new ln({props:{shift:i[14],swap:i[8]}}),{c(){J(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p(n,s){const o={};s&2&&(o.shift=n[14]),e.$set(o)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){q(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function We(i,e){var r,l;let t,n,s,o=(e[3]&&((l=(r=e[14].expand)==null?void 0:r.employee)==null?void 0:l.username)==e[2].username||!e[3])&&Ge(e);return{key:i,first:null,c(){t=ne(),o&&o.c(),n=ne(),this.first=t},m(c,a){C(c,t,a),o&&o.m(c,a),C(c,n,a),s=!0},p(c,a){var d,u;e=c,e[3]&&((u=(d=e[14].expand)==null?void 0:d.employee)==null?void 0:u.username)==e[2].username||!e[3]?o?(o.p(e,a),a&14&&E(o,1)):(o=Ge(e),o.c(),E(o,1),o.m(n.parentNode,n)):o&&(se(),q(o,1,1,()=>{o=null}),ie())},i(c){s||(E(o),s=!0)},o(c){q(o),s=!1},d(c){c&&(k(t),k(n)),o&&o.d(c)}}}function Je(i){let e,t,n=i[0].length!=0&&He(i);return{c(){n&&n.c(),e=ne()},m(s,o){n&&n.m(s,o),C(s,e,o),t=!0},p(s,o){s[0].length!=0?n?(n.p(s,o),o&2&&E(n,1)):(n=He(s),n.c(),E(n,1),n.m(e.parentNode,e)):n&&(se(),q(n,1,1,()=>{n=null}),ie())},i(s){t||(E(n),t=!0)},o(s){q(n),t=!1},d(s){s&&k(e),n&&n.d(s)}}}function cn(i){let e,t,n,s=i[5]&&ze(i),o=V(Object.entries(i[1])),r=[];for(let c=0;c<o.length;c+=1)r[c]=Je(Be(i,o,c));const l=c=>q(r[c],1,1,()=>{r[c]=null});return{c(){s&&s.c(),e=S();for(let c=0;c<r.length;c+=1)r[c].c();t=ne()},m(c,a){s&&s.m(c,a),C(c,e,a);for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(c,a);C(c,t,a),n=!0},p(c,[a]){if(c[5]?s?(s.p(c,a),a&32&&E(s,1)):(s=ze(c),s.c(),E(s,1),s.m(e.parentNode,e)):s&&(se(),q(s,1,1,()=>{s=null}),ie()),a&270){o=V(Object.entries(c[1]));let d;for(d=0;d<o.length;d+=1){const u=Be(c,o,d);r[d]?(r[d].p(u,a),E(r[d],1)):(r[d]=Je(u),r[d].c(),E(r[d],1),r[d].m(t.parentNode,t))}for(se(),d=o.length;d<r.length;d+=1)l(d);ie()}},i(c){if(!n){E(s);for(let a=0;a<o.length;a+=1)E(r[a]);n=!0}},o(c){q(s),r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)q(r[a]);n=!1},d(c){c&&(k(e),k(t)),s&&s.d(c),ge(r,c)}}}function an(i,e,t){let n,s,o;L(i,oe,m=>t(2,n=m)),L(i,we,m=>t(9,s=m)),L(i,Te,m=>t(3,o=m));let{shifts:r}=e,l={},c=null,a=!1,d=m=>{var y,b,v,w;m&&(console.log(n.id,(b=(y=c.expand)==null?void 0:y.employee)==null?void 0:b.id),n.id==((w=(v=c.expand)==null?void 0:v.employee)==null?void 0:w.id)?(t(4,c.swap=!c.swap,c),console.log("swap")):(t(4,c.swap=!c.swap,c),t(4,c.employee=n,c),console.log("give"))),t(5,a=!1),u(c),t(4,c=null)};async function u(m){await F.collection("shifts").update(m.id,{swap:m.swap,employee:m.employee})}function f(){t(5,a=!1),t(4,c=null)}function p(m){t(4,c=m),t(5,a=!0)}return i.$$set=m=>{"shifts"in m&&t(0,r=m.shifts)},i.$$.update=()=>{var m,y;if(i.$$.dirty&527){t(1,l={});for(const b of Object.values(r))if((o&&((y=(m=b.expand)==null?void 0:m.employee)==null?void 0:y.username)==n.username||!o)&&new Date(b.dateStart).getMonth()==s.getMonth()){const v=new Date(b.dateStart).getDate();l.hasOwnProperty(v)?l[v].push(b):t(1,l[v]=[b],l)}}},[r,l,n,o,c,a,d,f,p,s]}class un extends Q{constructor(e){super(),Y(this,e,an,cn,G,{shifts:0})}}function dn(i){let e,t,n,s,o,r,l,c,a;return{c(){e=_("nav"),t=_("div"),n=_("div"),s=T(i[0]),o=S(),r=_("img"),c=S(),a=_("div"),a.textContent=`${fn}`,g(n,"class","version svelte-opjbog"),x(r.src,l=hn)||g(r,"src",l),g(r,"alt","Logo"),g(r,"class","svelte-opjbog"),g(t,"class","logo svelte-opjbog"),g(a,"class","nav-text svelte-opjbog"),g(e,"class","navbar svelte-opjbog")},m(d,u){C(d,e,u),h(e,t),h(t,n),h(n,s),h(t,o),h(t,r),h(e,c),h(e,a)},p(d,[u]){u&1&&A(s,d[0])},i:I,o:I,d(d){d&&k(e)}}}let hn="valderuzlogo.png",fn="ShiftSwitch";function pn(i,e,t){let n;return L(i,gt,s=>t(0,n=s)),[n]}class mn extends Q{constructor(e){super(),Y(this,e,pn,dn,G,{})}}function gn(i){let e,t,n,s,o,r,l,c,a,d,u,f,p,m,y,b;return{c(){e=_("div"),t=_("button"),n=_("img"),o=S(),r=_("button"),l=_("img"),a=S(),d=_("button"),u=_("img"),p=S(),m=_("button"),m.innerHTML='<img src="logout.png" class="svelte-g1vv3c"/>',x(n.src,s=i[1]?"grid.png":"scroll.png")||g(n,"src",s),g(n,"class","svelte-g1vv3c"),g(t,"class","toggle-button svelte-g1vv3c"),x(l.src,c=i[0]?"single_user.png":"multi_user.png")||g(l,"src",c),g(l,"class","svelte-g1vv3c"),g(r,"class","toggle-button svelte-g1vv3c"),x(u.src,f=i[2]?i[2]:"nopic.png")||g(u,"src",f),g(u,"class","profilepic svelte-g1vv3c"),g(d,"class","toggle-button svelte-g1vv3c"),g(m,"class","toggle-button svelte-g1vv3c"),g(e,"class","navbar svelte-g1vv3c")},m(v,w){C(v,e,w),h(e,t),h(t,n),h(e,o),h(e,r),h(r,l),h(e,a),h(e,d),h(d,u),h(e,p),h(e,m),y||(b=[j(t,"click",i[3]),j(r,"click",i[4]),j(d,"click",i[5]),j(m,"click",i[6])],y=!0)},p(v,[w]){w&2&&!x(n.src,s=v[1]?"grid.png":"scroll.png")&&g(n,"src",s),w&1&&!x(l.src,c=v[0]?"single_user.png":"multi_user.png")&&g(l,"src",c),w&4&&!x(u.src,f=v[2]?v[2]:"nopic.png")&&g(u,"src",f)},i:I,o:I,d(v){v&&k(e),y=!1,Z(b)}}}function bn(i,e,t){let n,s,o,r;L(i,Oe,u=>t(7,n=u)),L(i,Te,u=>t(0,s=u)),L(i,_e,u=>t(1,o=u)),L(i,pe,u=>t(2,r=u));function l(){n&&Oe.set(!n),_e.set(!o)}function c(){Te.set(!s)}function a(){Oe.set(!n)}function d(){F.authStore.clear()}return[s,o,r,l,c,a,d]}class vn extends Q{constructor(e){super(),Y(this,e,bn,gn,G,{})}}function _n(i){let e,t,n,s,o,r,l=i[0].toLocaleString("fr-CH",{month:"long"})+"",c,a,d=i[0].getFullYear()+"",u,f,p,m,y,b,v;return{c(){e=_("div"),t=_("button"),n=_("img"),o=S(),r=_("div"),c=T(l),a=S(),u=T(d),f=S(),p=_("button"),m=_("img"),x(n.src,s=Ve)||g(n,"src",s),g(n,"alt","Button"),g(n,"class","svelte-co2y0d"),g(t,"class","toggle-button svelte-co2y0d"),g(m,"class","rot svelte-co2y0d"),x(m.src,y=Ve)||g(m,"src",y),g(m,"alt","Button"),g(p,"class","toggle-button svelte-co2y0d"),g(e,"class","layout svelte-co2y0d")},m(w,O){C(w,e,O),h(e,t),h(t,n),h(e,o),h(e,r),h(r,c),h(r,a),h(r,u),h(e,f),h(e,p),h(p,m),b||(v=[j(t,"click",i[3]),j(p,"click",i[4])],b=!0)},p(w,[O]){O&1&&l!==(l=w[0].toLocaleString("fr-CH",{month:"long"})+"")&&A(c,l),O&1&&d!==(d=w[0].getFullYear()+"")&&A(u,d)},i:I,o:I,d(w){w&&k(e),b=!1,Z(v)}}}let Ve="left_arrow.png";function wn(i,e,t){let{renderDate:n}=e;function s(){n.setMonth(n.getMonth()+1),t(0,n)}function o(){n.setMonth(n.getMonth()-1),t(0,n)}const r=()=>o(),l=()=>s();return i.$$set=c=>{"renderDate"in c&&t(0,n=c.renderDate)},[n,s,o,r,l]}class yn extends Q{constructor(e){super(),Y(this,e,wn,_n,G,{renderDate:0})}}function Ye(i,e,t){const n=i.slice();return n[17]=e[t],n}function Qe(i,e,t){const n=i.slice();return n[20]=e[t],n}function Xe(i,e,t){const n=i.slice();return n[17]=e[t],n}function Ze(i){let e,t,n,s,o,r;return n=new bt({props:{object:i[3],onClose:i[5],text:"are you sure"}}),{c(){e=_("div"),t=S(),J(n.$$.fragment),g(e,"class","overlay svelte-ub7g9p")},m(l,c){C(l,e,c),C(l,t,c),z(n,l,c),s=!0,o||(r=j(e,"click",i[6]),o=!0)},p(l,c){const a={};c&8&&(a.object=l[3]),n.$set(a)},i(l){s||(E(n.$$.fragment,l),s=!0)},o(l){q(n.$$.fragment,l),s=!1},d(l){l&&(k(e),k(t)),H(n,l),o=!1,r()}}}function xe(i){let e;return{c(){e=_("div"),e.textContent=`${i[17]}`},m(t,n){C(t,e,n)},p:I,d(t){t&&k(e)}}}function et(i){let e,t=V(i[1][i[17]]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tt(Qe(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ne()},m(s,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,o);C(s,e,o)},p(s,o){if(o&135){t=V(s[1][s[17]]);let r;for(r=0;r<t.length;r+=1){const l=Qe(s,t,r);n[r]?n[r].p(l,o):(n[r]=tt(l),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},d(s){s&&k(e),ge(n,s)}}}function Sn(i){var u,f;let e,t,n=((f=(u=i[20].expand)==null?void 0:u.employee)==null?void 0:f.username)+"",s,o,r,l,c=i[20].location+"",a,d;return{c(){e=_("div"),t=_("div"),s=T(n),o=T(" |"),r=S(),l=_("div"),a=T(c),d=S(),g(t,"class","name svelte-ub7g9p"),g(l,"class","loc svelte-ub7g9p"),g(e,"class","shift noswap svelte-ub7g9p")},m(p,m){C(p,e,m),h(e,t),h(t,s),h(t,o),h(e,r),h(e,l),h(l,a),h(e,d)},p(p,m){var y,b;m&3&&n!==(n=((b=(y=p[20].expand)==null?void 0:y.employee)==null?void 0:b.username)+"")&&A(s,n),m&3&&c!==(c=p[20].location+"")&&A(a,c)},d(p){p&&k(e)}}}function kn(i){var y,b;let e,t,n=((b=(y=i[20].expand)==null?void 0:y.employee)==null?void 0:b.username)+"",s,o,r,l,c=i[20].location+"",a,d,u,f,p;function m(){return i[13](i[20])}return{c(){e=_("div"),t=_("div"),s=T(n),o=T(" |"),r=S(),l=_("div"),a=T(c),d=S(),g(t,"class","name svelte-ub7g9p"),g(l,"class","loc svelte-ub7g9p"),g(e,"class",u=me(i[20].swap?"shift swap":"shift")+" svelte-ub7g9p")},m(v,w){C(v,e,w),h(e,t),h(t,s),h(t,o),h(e,r),h(e,l),h(l,a),h(e,d),f||(p=j(e,"click",m),f=!0)},p(v,w){var O,$;i=v,w&3&&n!==(n=(($=(O=i[20].expand)==null?void 0:O.employee)==null?void 0:$.username)+"")&&A(s,n),w&3&&c!==(c=i[20].location+"")&&A(a,c),w&3&&u!==(u=me(i[20].swap?"shift swap":"shift")+" svelte-ub7g9p")&&g(e,"class",u)},d(v){v&&k(e),f=!1,p()}}}function tt(i){let e;function t(o,r){var l,c;return((c=(l=o[20].expand)==null?void 0:l.employee)==null?void 0:c.username)===o[2].username?kn:Sn}let n=t(i),s=n(i);return{c(){s.c(),e=ne()},m(o,r){s.m(o,r),C(o,e,r)},p(o,r){n===(n=t(o))&&s?s.p(o,r):(s.d(1),s=n(o),s&&(s.c(),s.m(e.parentNode,e)))},d(o){o&&k(e),s.d(o)}}}function nt(i){let e,t,n=new Date(i[17]).getDate()+"",s,o,r,l=i[1][i[17]]&&typeof i[1][i[17]]=="object"&&i[1][i[17]].length>0&&et(i);return{c(){e=_("div"),t=_("div"),s=T(n),o=S(),l&&l.c(),r=S(),g(t,"class","time svelte-ub7g9p"),g(e,"class","calendar-card svelte-ub7g9p")},m(c,a){C(c,e,a),h(e,t),h(t,s),h(e,o),l&&l.m(e,null),h(e,r)},p(c,a){a&1&&n!==(n=new Date(c[17]).getDate()+"")&&A(s,n),c[1][c[17]]&&typeof c[1][c[17]]=="object"&&c[1][c[17]].length>0?l?l.p(c,a):(l=et(c),l.c(),l.m(e,r)):l&&(l.d(1),l=null)},d(c){c&&k(e),l&&l.d()}}}function Cn(i){let e,t,n,s,o,r=i[4]&&Ze(i),l=V(i[8]),c=[];for(let u=0;u<l.length;u+=1)c[u]=xe(Xe(i,l,u));let a=V(i[0]),d=[];for(let u=0;u<a.length;u+=1)d[u]=nt(Ye(i,a,u));return{c(){r&&r.c(),e=S(),t=_("div");for(let u=0;u<c.length;u+=1)c[u].c();n=S(),s=_("div");for(let u=0;u<d.length;u+=1)d[u].c();g(t,"class","weekdays svelte-ub7g9p"),g(s,"class","calendar-grid svelte-ub7g9p")},m(u,f){r&&r.m(u,f),C(u,e,f),C(u,t,f);for(let p=0;p<c.length;p+=1)c[p]&&c[p].m(t,null);C(u,n,f),C(u,s,f);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(s,null);o=!0},p(u,[f]){if(u[4]?r?(r.p(u,f),f&16&&E(r,1)):(r=Ze(u),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(se(),q(r,1,1,()=>{r=null}),ie()),f&256){l=V(u[8]);let p;for(p=0;p<l.length;p+=1){const m=Xe(u,l,p);c[p]?c[p].p(m,f):(c[p]=xe(m),c[p].c(),c[p].m(t,null))}for(;p<c.length;p+=1)c[p].d(1);c.length=l.length}if(f&135){a=V(u[0]);let p;for(p=0;p<a.length;p+=1){const m=Ye(u,a,p);d[p]?d[p].p(m,f):(d[p]=nt(m),d[p].c(),d[p].m(s,null))}for(;p<d.length;p+=1)d[p].d(1);d.length=a.length}},i(u){o||(E(r),o=!0)},o(u){q(r),o=!1},d(u){u&&(k(e),k(t),k(n),k(s)),r&&r.d(u),ge(c,u),ge(d,u)}}}function On(i,e,t){let n,s,o,r;L(i,we,O=>t(11,n=O)),L(i,Te,O=>t(12,s=O)),L(i,oe,O=>t(2,o=O)),L(i,xt,O=>t(14,r=O));let{shifts:l}=e;r.primary;let c,a=[],d={},u=null,f=!1,p=O=>{O&&(t(3,u.swap=!u.swap,u),console.log(u.swap)),t(4,f=!1),m(u),t(3,u=null)};async function m(O){await F.collection("shifts").update(O.id,{swap:O.swap})}function y(){t(4,f=!1),t(3,u=null)}function b(O){t(3,u=O),t(4,f=!0)}let v=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const w=O=>b(O);return i.$$set=O=>{"shifts"in O&&t(9,l=O.shifts)},i.$$.update=()=>{var O,$;if(i.$$.dirty&2049){t(0,a=[]);let U=new Date(n.getFullYear(),n.getMonth());for(;U.getDay()!=2;)U.setDate(U.getDate()-1),a.unshift(new Date(U).toISOString().split("T")[0]);const N=new Date(n.getFullYear(),n.getMonth());for(;N.getMonth()==n.getMonth();)a.push(new Date(N).toISOString().split("T")[0]),N.setDate(N.getDate()+1);a.push(new Date(N).toISOString().split("T")[0])}if(i.$$.dirty&7687){t(10,c=new Date(a[0])),t(1,d={});for(const U of Object.values(l))if((s&&(($=(O=U.expand)==null?void 0:O.employee)==null?void 0:$.username)==o.username||!s)&&c<=new Date(U.dateStart)&&new Date(U.dateStart)<=new Date(n.getFullYear(),n.getMonth()+1,0)){const N=new Date(U.dateStart).toISOString().split("T")[0];d.hasOwnProperty(N)?d[N].push(U):t(1,d[N]=[U],d)}}},[a,d,o,u,f,p,y,b,v,l,c,n,s,w]}class Pn extends Q{constructor(e){super(),Y(this,e,On,Cn,G,{shifts:9})}}function st(i){let e,t,n,s,o,r,l,c,a,d,u,f,p,m,y,b=i[0]&&it(i);return{c(){e=_("div"),t=_("div"),t.innerHTML='<img src="valderuzlogo.png" alt="Logo" class="svelte-1cc1qib"/> <div class="title svelte-1cc1qib">ShiftSwitch</div>',n=S(),s=_("div"),o=T(i[4]),r=S(),l=_("form"),b&&b.c(),c=S(),a=_("input"),d=S(),u=_("input"),f=S(),p=_("button"),p.textContent="Login",g(t,"class","logo svelte-1cc1qib"),g(a,"placeholder","Username"),g(a,"type","text"),g(a,"class","input svelte-1cc1qib"),g(u,"placeholder","Password"),g(u,"type","password"),g(u,"class","input svelte-1cc1qib"),g(p,"class","button svelte-1cc1qib"),g(l,"class","form svelte-1cc1qib"),g(e,"class","container svelte-1cc1qib")},m(v,w){C(v,e,w),h(e,t),h(e,n),h(e,s),h(s,o),h(e,r),h(e,l),b&&b.m(l,null),h(l,c),h(l,a),te(a,i[1]),h(l,d),h(l,u),te(u,i[2]),h(l,f),h(l,p),m||(y=[j(a,"input",i[7]),j(u,"input",i[8]),j(p,"click",i[5]),j(l,"submit",St(i[6]))],m=!0)},p(v,w){w&16&&A(o,v[4]),v[0]?b?b.p(v,w):(b=it(v),b.c(),b.m(l,c)):b&&(b.d(1),b=null),w&2&&a.value!==v[1]&&te(a,v[1]),w&4&&u.value!==v[2]&&te(u,v[2])},d(v){v&&k(e),b&&b.d(),m=!1,Z(y)}}}function it(i){let e,t;return{c(){e=_("div"),t=T(i[0]),g(e,"class","errmsg svelte-1cc1qib")},m(n,s){C(n,e,s),h(e,t)},p(n,s){s&1&&A(t,n[0])},d(n){n&&k(e)}}}function Tn(i){let e,t=!i[3]&&st(i);return{c(){t&&t.c(),e=ne()},m(n,s){t&&t.m(n,s),C(n,e,s)},p(n,[s]){n[3]?t&&(t.d(1),t=null):t?t.p(n,s):(t=st(n),t.c(),t.m(e.parentNode,e))},i:I,o:I,d(n){n&&k(e),t&&t.d(n)}}}function En(i,e,t){let n,s;L(i,oe,f=>t(3,n=f)),L(i,gt,f=>t(4,s=f));let o="",r,l;async function c(){try{await F.collection("users").authWithPassword(r,l);const f=await F.collection("users").getOne(n.id,{});pe.set(F.files.getUrl(f,f.avatar,{thumb:"100x100"}))}catch(f){console.log("signup failed: "+f.message),f.message==="Failed to authenticate."?t(0,o="Invalid username or password. Please try again."):f.message==="NetworkError"?t(0,o="Network error. Please check your internet connection."):t(0,o=f.message)}}function a(f){Pt.call(this,i,f)}function d(){r=this.value,t(1,r)}function u(){l=this.value,t(2,l)}return[o,r,l,n,s,c,a,d,u]}class Dn extends Q{constructor(e){super(),Y(this,e,En,Tn,G,{})}}function qn(i){let e,t,n,s,o,r,l,c,a,d,u,f,p,m,y,b;return{c(){e=_("div"),t=_("div"),t.textContent="Changer le mot de passe:",n=S(),s=_("div"),o=_("input"),r=S(),l=_("input"),c=S(),a=_("input"),d=S(),u=_("div"),f=_("button"),f.textContent="Exit",p=S(),m=_("button"),m.textContent="Change",g(o,"placeholder","Old Password"),g(o,"type","password"),g(o,"class","input"),g(l,"placeholder","Password"),g(l,"type","password"),g(l,"class","input"),g(a,"placeholder","Password Confirmation"),g(a,"type","password"),g(a,"class","input"),g(s,"class","group-flex svelte-hb9kik"),g(f,"class","button svelte-hb9kik"),g(m,"class","button svelte-hb9kik"),g(u,"class","group svelte-hb9kik"),g(e,"class","popup svelte-hb9kik")},m(v,w){C(v,e,w),h(e,t),h(e,n),h(e,s),h(s,o),te(o,i[0]),h(s,r),h(s,l),te(l,i[1]),h(s,c),h(s,a),te(a,i[2]),h(e,d),h(e,u),h(u,f),h(u,p),h(u,m),y||(b=[j(o,"input",i[6]),j(l,"input",i[7]),j(a,"input",i[8]),j(f,"click",i[4]),j(m,"click",i[3])],y=!0)},p(v,[w]){w&1&&o.value!==v[0]&&te(o,v[0]),w&2&&l.value!==v[1]&&te(l,v[1]),w&4&&a.value!==v[2]&&te(a,v[2])},i:I,o:I,d(v){v&&k(e),y=!1,Z(b)}}}function In(i,e,t){let n;L(i,oe,p=>t(9,n=p));let{onClose:s}=e,o,r,l;async function c(){try{const p={password:r,passwordConfirm:l,oldPassword:o},m=await F.collection("users").update(n.id,p);s()}catch{console.log("passwords do not match")}}function a(){s()}function d(){o=this.value,t(0,o)}function u(){r=this.value,t(1,r)}function f(){l=this.value,t(2,l)}return i.$$set=p=>{"onClose"in p&&t(5,s=p.onClose)},[o,r,l,c,a,s,d,u,f]}class jn extends Q{constructor(e){super(),Y(this,e,In,qn,G,{onClose:5})}}function ot(i,e,t){const n=i.slice();return n[6]=e[t],n}function rt(i){let e,t=new Date(i[6]).getDate()+"",n;return{c(){e=_("div"),n=T(t),g(e,"class","day svelte-1o1p8")},m(s,o){C(s,e,o),h(e,n)},p(s,o){o&1&&t!==(t=new Date(s[6]).getDate()+"")&&A(n,t)},d(s){s&&k(e)}}}function Ln(i){let e,t,n=V(i[0]),s=[];for(let o=0;o<n.length;o+=1)s[o]=rt(ot(i,n,o));return{c(){e=_("div"),t=_("div");for(let o=0;o<s.length;o+=1)s[o].c();g(t,"class","calendar-grid svelte-1o1p8")},m(o,r){C(o,e,r),h(e,t);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(o,[r]){if(r&1){n=V(o[0]);let l;for(l=0;l<n.length;l+=1){const c=ot(o,n,l);s[l]?s[l].p(c,r):(s[l]=rt(c),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},i:I,o:I,d(o){o&&k(e),ge(s,o)}}}function An(i,e,t){let n;L(i,we,l=>t(3,n=l));let{text:s}=e,{onClose:o}=e,r=[];return i.$$set=l=>{"text"in l&&t(1,s=l.text),"onClose"in l&&t(2,o=l.onClose)},i.$$.update=()=>{if(i.$$.dirty&9){t(0,r=[]);let l=new Date(n.getFullYear(),n.getMonth());for(;l.getDay()!=2;)l.setDate(l.getDate()-1),r.unshift(new Date(l).toISOString().split("T")[0]);const c=new Date(n.getFullYear(),n.getMonth());for(;c.getMonth()==n.getMonth();)r.push(new Date(c).toISOString().split("T")[0]),c.setDate(c.getDate()+1);r.push(new Date(c).toISOString().split("T")[0])}},[r,s,o,n]}class Rn extends Q{constructor(e){super(),Y(this,e,An,Ln,G,{text:1,onClose:2})}}function lt(i){let e,t,n,s,o,r;return n=new jn({props:{onClose:i[7]}}),{c(){e=_("div"),t=S(),J(n.$$.fragment),g(e,"class","overlay svelte-1hiqrf6")},m(l,c){C(l,e,c),C(l,t,c),z(n,l,c),s=!0,o||(r=j(e,"click",i[7]),o=!0)},p:I,i(l){s||(E(n.$$.fragment,l),s=!0)},o(l){q(n.$$.fragment,l),s=!1},d(l){l&&(k(e),k(t)),H(n,l),o=!1,r()}}}function Un(i){let e,t,n,s,o,r,l,c,a,d,u=i[2].username+"",f,p,m,y,b,v=i[3]?"Grid":"Scroll",w,O,$,U,N,P,D,R,W,Ue,M=i[1]&&lt(i);return D=new Rn({props:{onClose:i[7],text:"heyy"}}),{c(){e=_("div"),t=_("div"),n=_("form"),s=_("img"),r=S(),l=_("input"),c=S(),a=_("div"),d=T("Nom: "),f=T(u),p=S(),m=_("div"),y=T("Preferance d'affichage: "),b=_("button"),w=T(v),O=S(),$=_("button"),$.textContent="Change Password",U=S(),M&&M.c(),N=S(),P=_("div"),J(D.$$.fragment),x(s.src,o=i[4]?i[4]:"nopic.png")||g(s,"src",o),g(s,"alt","Selected Image"),g(s,"class","profilepic svelte-1hiqrf6"),g(l,"type","file"),g(l,"name","avatar"),g(l,"accept",".jpg, .jpeg, .png"),Ct(l,"display","none"),g(n,"enctype","multipart/form-data"),g(b,"class","toggle svelte-1hiqrf6"),g($,"class","flat-button svelte-1hiqrf6"),g(t,"class","settings svelte-1hiqrf6"),g(P,"class","dispo svelte-1hiqrf6"),g(e,"class","card svelte-1hiqrf6")},m(K,le){C(K,e,le),h(e,t),h(t,n),h(n,s),h(n,r),h(n,l),i[10](l),h(t,c),h(t,a),h(a,d),h(a,f),h(t,p),h(t,m),h(m,y),h(m,b),h(b,w),h(t,O),h(t,$),h(t,U),M&&M.m(t,null),h(e,N),h(e,P),z(D,P,null),R=!0,W||(Ue=[j(s,"click",i[9]),j(l,"change",i[6]),j(b,"click",i[5]),j($,"click",i[8])],W=!0)},p(K,[le]){(!R||le&16&&!x(s.src,o=K[4]?K[4]:"nopic.png"))&&g(s,"src",o),(!R||le&4)&&u!==(u=K[2].username+"")&&A(f,u),(!R||le&8)&&v!==(v=K[3]?"Grid":"Scroll")&&A(w,v),K[1]?M?(M.p(K,le),le&2&&E(M,1)):(M=lt(K),M.c(),E(M,1),M.m(t,null)):M&&(se(),q(M,1,1,()=>{M=null}),ie())},i(K){R||(E(M),E(D.$$.fragment,K),R=!0)},o(K){q(M),q(D.$$.fragment,K),R=!1},d(K){K&&k(e),i[10](null),M&&M.d(),H(D),W=!1,Z(Ue)}}}function Nn(i,e,t){let n,s,o;L(i,oe,v=>t(2,n=v)),L(i,_e,v=>t(3,s=v)),L(i,pe,v=>t(4,o=v));async function r(){_e.set(!s);const v={useGrid:!s};await F.collection("users").update(n.id,v)}De(()=>{l()});async function l(){const v=await F.collection("users").getOne(n.id,{});pe.set(F.files.getUrl(v,v.avatar,{thumb:"100x250"}))}let c,a,d=new FormData;async function u(v){c=v.target.files[0],d.set("avatar",c),pe.set(URL.createObjectURL(c)),await F.collection("users").update(n.id,{avatar:c})}let f=!1,p=()=>{t(1,f=!1)},m=()=>{t(1,f=!0)};const y=()=>a.click();function b(v){Pe[v?"unshift":"push"](()=>{a=v,t(0,a)})}return[a,f,n,s,o,r,u,p,m,y,b]}class $n extends Q{constructor(e){super(),Y(this,e,Nn,Un,G,{})}}function Fn(i){let e,t;return e=new $n({}),{c(){J(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p:I,i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){q(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function Mn(i){let e,t;return e=new un({props:{shifts:i[0]}}),{c(){J(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.shifts=n[0]),e.$set(o)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){q(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function Bn(i){let e,t;return e=new Pn({props:{shifts:i[0]}}),{c(){J(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p(n,s){const o={};s&1&&(o.shifts=n[0]),e.$set(o)},i(n){t||(E(e.$$.fragment,n),t=!0)},o(n){q(e.$$.fragment,n),t=!1},d(n){H(e,n)}}}function Kn(i){let e,t,n,s;const o=[Bn,Mn,Fn],r=[];function l(c,a){return c[1]&&!c[2]?0:!c[1]&&!c[2]?1:2}return e=l(i),t=r[e]=o[e](i),{c(){t.c(),n=ne()},m(c,a){r[e].m(c,a),C(c,n,a),s=!0},p(c,[a]){let d=e;e=l(c),e===d?r[e].p(c,a):(se(),q(r[d],1,1,()=>{r[d]=null}),ie(),t=r[e],t?t.p(c,a):(t=r[e]=o[e](c),t.c()),E(t,1),t.m(n.parentNode,n))},i(c){s||(E(t),s=!0)},o(c){q(t),s=!1},d(c){c&&k(n),r[e].d(c)}}}function zn(i,e,t){let n,s;L(i,_e,r=>t(1,n=r)),L(i,Oe,r=>t(2,s=r));let o=[];return De(async()=>{const r=await F.collection("shifts").getList(1,50,{sort:"dateStart",expand:"employee"});t(0,o=r.items)}),[o,n,s]}class Hn extends Q{constructor(e){super(),Y(this,e,zn,Kn,G,{})}}function ct(i,e,t){const n=i.slice();return n[2]=e[t],n}function at(i){var a,d;let e,t,n=((d=(a=i[2].expand)==null?void 0:a.employee)==null?void 0:d.username)+"",s,o,r=new Date(i[2].dateStart).toLocaleString("default")+"",l,c;return{c(){e=_("div"),t=T("De dieu! "),s=T(n),o=T(" a besoin de toi! Peut-tu prendre son horaire le "),l=T(r),c=T(" ?"),g(e,"class","swap_notification svelte-1lst7vx")},m(u,f){C(u,e,f),h(e,t),h(e,s),h(e,o),h(e,l),h(e,c)},p(u,f){var p,m;f&1&&n!==(n=((m=(p=u[2].expand)==null?void 0:p.employee)==null?void 0:m.username)+"")&&A(s,n),f&1&&r!==(r=new Date(u[2].dateStart).toLocaleString("default")+"")&&A(l,r)},d(u){u&&k(e)}}}function Gn(i){let e,t=V(i[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=at(ct(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ne()},m(s,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,o);C(s,e,o)},p(s,[o]){if(o&1){t=V(s[0]);let r;for(r=0;r<t.length;r+=1){const l=ct(s,t,r);n[r]?n[r].p(l,o):(n[r]=at(l),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=t.length}},i:I,o:I,d(s){s&&k(e),ge(n,s)}}}function Wn(i,e,t){let n;L(i,oe,o=>t(1,n=o));let s=[];return F.autoCancellation(!1),De(async()=>{const o=await F.collection("shifts").getList(1,20,{sort:"dateStart",expand:"employee",filter:`swap = true && employee!="${n.id}" && dateStart >= "${new Date().toISOString()}"`});t(0,s=o.items)}),[s]}class Jn extends Q{constructor(e){super(),Y(this,e,Wn,Gn,G,{})}}function ut(i){let e,t,n,s,o,r,l,c,a,d,u,f,p;t=new mn({});function m(b){i[2](b)}let y={};return i[1]!==void 0&&(y.renderDate=i[1]),s=new yn({props:y}),Pe.push(()=>At(s,"renderDate",m)),l=new vn({}),d=new Jn({}),f=new Hn({}),{c(){e=_("div"),J(t.$$.fragment),n=S(),J(s.$$.fragment),r=S(),J(l.$$.fragment),c=S(),a=_("div"),J(d.$$.fragment),u=S(),J(f.$$.fragment),g(e,"class","navbar svelte-1krkm0i"),g(a,"class","content svelte-1krkm0i")},m(b,v){C(b,e,v),z(t,e,null),h(e,n),z(s,e,null),h(e,r),z(l,e,null),C(b,c,v),C(b,a,v),z(d,a,null),h(a,u),z(f,a,null),p=!0},p(b,v){const w={};!o&&v&2&&(o=!0,w.renderDate=b[1],Dt(()=>o=!1)),s.$set(w)},i(b){p||(E(t.$$.fragment,b),E(s.$$.fragment,b),E(l.$$.fragment,b),E(d.$$.fragment,b),E(f.$$.fragment,b),p=!0)},o(b){q(t.$$.fragment,b),q(s.$$.fragment,b),q(l.$$.fragment,b),q(d.$$.fragment,b),q(f.$$.fragment,b),p=!1},d(b){b&&(k(e),k(c),k(a)),H(t),H(s),H(l),H(d),H(f)}}}function Vn(i){let e,t,n,s,o,r=i[0]&&ut(i);return t=new Dn({}),{c(){r&&r.c(),e=S(),J(t.$$.fragment),n=S(),s=_("footer"),s.innerHTML='<div class="footer-bar svelte-1krkm0i"></div> <div class="links svelte-1krkm0i"><a class="link svelte-1krkm0i" href="https://github.com/Engollon/shiftswitch/blob/main/README.md">Documentation</a> <a class="link svelte-1krkm0i" href="https://www.val-de-ruz.ch/decouverte/culture-sports-loisirs/piscines">Piscine</a> <a class="link svelte-1krkm0i" href="mailto:Engollon.piscine@gamil.com">Contact</a></div>'},m(l,c){r&&r.m(l,c),C(l,e,c),z(t,l,c),C(l,n,c),C(l,s,c),o=!0},p(l,[c]){l[0]?r?(r.p(l,c),c&1&&E(r,1)):(r=ut(l),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(se(),q(r,1,1,()=>{r=null}),ie())},i(l){o||(E(r),E(t.$$.fragment,l),o=!0)},o(l){q(r),q(t.$$.fragment,l),o=!1},d(l){l&&(k(e),k(n),k(s)),r&&r.d(l),H(t,l)}}}function Yn(i,e,t){let n,s,o;L(i,pe,c=>t(3,n=c)),L(i,oe,c=>t(0,s=c)),L(i,we,c=>t(1,o=c)),De(()=>{r()});async function r(){if(s){const c=await F.collection("users").getOne(s.id,{});c&&n.set(F.files.getUrl(c,c.avatar,{thumb:"100x250"}))}}function l(c){o=c,we.set(o)}return[s,o,l]}class Qn extends Q{constructor(e){super(),Y(this,e,Yn,Vn,G,{})}}new Qn({target:document.getElementById("app")});
