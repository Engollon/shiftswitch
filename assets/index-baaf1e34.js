var gt=Object.defineProperty;var bt=(i,e,t)=>e in i?gt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var je=(i,e,t)=>(bt(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function L(){}function at(i){return i()}function $e(){return Object.create(null)}function J(i){i.forEach(at)}function ut(i){return typeof i=="function"}function Y(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let _e;function ee(i,e){return i===e?!0:(_e||(_e=document.createElement("a")),_e.href=e,i===_e.href)}function vt(i){return Object.keys(i).length===0}function _t(i,...e){if(i==null){for(const n of e)n(void 0);return L}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function R(i,e,t){i.$$.on_destroy.push(_t(e,t))}function h(i,e){i.appendChild(e)}function S(i,e,t){i.insertBefore(e,t||null)}function w(i){i.parentNode&&i.parentNode.removeChild(i)}function pe(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function v(i){return document.createElement(i)}function P(i){return document.createTextNode(i)}function C(){return P(" ")}function ne(){return P("")}function E(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function yt(i){return function(e){return e.preventDefault(),i.call(this,e)}}function m(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function wt(i){return Array.from(i.childNodes)}function I(i,e){e=""+e,i.data!==e&&(i.data=e)}function H(i,e){i.value=e??""}function St(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,n?"important":"")}let me;function fe(i){me=i}function kt(){if(!me)throw new Error("Function called outside component initialization");return me}function Ee(i){kt().$$.on_mount.push(i)}function Ct(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const ue=[],Ce=[];let de=[];const De=[],Ot=Promise.resolve();let Le=!1;function Pt(){Le||(Le=!0,Ot.then(dt))}function Ae(i){de.push(i)}function Tt(i){De.push(i)}const Ie=new Set;let ce=0;function dt(){if(ce!==0)return;const i=me;do{try{for(;ce<ue.length;){const e=ue[ce];ce++,fe(e),Et(e.$$)}}catch(e){throw ue.length=0,ce=0,e}for(fe(null),ue.length=0,ce=0;Ce.length;)Ce.pop()();for(let e=0;e<de.length;e+=1){const t=de[e];Ie.has(t)||(Ie.add(t),t())}de.length=0}while(ue.length);for(;De.length;)De.pop()();Le=!1,Ie.clear(),fe(i)}function Et(i){if(i.fragment!==null){i.update(),J(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Ae)}}function qt(i){const e=[],t=[];de.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),de=e}const we=new Set;let oe;function be(){oe={r:0,c:[],p:oe}}function ve(){oe.r||J(oe.c),oe=oe.p}function j(i,e){i&&i.i&&(we.delete(i),i.i(e))}function U(i,e,t,n){if(i&&i.o){if(we.has(i))return;we.add(i),oe.c.push(()=>{we.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function X(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function jt(i,e){i.d(1),e.delete(i.key)}function It(i,e,t,n,s,r,o,l,c,a,f,u){let p=i.length,d=r.length,b=p;const y={};for(;b--;)y[i[b].key]=b;const g=[],_=new Map,k=new Map,O=[];for(b=d;b--;){const T=u(s,r,b),q=t(T);let N=o.get(q);N?n&&O.push(()=>N.p(T,e)):(N=a(q,T),N.c()),_.set(q,g[b]=N),q in y&&k.set(q,Math.abs(b-y[q]))}const D=new Set,$=new Set;function K(T){j(T,1),T.m(l,f),o.set(T.key,T),f=T.first,d--}for(;p&&d;){const T=g[d-1],q=i[p-1],N=T.key,F=q.key;T===q?(f=T.first,p--,d--):_.has(F)?!o.has(N)||D.has(N)?K(T):$.has(F)?p--:k.get(N)>k.get(F)?($.add(N),K(T)):(D.add(F),p--):(c(q,o),p--)}for(;p--;){const T=i[p];_.has(T.key)||c(T,o)}for(;d;)K(g[d-1]);return J(O),g}function Dt(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function Q(i){i&&i.c()}function z(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),Ae(()=>{const r=i.$$.on_mount.map(at).filter(ut);i.$$.on_destroy?i.$$.on_destroy.push(...r):J(r),i.$$.on_mount=[]}),s.forEach(Ae)}function V(i,e){const t=i.$$;t.fragment!==null&&(qt(t.after_update),J(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Lt(i,e){i.$$.dirty[0]===-1&&(ue.push(i),Pt(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Z(i,e,t,n,s,r,o,l=[-1]){const c=me;fe(i);const a=i.$$={fragment:null,ctx:[],props:r,update:L,not_equal:s,bound:$e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:$e(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let f=!1;if(a.ctx=t?t(i,e.props||{},(u,p,...d)=>{const b=d.length?d[0]:p;return a.ctx&&s(a.ctx[u],a.ctx[u]=b)&&(!a.skip_bound&&a.bound[u]&&a.bound[u](b),f&&Lt(i,u)),p}):[],a.update(),f=!0,J(a.before_update),a.fragment=n?n(a.ctx):!1,e.target){if(e.hydrate){const u=wt(e.target);a.fragment&&a.fragment.l(u),u.forEach(w)}else a.fragment&&a.fragment.c();e.intro&&j(i.$$.fragment),z(i,e.target,e.anchor),dt()}fe(c)}class x{constructor(){je(this,"$$");je(this,"$$set")}$destroy(){V(this,1),this.$destroy=L}$on(e,t){if(!ut(t))return L;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!vt(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const At="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(At);function B(i,e,t,n){return new(t||(t=Promise))(function(s,r){function o(a){try{c(n.next(a))}catch(f){r(f)}}function l(a){try{c(n.throw(a))}catch(f){r(f)}}function c(a){a.done?s(a.value):function(u){return u instanceof t?u:new t(function(p){p(u)})}(a.value).then(o,l)}c((n=n.apply(i,e||[])).next())})}class te extends Error{constructor(e){var t,n,s,r;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,te.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof te||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((r=(s=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||s===void 0?void 0:s.message)===null||r===void 0)&&r.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const ye=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Rt(i,e){const t={};if(typeof i!="string")return t;const n=Object.assign({},e||{}).decode||Ut;let s=0;for(;s<i.length;){const r=i.indexOf("=",s);if(r===-1)break;let o=i.indexOf(";",s);if(o===-1)o=i.length;else if(o<r){s=i.lastIndexOf(";",r-1)+1;continue}const l=i.slice(s,r).trim();if(t[l]===void 0){let c=i.slice(r+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=n(c)}catch{t[l]=c}}s=o+1}return t}function Ne(i,e,t){const n=Object.assign({},t||{}),s=n.encode||$t;if(!ye.test(i))throw new TypeError("argument name is invalid");const r=s(e);if(r&&!ye.test(r))throw new TypeError("argument val is invalid");let o=i+"="+r;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(n.domain){if(!ye.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!ye.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function Ut(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function $t(i){return encodeURIComponent(i)}let ht;function Se(i){if(i)try{const e=decodeURIComponent(ht(i.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Nt(i,e=0){let t=Se(i);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}ht=typeof atob=="function"?atob:i=>{let e=String(i).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,s=0,r=0,o="";n=e.charAt(r++);~n&&(t=s%4?64*t+n:n,s++%4)?o+=String.fromCharCode(255&t>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const Fe="pb_auth";class Ft{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Nt(this.token)}get isAdmin(){return Se(this.token).type==="admin"}get isAuthRecord(){return Se(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Fe){const n=Rt(e||"")[t]||"";let s={};try{s=JSON.parse(n),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.model||null)}exportToCookie(e,t=Fe){var n,s;const r={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},o=Se(this.token);o!=null&&o.exp?r.expires=new Date(1e3*o.exp):r.expires=new Date("1970-01-01"),e=Object.assign({},r,e);const l={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let c=Ne(t,JSON.stringify(l),e);const a=typeof Blob<"u"?new Blob([c]).size:c.length;if(l.model&&a>4096){l.model={id:(n=l==null?void 0:l.model)===null||n===void 0?void 0:n.id,email:(s=l==null?void 0:l.model)===null||s===void 0?void 0:s.email};const f=["collectionId","username","verified"];for(const u in this.model)f.includes(u)&&(l.model[u]=this.model[u]);c=Ne(t,JSON.stringify(l),e)}return c}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Mt extends Ft{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class re{constructor(e){this.client=e}}class Bt extends re{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,s,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:s,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class Re extends re{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(s=>{var r;return s.items=((r=s.items)===null||r===void 0?void 0:r.map(o=>this.decode(o)))||[],s})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var s;if(!(!((s=n==null?void 0:n.items)===null||s===void 0)&&s.length))throw new te({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(s=>this.decode(s))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],s=r=>B(this,void 0,void 0,function*(){return this.getList(r,e||500,t).then(o=>{const l=o.items;return n=n.concat(l),l.length==o.perPage?s(r+1):n})});return s(1)}}function W(i,e,t,n){const s=n!==void 0;return s||t!==void 0?s?(console.warn(i),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):e=Object.assign(e,t):e}class Kt extends Re{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(s=>{var r,o;return((r=this.client.authStore.model)===null||r===void 0?void 0:r.id)===s.id&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,r;return n&&((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)===e&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,s){let r={method:"POST",body:{identity:e,password:t}};return r=W("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",r,n,s),this.client.send(this.baseCrudPath+"/auth-with-password",r).then(this.authResponse.bind(this))}authRefresh(e,t){let n={method:"POST"};return n=W("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=W("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=W("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,s,r),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class ft extends re{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return B(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const s=function(r){const o=r;let l;try{l=JSON.parse(o==null?void 0:o.data)}catch{}t(l||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(s),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,s):yield this.connect(),()=>B(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,s)})})}unsubscribe(e){var t;return B(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return B(this,void 0,void 0,function*(){let n=!1;for(let s in this.subscriptions)if(s.startsWith(e)){n=!0;for(let r of this.subscriptions[s])(t=this.eventSource)===null||t===void 0||t.removeEventListener(s,r);delete this.subscriptions[s]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return B(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let s=!1;for(let r=this.subscriptions[e].length-1;r>=0;r--)this.subscriptions[e][r]===t&&(s=!0,delete this.subscriptions[e][r],this.subscriptions[e].splice(r,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));s&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let s in this.subscriptions)if(!((n=this.subscriptions[s])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return B(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return B(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>B(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new te(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class Ht extends Re{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return B(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return B(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return B(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(s=>{var r,o,l;return((r=this.client.authStore.model)===null||r===void 0?void 0:r.id)!==(s==null?void 0:s.id)||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,r,o;return!n||((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)!==e||((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,s){let r={method:"POST",body:{identity:e,password:t}};return r=W("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",r,n,s),this.client.send(this.baseCollectionPath+"/auth-with-password",r).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,s,r,o,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:s,createData:r}};return c=W("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",c,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(a=>this.authResponse(a))}authWithOAuth2(...e){return B(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(c=>c.name===t.provider);if(!n)throw new te(new Error(`Missing or invalid provider "${t.provider}".`));const s=this.client.buildUrl("/api/oauth2-redirect"),r=new ft(this.client);let o=null;function l(){o==null||o.close(),r.unsubscribe()}return t.urlCallback||(o=Me(void 0)),new Promise((c,a)=>B(this,void 0,void 0,function*(){var f;try{yield r.subscribe("@oauth2",b=>B(this,void 0,void 0,function*(){const y=r.clientId;try{if(!b.state||y!==b.state)throw new Error("State parameters don't match.");const g=Object.assign({},t);delete g.provider,delete g.scopes,delete g.createData,delete g.urlCallback;const _=yield this.authWithOAuth2Code(n.name,b.code,n.codeVerifier,s,t.createData,g);c(_)}catch(g){a(new te(g))}l()}));const u={state:r.clientId};!((f=t.scopes)===null||f===void 0)&&f.length&&(u.scope=t.scopes.join(" "));const p=this._replaceQueryParams(n.authUrl+s,u);yield(t.urlCallback||function(b){o?o.location.href=b:o=Me(b)})(p)}catch(u){l(),a(new te(u))}}))})}authRefresh(e,t){let n={method:"POST"};return n=W("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(s=>this.authResponse(s))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=W("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=W("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,s,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let s={method:"POST",body:{email:e}};return s=W("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}confirmVerification(e,t,n){let s={method:"POST",body:{token:e}};return s=W("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>!0)}requestEmailChange(e,t,n){let s={method:"POST",body:{newEmail:e}};return s=W("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}confirmEmailChange(e,t,n,s){let r={method:"POST",body:{token:e,password:t}};return r=W("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,s="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const r={},o=s.split("&");for(const l of o){if(l=="")continue;const c=l.split("=");r[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete r[l]:r[l]=t[l]);s="";for(let l in r)r.hasOwnProperty(l)&&(s!=""&&(s+="&"),s+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(r[l].replace(/%20/g,"+")));return s!=""?n+"?"+s:n}}function Me(i){if(typeof window>"u"||!(window!=null&&window.open))throw new te(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,s=window.innerHeight;e=e>n?n:e,t=t>s?s:t;let r=n/2-e/2,o=s/2-t/2;return window.open(i,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class Gt extends Re{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return B(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class Wt extends re{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class zt extends re{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Vt extends re{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let r=this.client.buildUrl(s.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+o}return r}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class Jt extends re{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const Yt=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class Qt{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Mt,this.admins=new Kt(this),this.collections=new Gt(this),this.files=new Vt(this),this.logs=new Wt(this),this.settings=new Bt(this),this.realtime=new ft(this),this.health=new zt(this),this.backups=new Jt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Ht(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return B(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(t.query!==void 0){const s=this.serializeQueryParams(t.query);s&&(n+=(n.includes("?")?"&":"?")+s),delete t.query}if(this.beforeSend){const s=Object.assign({},yield this.beforeSend(n,t));s.url!==void 0||s.options!==void 0?(n=s.url||n,t=s.options||t):Object.keys(s).length&&(t=s,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(s=>B(this,void 0,void 0,function*(){let r={};try{r=yield s.json()}catch{}if(this.afterSend&&(r=yield this.afterSend(s,r)),s.status>=400)throw new te({url:s.url,status:s.status,data:r});return r})).catch(s=>{throw new te(s)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)Yt.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const s=new AbortController;this.cancelControllers[n]=s,t.signal=s.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const s=Array.isArray(e[n])?e[n]:[e[n]];for(let r of s)t.append(n,r)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let s of n)if(typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const s=e[n],r=encodeURIComponent(n);if(Array.isArray(s))for(const o of s)t.push(r+"="+encodeURIComponent(o));else s instanceof Date?t.push(r+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(s))):t.push(r+"="+encodeURIComponent(s))}return t.join("&")}}const ae=[];function le(i,e=L){let t;const n=new Set;function s(l){if(Y(i,l)&&(i=l,t)){const c=!ae.length;for(const a of n)a[1](),ae.push(a,i);if(c){for(let a=0;a<ae.length;a+=2)ae[a][0](ae[a+1]);ae.length=0}}}function r(l){s(l(i))}function o(l,c=L){const a=[l,c];return n.add(a),n.size===1&&(t=e(s,r)||L),l(i),()=>{n.delete(a),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}const A=new Qt("https://shiftswitch.pockethost.io"),ie=le(A.authStore.model);A.authStore.onChange(i=>{console.log("authStore changed",i),ie.set(A.authStore.model)});const ge=le(!1),Oe=le(!1),ke=le(!1),Pe=le(new Date),he=le(null),pt=le("v0.1.5");function Xt(i){var $,K;let e,t,n,s,r,o,l=new Date(i[0].dateStart).toLocaleDateString("en-US")+"",c,a,f,u,p=((K=($=i[0].expand)==null?void 0:$.employee)==null?void 0:K.username)+"",d,b,y,g,_,k,O,D;return{c(){e=v("div"),t=v("div"),t.textContent="Est tu sûr de voulir remplacer cet horaire?",n=C(),s=v("div"),r=v("div"),o=P("Date: "),c=P(l),a=C(),f=v("div"),u=P("Nom: "),d=P(p),b=C(),y=v("div"),g=v("button"),g.textContent="Oui",_=C(),k=v("button"),k.textContent="Non",m(s,"class","group svelte-qtz83h"),m(g,"class","button svelte-qtz83h"),m(k,"class","button svelte-qtz83h"),m(y,"class","group svelte-qtz83h"),m(e,"class","popup svelte-qtz83h")},m(T,q){S(T,e,q),h(e,t),h(e,n),h(e,s),h(s,r),h(r,o),h(r,c),h(s,a),h(s,f),h(f,u),h(f,d),h(e,b),h(e,y),h(y,g),h(y,_),h(y,k),O||(D=[E(g,"click",i[1]),E(k,"click",i[2])],O=!0)},p(T,[q]){var N,F;q&1&&l!==(l=new Date(T[0].dateStart).toLocaleDateString("en-US")+"")&&I(c,l),q&1&&p!==(p=((F=(N=T[0].expand)==null?void 0:N.employee)==null?void 0:F.username)+"")&&I(d,p)},i:L,o:L,d(T){T&&w(e),O=!1,J(D)}}}function Zt(i,e,t){let{shift:n}=e,{onClose:s}=e;async function r(){await A.collection("shifts").update(n.id,{swap:!0}),s()}function o(){s()}return i.$$set=l=>{"shift"in l&&t(0,n=l.shift),"onClose"in l&&t(3,s=l.onClose)},[n,r,o,s]}class mt extends x{constructor(e){super(),Z(this,e,Zt,Xt,Y,{shift:0,onClose:3})}}function Be(i,e,t){const n=i.slice();return n[10]=e[t][0],n[0]=e[t][1],n}function Ke(i,e,t){const n=i.slice();return n[13]=e[t],n}function He(i){let e,t,n,s,r,o;return n=new mt({props:{shift:i[4],onClose:i[6]}}),{c(){e=v("div"),t=C(),Q(n.$$.fragment),m(e,"class","overlay svelte-db93qx")},m(l,c){S(l,e,c),S(l,t,c),z(n,l,c),s=!0,r||(o=E(e,"click",i[6]),r=!0)},p(l,c){const a={};c&16&&(a.shift=l[4]),n.$set(a)},i(l){s||(j(n.$$.fragment,l),s=!0)},o(l){U(n.$$.fragment,l),s=!1},d(l){l&&(w(e),w(t)),V(n,l),r=!1,o()}}}function Ge(i){let e,t,n=i[10]+"",s,r,o=[],l=new Map,c,a=X(i[0]);const f=u=>u[13].id;for(let u=0;u<a.length;u+=1){let p=Ke(i,a,u),d=f(p);l.set(d,o[u]=ze(d,p))}return{c(){e=v("div"),t=v("div"),s=P(n),r=C();for(let u=0;u<o.length;u+=1)o[u].c();c=C(),m(t,"class","date svelte-db93qx"),m(e,"class","scroll_day svelte-db93qx")},m(u,p){S(u,e,p),h(e,t),h(t,s),h(e,r);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(e,null);h(e,c)},p(u,p){p&2&&n!==(n=u[10]+"")&&I(s,n),p&142&&(a=X(u[0]),o=It(o,p,f,1,u,a,l,e,jt,ze,c,Ke))},d(u){u&&w(e);for(let p=0;p<o.length;p+=1)o[p].d()}}}function We(i){let e;function t(r,o){var l,c;return((c=(l=r[13].expand)==null?void 0:l.employee)==null?void 0:c.username)===r[3].username?en:xt}let n=t(i),s=n(i);return{c(){s.c(),e=ne()},m(r,o){s.m(r,o),S(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&w(e),s.d(r)}}}function xt(i){var k,O;let e,t,n=Te((O=(k=i[13].expand)==null?void 0:k.employee)==null?void 0:O.username)+"",s,r,o,l,c=new Date(i[13].dateStart).getHours()+"",a,f,u=new Date(i[13].dateEnd).getHours()+"",p,d,b,y,g=i[13].location+"",_;return{c(){e=v("div"),t=v("div"),s=P(n),r=C(),o=v("div"),l=P("("),a=P(c),f=P("h-"),p=P(u),d=P("h)"),b=C(),y=v("div"),_=P(g),m(t,"class","name svelte-db93qx"),m(o,"class","time svelte-db93qx"),m(y,"class","loc svelte-db93qx"),m(e,"class","shift noswap svelte-db93qx")},m(D,$){S(D,e,$),h(e,t),h(t,s),h(e,r),h(e,o),h(o,l),h(o,a),h(o,f),h(o,p),h(o,d),h(e,b),h(e,y),h(y,_)},p(D,$){var K,T;$&2&&n!==(n=Te((T=(K=D[13].expand)==null?void 0:K.employee)==null?void 0:T.username)+"")&&I(s,n),$&2&&c!==(c=new Date(D[13].dateStart).getHours()+"")&&I(a,c),$&2&&u!==(u=new Date(D[13].dateEnd).getHours()+"")&&I(p,u),$&2&&g!==(g=D[13].location+"")&&I(_,g)},d(D){D&&w(e)}}}function en(i){var $,K;let e,t,n=Te((K=($=i[13].expand)==null?void 0:$.employee)==null?void 0:K.username)+"",s,r,o,l,c=new Date(i[13].dateStart).getHours()+"",a,f,u=new Date(i[13].dateEnd).getHours()+"",p,d,b,y,g=i[13].location+"",_,k,O;function D(){return i[9](i[13])}return{c(){e=v("div"),t=v("div"),s=P(n),r=C(),o=v("div"),l=P("("),a=P(c),f=P("h-"),p=P(u),d=P("h)"),b=C(),y=v("div"),_=P(g),m(t,"class","name svelte-db93qx"),m(o,"class","time svelte-db93qx"),m(y,"class","loc svelte-db93qx"),m(e,"class","shift svelte-db93qx")},m(T,q){S(T,e,q),h(e,t),h(t,s),h(e,r),h(e,o),h(o,l),h(o,a),h(o,f),h(o,p),h(o,d),h(e,b),h(e,y),h(y,_),k||(O=E(e,"click",D),k=!0)},p(T,q){var N,F;i=T,q&2&&n!==(n=Te((F=(N=i[13].expand)==null?void 0:N.employee)==null?void 0:F.username)+"")&&I(s,n),q&2&&c!==(c=new Date(i[13].dateStart).getHours()+"")&&I(a,c),q&2&&u!==(u=new Date(i[13].dateEnd).getHours()+"")&&I(p,u),q&2&&g!==(g=i[13].location+"")&&I(_,g)},d(T){T&&w(e),k=!1,O()}}}function ze(i,e){var r,o;let t,n,s=(e[2]&&((o=(r=e[13].expand)==null?void 0:r.employee)==null?void 0:o.username)==e[3].username||!e[2])&&We(e);return{key:i,first:null,c(){t=ne(),s&&s.c(),n=ne(),this.first=t},m(l,c){S(l,t,c),s&&s.m(l,c),S(l,n,c)},p(l,c){var a,f;e=l,e[2]&&((f=(a=e[13].expand)==null?void 0:a.employee)==null?void 0:f.username)==e[3].username||!e[2]?s?s.p(e,c):(s=We(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(l){l&&(w(t),w(n)),s&&s.d(l)}}}function Ve(i){let e,t=i[0].length!=0&&Ge(i);return{c(){t&&t.c(),e=ne()},m(n,s){t&&t.m(n,s),S(n,e,s)},p(n,s){n[0].length!=0?t?t.p(n,s):(t=Ge(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&w(e),t&&t.d(n)}}}function tn(i){let e,t,n,s=i[5]&&He(i),r=X(Object.entries(i[1])),o=[];for(let l=0;l<r.length;l+=1)o[l]=Ve(Be(i,r,l));return{c(){s&&s.c(),e=C();for(let l=0;l<o.length;l+=1)o[l].c();t=ne()},m(l,c){s&&s.m(l,c),S(l,e,c);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(l,c);S(l,t,c),n=!0},p(l,[c]){if(l[5]?s?(s.p(l,c),c&32&&j(s,1)):(s=He(l),s.c(),j(s,1),s.m(e.parentNode,e)):s&&(be(),U(s,1,1,()=>{s=null}),ve()),c&142){r=X(Object.entries(l[1]));let a;for(a=0;a<r.length;a+=1){const f=Be(l,r,a);o[a]?o[a].p(f,c):(o[a]=Ve(f),o[a].c(),o[a].m(t.parentNode,t))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}},i(l){n||(j(s),n=!0)},o(l){U(s),n=!1},d(l){l&&(w(e),w(t)),s&&s.d(l),pe(o,l)}}}function Te(i){return i.charAt(0).toUpperCase()+i.slice(1)}function nn(i,e,t){let n,s,r;R(i,Pe,d=>t(8,n=d)),R(i,Oe,d=>t(2,s=d)),R(i,ie,d=>t(3,r=d));let{shifts:o}=e,l={},c=null,a=!1,f=()=>{t(5,a=!1),t(4,c=null)};function u(d){t(4,c=d),t(5,a=!0)}const p=d=>u(d);return i.$$set=d=>{"shifts"in d&&t(0,o=d.shifts)},i.$$.update=()=>{var d,b;if(i.$$.dirty&271){t(1,l={});for(const y of Object.values(o))if((s&&((b=(d=y.expand)==null?void 0:d.employee)==null?void 0:b.username)==r.username||!s)&&new Date(y.dateStart).getMonth()==n.getMonth()){const g=new Date(y.dateStart).getDate();l.hasOwnProperty(g)?l[g].push(y):t(1,l[g]=[y],l)}}},[o,l,s,r,c,a,f,u,n,p]}class sn extends x{constructor(e){super(),Z(this,e,nn,tn,Y,{shifts:0})}}function on(i){let e,t,n,s,r,o,l,c,a;return{c(){e=v("nav"),t=v("div"),n=v("div"),s=P(i[0]),r=C(),o=v("img"),c=C(),a=v("div"),a.textContent=`${ln}`,m(n,"class","version svelte-opjbog"),ee(o.src,l=rn)||m(o,"src",l),m(o,"alt","Logo"),m(o,"class","svelte-opjbog"),m(t,"class","logo svelte-opjbog"),m(a,"class","nav-text svelte-opjbog"),m(e,"class","navbar svelte-opjbog")},m(f,u){S(f,e,u),h(e,t),h(t,n),h(n,s),h(t,r),h(t,o),h(e,c),h(e,a)},p(f,[u]){u&1&&I(s,f[0])},i:L,o:L,d(f){f&&w(e)}}}let rn="valderuzlogo.png",ln="ShiftSwitch";function cn(i,e,t){let n;return R(i,pt,s=>t(0,n=s)),[n]}class an extends x{constructor(e){super(),Z(this,e,cn,on,Y,{})}}function un(i){let e,t,n,s,r,o,l,c,a,f,u,p,d,b,y,g;return{c(){e=v("div"),t=v("button"),n=v("img"),r=C(),o=v("button"),l=v("img"),a=C(),f=v("button"),u=v("img"),d=C(),b=v("button"),b.innerHTML='<img src="logout.png" class="svelte-g1vv3c"/>',ee(n.src,s=i[1]?"grid.png":"scroll.png")||m(n,"src",s),m(n,"class","svelte-g1vv3c"),m(t,"class","toggle-button svelte-g1vv3c"),ee(l.src,c=i[0]?"single_user.png":"multi_user.png")||m(l,"src",c),m(l,"class","svelte-g1vv3c"),m(o,"class","toggle-button svelte-g1vv3c"),ee(u.src,p=i[2]?i[2]:"nopic.png")||m(u,"src",p),m(u,"class","profilepic svelte-g1vv3c"),m(f,"class","toggle-button svelte-g1vv3c"),m(b,"class","toggle-button svelte-g1vv3c"),m(e,"class","navbar svelte-g1vv3c")},m(_,k){S(_,e,k),h(e,t),h(t,n),h(e,r),h(e,o),h(o,l),h(e,a),h(e,f),h(f,u),h(e,d),h(e,b),y||(g=[E(t,"click",i[3]),E(o,"click",i[4]),E(f,"click",i[5]),E(b,"click",i[6])],y=!0)},p(_,[k]){k&2&&!ee(n.src,s=_[1]?"grid.png":"scroll.png")&&m(n,"src",s),k&1&&!ee(l.src,c=_[0]?"single_user.png":"multi_user.png")&&m(l,"src",c),k&4&&!ee(u.src,p=_[2]?_[2]:"nopic.png")&&m(u,"src",p)},i:L,o:L,d(_){_&&w(e),y=!1,J(g)}}}function dn(i,e,t){let n,s,r,o;R(i,ke,u=>t(7,n=u)),R(i,Oe,u=>t(0,s=u)),R(i,ge,u=>t(1,r=u)),R(i,he,u=>t(2,o=u));function l(){n&&ke.set(!n),ge.set(!r)}function c(){Oe.set(!s)}function a(){ke.set(!n)}function f(){A.authStore.clear()}return[s,r,o,l,c,a,f]}class hn extends x{constructor(e){super(),Z(this,e,dn,un,Y,{})}}function fn(i){let e,t,n,s,r,o,l=i[0].toLocaleString("fr-CH",{month:"long"})+"",c,a,f=i[0].getFullYear()+"",u,p,d,b,y,g,_;return{c(){e=v("div"),t=v("button"),n=v("img"),r=C(),o=v("div"),c=P(l),a=C(),u=P(f),p=C(),d=v("button"),b=v("img"),ee(n.src,s=Je)||m(n,"src",s),m(n,"alt","Button"),m(n,"class","svelte-co2y0d"),m(t,"class","toggle-button svelte-co2y0d"),m(b,"class","rot svelte-co2y0d"),ee(b.src,y=Je)||m(b,"src",y),m(b,"alt","Button"),m(d,"class","toggle-button svelte-co2y0d"),m(e,"class","layout svelte-co2y0d")},m(k,O){S(k,e,O),h(e,t),h(t,n),h(e,r),h(e,o),h(o,c),h(o,a),h(o,u),h(e,p),h(e,d),h(d,b),g||(_=[E(t,"click",i[3]),E(d,"click",i[4])],g=!0)},p(k,[O]){O&1&&l!==(l=k[0].toLocaleString("fr-CH",{month:"long"})+"")&&I(c,l),O&1&&f!==(f=k[0].getFullYear()+"")&&I(u,f)},i:L,o:L,d(k){k&&w(e),g=!1,J(_)}}}let Je="left_arrow.png";function pn(i,e,t){let{renderDate:n}=e;function s(){n.setMonth(n.getMonth()+1),t(0,n)}function r(){n.setMonth(n.getMonth()-1),t(0,n)}const o=()=>r(),l=()=>s();return i.$$set=c=>{"renderDate"in c&&t(0,n=c.renderDate)},[n,s,r,o,l]}class mn extends x{constructor(e){super(),Z(this,e,pn,fn,Y,{renderDate:0})}}function Ye(i,e,t){const n=i.slice();return n[14]=e[t],n}function Qe(i,e,t){const n=i.slice();return n[17]=e[t],n}function Xe(i,e,t){const n=i.slice();return n[14]=e[t],n}function Ze(i){let e,t,n,s,r,o;return n=new mt({props:{shift:i[3],onClose:i[5]}}),{c(){e=v("div"),t=C(),Q(n.$$.fragment),m(e,"class","overlay svelte-1sylcjy")},m(l,c){S(l,e,c),S(l,t,c),z(n,l,c),s=!0,r||(o=E(e,"click",i[5]),r=!0)},p(l,c){const a={};c&8&&(a.shift=l[3]),n.$set(a)},i(l){s||(j(n.$$.fragment,l),s=!0)},o(l){U(n.$$.fragment,l),s=!1},d(l){l&&(w(e),w(t)),V(n,l),r=!1,o()}}}function xe(i){let e;return{c(){e=v("div"),e.textContent=`${i[14]}`},m(t,n){S(t,e,n)},p:L,d(t){t&&w(e)}}}function et(i){let e,t=X(i[1][i[14]]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tt(Qe(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ne()},m(s,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,r);S(s,e,r)},p(s,r){if(r&71){t=X(s[1][s[14]]);let o;for(o=0;o<t.length;o+=1){const l=Qe(s,t,o);n[o]?n[o].p(l,r):(n[o]=tt(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&w(e),pe(n,s)}}}function gn(i){var u,p;let e,t,n=((p=(u=i[17].expand)==null?void 0:u.employee)==null?void 0:p.username)+"",s,r,o,l,c=i[17].location+"",a,f;return{c(){e=v("div"),t=v("div"),s=P(n),r=P(" |"),o=C(),l=v("div"),a=P(c),f=C(),m(t,"class","name svelte-1sylcjy"),m(l,"class","loc svelte-1sylcjy"),m(e,"class","shift noswap svelte-1sylcjy")},m(d,b){S(d,e,b),h(e,t),h(t,s),h(t,r),h(e,o),h(e,l),h(l,a),h(e,f)},p(d,b){var y,g;b&3&&n!==(n=((g=(y=d[17].expand)==null?void 0:y.employee)==null?void 0:g.username)+"")&&I(s,n),b&3&&c!==(c=d[17].location+"")&&I(a,c)},d(d){d&&w(e)}}}function bn(i){var b,y;let e,t,n=((y=(b=i[17].expand)==null?void 0:b.employee)==null?void 0:y.username)+"",s,r,o,l,c=i[17].location+"",a,f,u,p;function d(){return i[12](i[17])}return{c(){e=v("div"),t=v("div"),s=P(n),r=P(" |"),o=C(),l=v("div"),a=P(c),f=C(),m(t,"class","name svelte-1sylcjy"),m(l,"class","loc svelte-1sylcjy"),m(e,"class","shift svelte-1sylcjy")},m(g,_){S(g,e,_),h(e,t),h(t,s),h(t,r),h(e,o),h(e,l),h(l,a),h(e,f),u||(p=E(e,"click",d),u=!0)},p(g,_){var k,O;i=g,_&3&&n!==(n=((O=(k=i[17].expand)==null?void 0:k.employee)==null?void 0:O.username)+"")&&I(s,n),_&3&&c!==(c=i[17].location+"")&&I(a,c)},d(g){g&&w(e),u=!1,p()}}}function tt(i){let e;function t(r,o){var l,c;return((c=(l=r[17].expand)==null?void 0:l.employee)==null?void 0:c.username)===r[2].username?bn:gn}let n=t(i),s=n(i);return{c(){s.c(),e=ne()},m(r,o){s.m(r,o),S(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&w(e),s.d(r)}}}function nt(i){let e,t,n=new Date(i[14]).getDate()+"",s,r,o,l=i[1][i[14]]&&typeof i[1][i[14]]=="object"&&i[1][i[14]].length>0&&et(i);return{c(){e=v("div"),t=v("div"),s=P(n),r=C(),l&&l.c(),o=C(),m(t,"class","time svelte-1sylcjy"),m(e,"class","calendar-card svelte-1sylcjy")},m(c,a){S(c,e,a),h(e,t),h(t,s),h(e,r),l&&l.m(e,null),h(e,o)},p(c,a){a&1&&n!==(n=new Date(c[14]).getDate()+"")&&I(s,n),c[1][c[14]]&&typeof c[1][c[14]]=="object"&&c[1][c[14]].length>0?l?l.p(c,a):(l=et(c),l.c(),l.m(e,o)):l&&(l.d(1),l=null)},d(c){c&&w(e),l&&l.d()}}}function vn(i){let e,t,n,s,r,o=i[4]&&Ze(i),l=X(i[7]),c=[];for(let u=0;u<l.length;u+=1)c[u]=xe(Xe(i,l,u));let a=X(i[0]),f=[];for(let u=0;u<a.length;u+=1)f[u]=nt(Ye(i,a,u));return{c(){o&&o.c(),e=C(),t=v("div");for(let u=0;u<c.length;u+=1)c[u].c();n=C(),s=v("div");for(let u=0;u<f.length;u+=1)f[u].c();m(t,"class","weekdays svelte-1sylcjy"),m(s,"class","calendar-grid svelte-1sylcjy")},m(u,p){o&&o.m(u,p),S(u,e,p),S(u,t,p);for(let d=0;d<c.length;d+=1)c[d]&&c[d].m(t,null);S(u,n,p),S(u,s,p);for(let d=0;d<f.length;d+=1)f[d]&&f[d].m(s,null);r=!0},p(u,[p]){if(u[4]?o?(o.p(u,p),p&16&&j(o,1)):(o=Ze(u),o.c(),j(o,1),o.m(e.parentNode,e)):o&&(be(),U(o,1,1,()=>{o=null}),ve()),p&128){l=X(u[7]);let d;for(d=0;d<l.length;d+=1){const b=Xe(u,l,d);c[d]?c[d].p(b,p):(c[d]=xe(b),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}if(p&71){a=X(u[0]);let d;for(d=0;d<a.length;d+=1){const b=Ye(u,a,d);f[d]?f[d].p(b,p):(f[d]=nt(b),f[d].c(),f[d].m(s,null))}for(;d<f.length;d+=1)f[d].d(1);f.length=a.length}},i(u){r||(j(o),r=!0)},o(u){U(o),r=!1},d(u){u&&(w(e),w(t),w(n),w(s)),o&&o.d(u),pe(c,u),pe(f,u)}}}function _n(i,e,t){let n,s,r;R(i,Pe,g=>t(10,n=g)),R(i,Oe,g=>t(11,s=g)),R(i,ie,g=>t(2,r=g));let{shifts:o}=e,l,c=[],a={},f=null,u=!1,p=()=>{t(4,u=!1),t(3,f=null)};function d(g){t(3,f=g),t(4,u=!0)}let b=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const y=g=>d(g);return i.$$set=g=>{"shifts"in g&&t(8,o=g.shifts)},i.$$.update=()=>{var g,_;if(i.$$.dirty&1024&&new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),i.$$.dirty&1537){t(0,c=[]),t(9,l=new Date(n.getFullYear(),n.getMonth(),1));const k=(l.getDay()+6)%7;l.setDate(1-k);const O=new Date(l);for(;O<=new Date(n.getFullYear(),n.getMonth()+1,0);)c.push(new Date(O).toISOString().split("T")[0]),O.setDate(O.getDate()+1)}if(i.$$.dirty&3846){t(1,a={});for(const k of Object.values(o))if((s&&((_=(g=k.expand)==null?void 0:g.employee)==null?void 0:_.username)==r.username||!s)&&l<=new Date(k.dateStart)&&new Date(k.dateStart)<=new Date(n.getFullYear(),n.getMonth()+1,0)){const O=new Date(k.dateStart).toISOString().split("T")[0];a.hasOwnProperty(O)?a[O].push(k):t(1,a[O]=[k],a)}}},[c,a,r,f,u,p,d,b,o,l,n,s,y]}class yn extends x{constructor(e){super(),Z(this,e,_n,vn,Y,{shifts:8})}}function st(i){let e,t,n,s,r,o,l,c,a,f,u=i[0]&&it(i);function p(y,g){return y[4]?Sn:wn}let d=p(i),b=d(i);return{c(){e=v("div"),t=v("div"),t.innerHTML='<img src="valderuzlogo.png" alt="Logo" class="svelte-1cc1qib"/> <div class="title svelte-1cc1qib">ShiftSwitch</div>',n=C(),s=v("div"),r=P(i[6]),o=C(),l=v("form"),u&&u.c(),c=C(),b.c(),m(t,"class","logo svelte-1cc1qib"),m(l,"class","form svelte-1cc1qib"),m(e,"class","container svelte-1cc1qib")},m(y,g){S(y,e,g),h(e,t),h(e,n),h(e,s),h(s,r),h(e,o),h(e,l),u&&u.m(l,null),h(l,c),b.m(l,null),a||(f=E(l,"submit",yt(i[10])),a=!0)},p(y,g){g&64&&I(r,y[6]),y[0]?u?u.p(y,g):(u=it(y),u.c(),u.m(l,c)):u&&(u.d(1),u=null),d===(d=p(y))&&b?b.p(y,g):(b.d(1),b=d(y),b&&(b.c(),b.m(l,null)))},d(y){y&&w(e),u&&u.d(),b.d(),a=!1,f()}}}function it(i){let e,t;return{c(){e=v("div"),t=P(i[0]),m(e,"class","errmsg svelte-1cc1qib")},m(n,s){S(n,e,s),h(e,t)},p(n,s){s&1&&I(t,n[0])},d(n){n&&w(e)}}}function wn(i){let e,t,n,s,r,o,l,c,a;return{c(){e=v("input"),t=C(),n=v("input"),s=C(),r=v("button"),r.textContent="Login",o=C(),l=v("button"),l.textContent="New user?",m(e,"placeholder","Username"),m(e,"type","text"),m(e,"class","input svelte-1cc1qib"),m(n,"placeholder","Password"),m(n,"type","password"),m(n,"class","input svelte-1cc1qib"),m(r,"class","button svelte-1cc1qib"),m(l,"class","button svelte-1cc1qib")},m(f,u){S(f,e,u),H(e,i[1]),S(f,t,u),S(f,n,u),H(n,i[2]),S(f,s,u),S(f,r,u),S(f,o,u),S(f,l,u),c||(a=[E(e,"input",i[14]),E(n,"input",i[15]),E(r,"click",i[7]),E(l,"click",i[9])],c=!0)},p(f,u){u&2&&e.value!==f[1]&&H(e,f[1]),u&4&&n.value!==f[2]&&H(n,f[2])},d(f){f&&(w(e),w(t),w(n),w(s),w(r),w(o),w(l)),c=!1,J(a)}}}function Sn(i){let e,t,n,s,r,o,l,c,a,f,u;return{c(){e=v("input"),t=C(),n=v("input"),s=C(),r=v("input"),o=C(),l=v("button"),l.textContent="Sign up",c=C(),a=v("button"),a.textContent="Back",m(e,"placeholder","Username"),m(e,"type","text"),m(e,"class","input svelte-1cc1qib"),m(n,"placeholder","Email"),m(n,"type","email"),m(n,"class","input svelte-1cc1qib"),m(r,"placeholder","Password"),m(r,"type","password"),m(r,"class","input svelte-1cc1qib"),m(l,"class","button svelte-1cc1qib"),m(a,"class","button svelte-1cc1qib")},m(p,d){S(p,e,d),H(e,i[1]),S(p,t,d),S(p,n,d),H(n,i[3]),S(p,s,d),S(p,r,d),H(r,i[2]),S(p,o,d),S(p,l,d),S(p,c,d),S(p,a,d),f||(u=[E(e,"input",i[11]),E(n,"input",i[12]),E(r,"input",i[13]),E(l,"click",i[8]),E(a,"click",i[9])],f=!0)},p(p,d){d&2&&e.value!==p[1]&&H(e,p[1]),d&8&&n.value!==p[3]&&H(n,p[3]),d&4&&r.value!==p[2]&&H(r,p[2])},d(p){p&&(w(e),w(t),w(n),w(s),w(r),w(o),w(l),w(c),w(a)),f=!1,J(u)}}}function kn(i){let e,t=!i[5]&&st(i);return{c(){t&&t.c(),e=ne()},m(n,s){t&&t.m(n,s),S(n,e,s)},p(n,[s]){n[5]?t&&(t.d(1),t=null):t?t.p(n,s):(t=st(n),t.c(),t.m(e.parentNode,e))},i:L,o:L,d(n){n&&w(e),t&&t.d(n)}}}function Cn(i,e,t){let n,s;R(i,ie,O=>t(5,n=O)),R(i,pt,O=>t(6,s=O));let r="",o,l,c,a=!1;async function f(){try{if(await A.collection("users").authWithPassword(o,l),A.authStore.model.verified){console.log("verified");const O=await A.collection("users").getOne(n.id,{});he.set(A.files.getUrl(O,O.avatar,{thumb:"100x250"}))}else console.log("not verified"),A.authStore.clear(),t(0,r="Please verify your eamil befor login")}catch(O){console.log("signup failed: "+O.message),O.message==="Failed to authenticate."?t(0,r="Invalid username or password. Please try again."):O.message==="NetworkError"?t(0,r="Network error. Please check your internet connection."):t(0,r=O.message)}}async function u(){try{if((await A.collection("users").getList(1,50,{filter:`username="${o}"`})).items.length==0){const D={username:o,password:l,passwordConfirm:l,email:c},$=await A.collection("users").create(D);await A.collection("users").requestVerification(c)&&t(0,r="Verification Email sent check your inbox"),p()}else console.log("User already exists with that username"),t(0,r="User already exists with that username")}catch(O){console.log("signup failed: "+O),t(0,r=O.msg)}}function p(){t(4,a=!a)}function d(O){Ct.call(this,i,O)}function b(){o=this.value,t(1,o)}function y(){c=this.value,t(3,c)}function g(){l=this.value,t(2,l)}function _(){o=this.value,t(1,o)}function k(){l=this.value,t(2,l)}return[r,o,l,c,a,n,s,f,u,p,d,b,y,g,_,k]}class On extends x{constructor(e){super(),Z(this,e,Cn,kn,Y,{})}}function Pn(i){let e,t,n,s,r,o,l,c,a,f,u,p,d,b,y,g;return{c(){e=v("div"),t=v("div"),t.textContent="Changer le mot de passe:",n=C(),s=v("div"),r=v("input"),o=C(),l=v("input"),c=C(),a=v("input"),f=C(),u=v("div"),p=v("button"),p.textContent="Exit",d=C(),b=v("button"),b.textContent="Change",m(r,"placeholder","Old Password"),m(r,"type","password"),m(r,"class","input"),m(l,"placeholder","Password"),m(l,"type","password"),m(l,"class","input"),m(a,"placeholder","Password Confirmation"),m(a,"type","password"),m(a,"class","input"),m(s,"class","group-flex svelte-hb9kik"),m(p,"class","button svelte-hb9kik"),m(b,"class","button svelte-hb9kik"),m(u,"class","group svelte-hb9kik"),m(e,"class","popup svelte-hb9kik")},m(_,k){S(_,e,k),h(e,t),h(e,n),h(e,s),h(s,r),H(r,i[0]),h(s,o),h(s,l),H(l,i[1]),h(s,c),h(s,a),H(a,i[2]),h(e,f),h(e,u),h(u,p),h(u,d),h(u,b),y||(g=[E(r,"input",i[6]),E(l,"input",i[7]),E(a,"input",i[8]),E(p,"click",i[4]),E(b,"click",i[3])],y=!0)},p(_,[k]){k&1&&r.value!==_[0]&&H(r,_[0]),k&2&&l.value!==_[1]&&H(l,_[1]),k&4&&a.value!==_[2]&&H(a,_[2])},i:L,o:L,d(_){_&&w(e),y=!1,J(g)}}}function Tn(i,e,t){let n;R(i,ie,d=>t(9,n=d));let{onClose:s}=e,r,o,l;async function c(){try{const d={password:o,passwordConfirm:l,oldPassword:r},b=await A.collection("users").update(n.id,d);s()}catch{console.log("passwords do not match")}}function a(){s()}function f(){r=this.value,t(0,r)}function u(){o=this.value,t(1,o)}function p(){l=this.value,t(2,l)}return i.$$set=d=>{"onClose"in d&&t(5,s=d.onClose)},[r,o,l,c,a,s,f,u,p]}class En extends x{constructor(e){super(),Z(this,e,Tn,Pn,Y,{onClose:5})}}function ot(i){let e,t,n,s,r,o;return n=new En({props:{onClose:i[7]}}),{c(){e=v("div"),t=C(),Q(n.$$.fragment),m(e,"class","overlay svelte-10l5y7")},m(l,c){S(l,e,c),S(l,t,c),z(n,l,c),s=!0,r||(o=E(e,"click",i[7]),r=!0)},p:L,i(l){s||(j(n.$$.fragment,l),s=!0)},o(l){U(n.$$.fragment,l),s=!1},d(l){l&&(w(e),w(t)),V(n,l),r=!1,o()}}}function qn(i){let e,t,n,s,r,o,l,c,a,f=i[2].username+"",u,p,d,b,y=i[2].name+"",g,_,k,O,D,$=i[3]?"Grid":"Scroll",K,T,q,N,F,qe,Ue,M=i[1]&&ot(i);return{c(){e=v("div"),t=v("form"),n=v("img"),r=C(),o=v("input"),l=C(),c=v("div"),a=P("Nom d'utilisateur: "),u=P(f),p=C(),d=v("div"),b=P("Nom: "),g=P(y),_=C(),k=v("div"),O=P("Preferance d'affichage: "),D=v("button"),K=P($),T=C(),q=v("button"),q.textContent="Change Password",N=C(),M&&M.c(),ee(n.src,s=i[4]?i[4]:"nopic.png")||m(n,"src",s),m(n,"alt","Selected Image"),m(n,"class","profilepic svelte-10l5y7"),m(o,"type","file"),m(o,"name","avatar"),m(o,"accept",".jpg, .jpeg, .png"),St(o,"display","none"),m(t,"enctype","multipart/form-data"),m(D,"class","toggle svelte-10l5y7"),m(q,"class","flat-button svelte-10l5y7"),m(e,"class","card svelte-10l5y7")},m(G,se){S(G,e,se),h(e,t),h(t,n),h(t,r),h(t,o),i[10](o),h(e,l),h(e,c),h(c,a),h(c,u),h(e,p),h(e,d),h(d,b),h(d,g),h(e,_),h(e,k),h(k,O),h(k,D),h(D,K),h(e,T),h(e,q),h(e,N),M&&M.m(e,null),F=!0,qe||(Ue=[E(n,"click",i[9]),E(o,"change",i[6]),E(D,"click",i[5]),E(q,"click",i[8])],qe=!0)},p(G,[se]){(!F||se&16&&!ee(n.src,s=G[4]?G[4]:"nopic.png"))&&m(n,"src",s),(!F||se&4)&&f!==(f=G[2].username+"")&&I(u,f),(!F||se&4)&&y!==(y=G[2].name+"")&&I(g,y),(!F||se&8)&&$!==($=G[3]?"Grid":"Scroll")&&I(K,$),G[1]?M?(M.p(G,se),se&2&&j(M,1)):(M=ot(G),M.c(),j(M,1),M.m(e,null)):M&&(be(),U(M,1,1,()=>{M=null}),ve())},i(G){F||(j(M),F=!0)},o(G){U(M),F=!1},d(G){G&&w(e),i[10](null),M&&M.d(),qe=!1,J(Ue)}}}function jn(i,e,t){let n,s,r;R(i,ie,_=>t(2,n=_)),R(i,ge,_=>t(3,s=_)),R(i,he,_=>t(4,r=_));async function o(){ge.set(!s);const _={useGrid:!s};await A.collection("users").update(n.id,_)}Ee(()=>{l()});async function l(){const _=await A.collection("users").getOne(n.id,{});he.set(A.files.getUrl(_,_.avatar,{thumb:"100x250"}))}let c,a,f=new FormData;async function u(_){c=_.target.files[0],f.set("avatar",c),he.set(URL.createObjectURL(c)),await A.collection("users").update(n.id,{avatar:c})}let p=!1,d=()=>{t(1,p=!1)},b=()=>{t(1,p=!0)};const y=()=>a.click();function g(_){Ce[_?"unshift":"push"](()=>{a=_,t(0,a)})}return[a,p,n,s,r,o,u,d,b,y,g]}class In extends x{constructor(e){super(),Z(this,e,jn,qn,Y,{})}}function Dn(i){let e,t;return e=new In({}),{c(){Q(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p:L,i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Ln(i){let e,t;return e=new sn({props:{shifts:i[0]}}),{c(){Q(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.shifts=n[0]),e.$set(r)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function An(i){let e,t;return e=new yn({props:{shifts:i[0]}}),{c(){Q(e.$$.fragment)},m(n,s){z(e,n,s),t=!0},p(n,s){const r={};s&1&&(r.shifts=n[0]),e.$set(r)},i(n){t||(j(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){V(e,n)}}}function Rn(i){let e,t,n,s;const r=[An,Ln,Dn],o=[];function l(c,a){return c[1]&&!c[2]?0:!c[1]&&!c[2]?1:2}return e=l(i),t=o[e]=r[e](i),{c(){t.c(),n=ne()},m(c,a){o[e].m(c,a),S(c,n,a),s=!0},p(c,[a]){let f=e;e=l(c),e===f?o[e].p(c,a):(be(),U(o[f],1,1,()=>{o[f]=null}),ve(),t=o[e],t?t.p(c,a):(t=o[e]=r[e](c),t.c()),j(t,1),t.m(n.parentNode,n))},i(c){s||(j(t),s=!0)},o(c){U(t),s=!1},d(c){c&&w(n),o[e].d(c)}}}function Un(i,e,t){let n,s;R(i,ge,o=>t(1,n=o)),R(i,ke,o=>t(2,s=o));let r=[];return Ee(async()=>{const o=await A.collection("shifts").getList(1,50,{sort:"dateStart",expand:"employee"});t(0,r=o.items)}),[r,n,s]}class $n extends x{constructor(e){super(),Z(this,e,Un,Rn,Y,{})}}function rt(i,e,t){const n=i.slice();return n[2]=e[t],n}function lt(i){var a,f;let e,t,n=((f=(a=i[2].expand)==null?void 0:a.employee)==null?void 0:f.username)+"",s,r,o=new Date(i[2].dateStart).toLocaleString("default")+"",l,c;return{c(){e=v("div"),t=P("De dieu! "),s=P(n),r=P(" a besoin de toi! Peut-tu prendre son horaire le "),l=P(o),c=P(" ?"),m(e,"class","swap_notification svelte-1lst7vx")},m(u,p){S(u,e,p),h(e,t),h(e,s),h(e,r),h(e,l),h(e,c)},p(u,p){var d,b;p&1&&n!==(n=((b=(d=u[2].expand)==null?void 0:d.employee)==null?void 0:b.username)+"")&&I(s,n),p&1&&o!==(o=new Date(u[2].dateStart).toLocaleString("default")+"")&&I(l,o)},d(u){u&&w(e)}}}function Nn(i){let e,t=X(i[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=lt(rt(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ne()},m(s,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,r);S(s,e,r)},p(s,[r]){if(r&1){t=X(s[0]);let o;for(o=0;o<t.length;o+=1){const l=rt(s,t,o);n[o]?n[o].p(l,r):(n[o]=lt(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:L,o:L,d(s){s&&w(e),pe(n,s)}}}function Fn(i,e,t){let n;R(i,ie,r=>t(1,n=r));let s=[];return A.autoCancellation(!1),Ee(async()=>{const r=await A.collection("shifts").getList(1,20,{sort:"dateStart",expand:"employee",filter:`swap = true && employee!="${n.id}" && dateStart >= "${new Date().toISOString()}"`});t(0,s=r.items)}),[s]}class Mn extends x{constructor(e){super(),Z(this,e,Fn,Nn,Y,{})}}function ct(i){let e,t,n,s,r,o,l,c,a,f,u,p,d;t=new an({});function b(g){i[2](g)}let y={};return i[1]!==void 0&&(y.renderDate=i[1]),s=new mn({props:y}),Ce.push(()=>Dt(s,"renderDate",b)),l=new hn({}),f=new Mn({}),p=new $n({}),{c(){e=v("div"),Q(t.$$.fragment),n=C(),Q(s.$$.fragment),o=C(),Q(l.$$.fragment),c=C(),a=v("div"),Q(f.$$.fragment),u=C(),Q(p.$$.fragment),m(e,"class","navbar svelte-1lj92dp"),m(a,"class","content svelte-1lj92dp")},m(g,_){S(g,e,_),z(t,e,null),h(e,n),z(s,e,null),h(e,o),z(l,e,null),S(g,c,_),S(g,a,_),z(f,a,null),h(a,u),z(p,a,null),d=!0},p(g,_){const k={};!r&&_&2&&(r=!0,k.renderDate=g[1],Tt(()=>r=!1)),s.$set(k)},i(g){d||(j(t.$$.fragment,g),j(s.$$.fragment,g),j(l.$$.fragment,g),j(f.$$.fragment,g),j(p.$$.fragment,g),d=!0)},o(g){U(t.$$.fragment,g),U(s.$$.fragment,g),U(l.$$.fragment,g),U(f.$$.fragment,g),U(p.$$.fragment,g),d=!1},d(g){g&&(w(e),w(c),w(a)),V(t),V(s),V(l),V(f),V(p)}}}function Bn(i){let e,t,n,s,r,o=i[0]&&ct(i);return t=new On({}),{c(){o&&o.c(),e=C(),Q(t.$$.fragment),n=C(),s=v("footer"),s.innerHTML='<div class="footer-bar svelte-1lj92dp"></div> <div class="links svelte-1lj92dp"><a class="link svelte-1lj92dp" href="https://github.com/Engollon/shiftswitch/blob/main/README.md">Documentation</a> <a class="link svelte-1lj92dp" href="https://www.val-de-ruz.ch/decouverte/culture-sports-loisirs/piscines">Piscine</a> <a class="link svelte-1lj92dp" href="mailto:Engollon.piscine@gamil.com">Contact</a></div>'},m(l,c){o&&o.m(l,c),S(l,e,c),z(t,l,c),S(l,n,c),S(l,s,c),r=!0},p(l,[c]){l[0]?o?(o.p(l,c),c&1&&j(o,1)):(o=ct(l),o.c(),j(o,1),o.m(e.parentNode,e)):o&&(be(),U(o,1,1,()=>{o=null}),ve())},i(l){r||(j(o),j(t.$$.fragment,l),r=!0)},o(l){U(o),U(t.$$.fragment,l),r=!1},d(l){l&&(w(e),w(n),w(s)),o&&o.d(l),V(t,l)}}}function Kn(i,e,t){let n,s,r;R(i,he,c=>t(3,n=c)),R(i,ie,c=>t(0,s=c)),R(i,Pe,c=>t(1,r=c)),Ee(()=>{o()});async function o(){if(s){const c=await A.collection("users").getOne(s.id,{});n.set(A.files.getUrl(c,c.avatar,{thumb:"100x250"}))}}function l(c){r=c,Pe.set(r)}return[s,r,l]}class Hn extends x{constructor(e){super(),Z(this,e,Kn,Bn,Y,{})}}new Hn({target:document.getElementById("app")});
