var yt=Object.defineProperty;var kt=(i,e,t)=>e in i?yt(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var je=(i,e,t)=>(kt(i,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();function $(){}function pt(i){return i()}function Fe(){return Object.create(null)}function Z(i){i.forEach(pt)}function mt(i){return typeof i=="function"}function G(i,e){return i!=i?e==e:i!==e||i&&typeof i=="object"||typeof i=="function"}let Se;function x(i,e){return i===e?!0:(Se||(Se=document.createElement("a")),Se.href=e,i===Se.href)}function St(i){return Object.keys(i).length===0}function Ct(i,...e){if(i==null){for(const n of e)n(void 0);return $}const t=i.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function L(i,e,t){i.$$.on_destroy.push(Ct(e,t))}function oe(i){return i??""}function $e(i,e,t){return i.set(t),e}function d(i,e){i.appendChild(e)}function O(i,e,t){i.insertBefore(e,t||null)}function C(i){i.parentNode&&i.parentNode.removeChild(i)}function ge(i,e){for(let t=0;t<i.length;t+=1)i[t]&&i[t].d(e)}function b(i){return document.createElement(i)}function P(i){return document.createTextNode(i)}function S(){return P(" ")}function te(){return P("")}function A(i,e,t,n){return i.addEventListener(e,t,n),()=>i.removeEventListener(e,t,n)}function Ot(i){return function(e){return e.preventDefault(),i.call(this,e)}}function g(i,e,t){t==null?i.removeAttribute(e):i.getAttribute(e)!==t&&i.setAttribute(e,t)}function Pt(i){return Array.from(i.childNodes)}function q(i,e){e=""+e,i.data!==e&&(i.data=e)}function ne(i,e){i.value=e??""}function Tt(i,e,t,n){t==null?i.style.removeProperty(e):i.style.setProperty(e,t,n?"important":"")}let be;function ve(i){be=i}function Dt(){if(!be)throw new Error("Function called outside component initialization");return be}function Ne(i){Dt().$$.on_mount.push(i)}function Et(i,e){const t=i.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const fe=[],De=[];let pe=[];const Ae=[],It=Promise.resolve();let qe=!1;function jt(){qe||(qe=!0,It.then(gt))}function Re(i){pe.push(i)}function Lt(i){Ae.push(i)}const Le=new Set;let de=0;function gt(){if(de!==0)return;const i=be;do{try{for(;de<fe.length;){const e=fe[de];de++,ve(e),At(e.$$)}}catch(e){throw fe.length=0,de=0,e}for(ve(null),fe.length=0,de=0;De.length;)De.pop()();for(let e=0;e<pe.length;e+=1){const t=pe[e];Le.has(t)||(Le.add(t),t())}pe.length=0}while(fe.length);for(;Ae.length;)Ae.pop()();qe=!1,Le.clear(),ve(i)}function At(i){if(i.fragment!==null){i.update(),Z(i.before_update);const e=i.dirty;i.dirty=[-1],i.fragment&&i.fragment.p(i.ctx,e),i.after_update.forEach(Re)}}function qt(i){const e=[],t=[];pe.forEach(n=>i.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),pe=e}const Oe=new Set;let ae;function ye(){ae={r:0,c:[],p:ae}}function ke(){ae.r||Z(ae.c),ae=ae.p}function I(i,e){i&&i.i&&(Oe.delete(i),i.i(e))}function U(i,e,t,n){if(i&&i.o){if(Oe.has(i))return;Oe.add(i),ae.c.push(()=>{Oe.delete(i),n&&(t&&i.d(1),n())}),i.o(e)}else n&&n()}function J(i){return(i==null?void 0:i.length)!==void 0?i:Array.from(i)}function Rt(i,e){i.d(1),e.delete(i.key)}function $t(i,e,t,n,s,r,o,l,a,c,f,u){let h=i.length,p=r.length,w=h;const k={};for(;w--;)k[i[w].key]=w;const m=[],_=new Map,v=new Map,y=[];for(w=p;w--;){const E=u(s,r,w),j=t(E);let D=o.get(j);D?n&&y.push(()=>D.p(E,e)):(D=c(j,E),D.c()),_.set(j,m[w]=D),j in k&&v.set(j,Math.abs(w-k[j]))}const T=new Set,R=new Set;function N(E){I(E,1),E.m(l,f),o.set(E.key,E),f=E.first,p--}for(;h&&p;){const E=m[p-1],j=i[h-1],D=E.key,W=j.key;E===j?(f=E.first,h--,p--):_.has(W)?!o.has(D)||T.has(D)?N(E):R.has(W)?h--:v.get(D)>v.get(W)?(R.add(D),N(E)):(T.add(W),h--):(a(j,o),h--)}for(;h--;){const E=i[h];_.has(E.key)||a(E,o)}for(;p;)N(m[p-1]);return Z(y),m}function Nt(i,e,t){const n=i.$$.props[e];n!==void 0&&(i.$$.bound[n]=t,t(i.$$.ctx[n]))}function V(i){i&&i.c()}function K(i,e,t){const{fragment:n,after_update:s}=i.$$;n&&n.m(e,t),Re(()=>{const r=i.$$.on_mount.map(pt).filter(mt);i.$$.on_destroy?i.$$.on_destroy.push(...r):Z(r),i.$$.on_mount=[]}),s.forEach(Re)}function B(i,e){const t=i.$$;t.fragment!==null&&(qt(t.after_update),Z(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function Ut(i,e){i.$$.dirty[0]===-1&&(fe.push(i),jt(),i.$$.dirty.fill(0)),i.$$.dirty[e/31|0]|=1<<e%31}function Y(i,e,t,n,s,r,o,l=[-1]){const a=be;ve(i);const c=i.$$={fragment:null,ctx:[],props:r,update:$,not_equal:s,bound:Fe(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(a?a.$$.context:[])),callbacks:Fe(),dirty:l,skip_bound:!1,root:e.target||a.$$.root};o&&o(c.root);let f=!1;if(c.ctx=t?t(i,e.props||{},(u,h,...p)=>{const w=p.length?p[0]:h;return c.ctx&&s(c.ctx[u],c.ctx[u]=w)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](w),f&&Ut(i,u)),h}):[],c.update(),f=!0,Z(c.before_update),c.fragment=n?n(c.ctx):!1,e.target){if(e.hydrate){const u=Pt(e.target);c.fragment&&c.fragment.l(u),u.forEach(C)}else c.fragment&&c.fragment.c();e.intro&&I(i.$$.fragment),K(i,e.target,e.anchor),gt()}ve(a)}class Q{constructor(){je(this,"$$");je(this,"$$set")}$destroy(){B(this,1),this.$destroy=$}$on(e,t){if(!mt(t))return $;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const s=n.indexOf(t);s!==-1&&n.splice(s,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Ft="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ft);function M(i,e,t,n){return new(t||(t=Promise))(function(s,r){function o(c){try{a(n.next(c))}catch(f){r(f)}}function l(c){try{a(n.throw(c))}catch(f){r(f)}}function a(c){c.done?s(c.value):function(u){return u instanceof t?u:new t(function(h){h(u)})}(c.value).then(o,l)}a((n=n.apply(i,e||[])).next())})}class ee extends Error{constructor(e){var t,n,s,r;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,ee.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof ee||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)===null||t===void 0?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":!((r=(s=(n=this.originalError)===null||n===void 0?void 0:n.cause)===null||s===void 0?void 0:s.message)===null||r===void 0)&&r.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return Object.assign({},this)}}const Ce=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Mt(i,e){const t={};if(typeof i!="string")return t;const n=Object.assign({},e||{}).decode||Ht;let s=0;for(;s<i.length;){const r=i.indexOf("=",s);if(r===-1)break;let o=i.indexOf(";",s);if(o===-1)o=i.length;else if(o<r){s=i.lastIndexOf(";",r-1)+1;continue}const l=i.slice(s,r).trim();if(t[l]===void 0){let a=i.slice(r+1,o).trim();a.charCodeAt(0)===34&&(a=a.slice(1,-1));try{t[l]=n(a)}catch{t[l]=a}}s=o+1}return t}function Me(i,e,t){const n=Object.assign({},t||{}),s=n.encode||Kt;if(!Ce.test(i))throw new TypeError("argument name is invalid");const r=s(e);if(r&&!Ce.test(r))throw new TypeError("argument val is invalid");let o=i+"="+r;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(l)}if(n.domain){if(!Ce.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!Ce.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if(!function(a){return Object.prototype.toString.call(a)==="[object Date]"||a instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(o+="; HttpOnly"),n.secure&&(o+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function Ht(i){return i.indexOf("%")!==-1?decodeURIComponent(i):i}function Kt(i){return encodeURIComponent(i)}let vt;function Pe(i){if(i)try{const e=decodeURIComponent(vt(i.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function Bt(i,e=0){let t=Pe(i);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}vt=typeof atob=="function"?atob:i=>{let e=String(i).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,s=0,r=0,o="";n=e.charAt(r++);~n&&(t=s%4?64*t+n:n,s++%4)?o+=String.fromCharCode(255&t>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return o};const He="pb_auth";class zt{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get model(){return this.baseModel}get isValid(){return!Bt(this.token)}get isAdmin(){return Pe(this.token).type==="admin"}get isAuthRecord(){return Pe(this.token).type==="authRecord"}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=He){const n=Mt(e||"")[t]||"";let s={};try{s=JSON.parse(n),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.model||null)}exportToCookie(e,t=He){var n,s;const r={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},o=Pe(this.token);o!=null&&o.exp?r.expires=new Date(1e3*o.exp):r.expires=new Date("1970-01-01"),e=Object.assign({},r,e);const l={token:this.token,model:this.model?JSON.parse(JSON.stringify(this.model)):null};let a=Me(t,JSON.stringify(l),e);const c=typeof Blob<"u"?new Blob([a]).size:a.length;if(l.model&&c>4096){l.model={id:(n=l==null?void 0:l.model)===null||n===void 0?void 0:n.id,email:(s=l==null?void 0:l.model)===null||s===void 0?void 0:s.email};const f=["collectionId","username","verified"];for(const u in this.model)f.includes(u)&&(l.model[u]=this.model[u]);a=Me(t,JSON.stringify(l),e)}return a}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.model),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.model)}}class Gt extends zt{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get model(){return(this._storageGet(this.storageKey)||{}).model||null}save(e,t){this._storageSet(this.storageKey,{token:e,model:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)===null||t===void 0||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.model||null)})}}class ue{constructor(e){this.client=e}}class Wt extends ue{getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}testEmail(e,t,n){return n=Object.assign({method:"POST",body:{email:e,template:t}},n),this.client.send("/api/settings/test/email",n).then(()=>!0)}generateAppleClientSecret(e,t,n,s,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:s,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}class Ue extends ue{decode(e){return e}getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(s=>{var r;return s.items=((r=s.items)===null||r===void 0?void 0:r.map(o=>this.decode(o)))||[],s})}getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var s;if(!(!((s=n==null?void 0:n.items)===null||s===void 0)&&s.length))throw new ee({status:404,data:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}getOne(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(s=>this.decode(s))}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],s=r=>M(this,void 0,void 0,function*(){return this.getList(r,e||500,t).then(o=>{const l=o.items;return n=n.concat(l),l.length==o.perPage?s(r+1):n})});return s(1)}}function X(i,e,t,n){const s=n!==void 0;return s||t!==void 0?s?(console.warn(i),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):e=Object.assign(e,t):e}class Vt extends Ue{get baseCrudPath(){return"/api/admins"}update(e,t,n){return super.update(e,t,n).then(s=>{var r,o;return((r=this.client.authStore.model)===null||r===void 0?void 0:r.id)===s.id&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)===void 0&&this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,r;return n&&((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)===e&&((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionId)===void 0&&this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.admin)||{});return e!=null&&e.token&&(e!=null&&e.admin)&&this.client.authStore.save(e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",admin:t})}authWithPassword(e,t,n,s){let r={method:"POST",body:{identity:e,password:t}};return r=X("This form of authWithPassword(email, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(email, pass, options?).",r,n,s),this.client.send(this.baseCrudPath+"/auth-with-password",r).then(this.authResponse.bind(this))}authRefresh(e,t){let n={method:"POST"};return n=X("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCrudPath+"/auth-refresh",n).then(this.authResponse.bind(this))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=X("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCrudPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=X("This form of confirmPasswordReset(resetToken, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(resetToken, password, passwordConfirm, options?).",o,s,r),this.client.send(this.baseCrudPath+"/confirm-password-reset",o).then(()=>!0)}}class bt extends ue{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentTopics=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}subscribe(e,t){var n;return M(this,void 0,void 0,function*(){if(!e)throw new Error("topic must be set.");const s=function(r){const o=r;let l;try{l=JSON.parse(o==null?void 0:o.data)}catch{}t(l||{})};return this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push(s),this.isConnected?this.subscriptions[e].length===1?yield this.submitSubscriptions():(n=this.eventSource)===null||n===void 0||n.addEventListener(e,s):yield this.connect(),()=>M(this,void 0,void 0,function*(){return this.unsubscribeByTopicAndListener(e,s)})})}unsubscribe(e){var t;return M(this,void 0,void 0,function*(){if(this.hasSubscriptionListeners(e)){if(e){for(let n of this.subscriptions[e])(t=this.eventSource)===null||t===void 0||t.removeEventListener(e,n);delete this.subscriptions[e]}else this.subscriptions={};this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect()}})}unsubscribeByPrefix(e){var t;return M(this,void 0,void 0,function*(){let n=!1;for(let s in this.subscriptions)if(s.startsWith(e)){n=!0;for(let r of this.subscriptions[s])(t=this.eventSource)===null||t===void 0||t.removeEventListener(s,r);delete this.subscriptions[s]}n&&(this.hasSubscriptionListeners()?yield this.submitSubscriptions():this.disconnect())})}unsubscribeByTopicAndListener(e,t){var n;return M(this,void 0,void 0,function*(){if(!Array.isArray(this.subscriptions[e])||!this.subscriptions[e].length)return;let s=!1;for(let r=this.subscriptions[e].length-1;r>=0;r--)this.subscriptions[e][r]===t&&(s=!0,delete this.subscriptions[e][r],this.subscriptions[e].splice(r,1),(n=this.eventSource)===null||n===void 0||n.removeEventListener(e,t));s&&(this.subscriptions[e].length||delete this.subscriptions[e],this.hasSubscriptionListeners()?this.hasSubscriptionListeners(e)||(yield this.submitSubscriptions()):this.disconnect())})}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!(!((t=this.subscriptions[e])===null||t===void 0)&&t.length);for(let s in this.subscriptions)if(!((n=this.subscriptions[s])===null||n===void 0)&&n.length)return!0;return!1}submitSubscriptions(){return M(this,void 0,void 0,function*(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentTopics=this.getNonEmptySubscriptionTopics(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentTopics},query:{requestKey:this.getSubscriptionsCancelKey()}}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getNonEmptySubscriptionTopics(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}connect(){return M(this,void 0,void 0,function*(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildUrl("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(()=>M(this,void 0,void 0,function*(){let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,yield this.submitSubscriptions()})).then(()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionTopics();if(e.length!=this.lastSentTopics.length)return!0;for(const t of e)if(!this.lastSentTopics.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new ee(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)===null||t===void 0||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class Jt extends Ue{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}subscribeOne(e,t){return M(this,void 0,void 0,function*(){return console.warn("PocketBase: subscribeOne(recordId, callback) is deprecated. Please replace it with subscribe(recordId, callback)."),this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t)})}subscribe(e,t){return M(this,void 0,void 0,function*(){if(typeof e=="function")return console.warn("PocketBase: subscribe(callback) is deprecated. Please replace it with subscribe('*', callback)."),this.client.realtime.subscribe(this.collectionIdOrName,e);if(!t)throw new Error("Missing subscription callback.");if(e==="")throw new Error("Missing topic.");let n=this.collectionIdOrName;return e!=="*"&&(n+="/"+e),this.client.realtime.subscribe(n,t)})}unsubscribe(e){return M(this,void 0,void 0,function*(){return e==="*"?this.client.realtime.unsubscribe(this.collectionIdOrName):e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)})}getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}getList(e=1,t=30,n){return super.getList(e,t,n)}getFirstListItem(e,t){return super.getFirstListItem(e,t)}getOne(e,t){return super.getOne(e,t)}create(e,t){return super.create(e,t)}update(e,t,n){return super.update(e,t,n).then(s=>{var r,o,l;return((r=this.client.authStore.model)===null||r===void 0?void 0:r.id)!==(s==null?void 0:s.id)||((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionId)!==this.collectionIdOrName&&((l=this.client.authStore.model)===null||l===void 0?void 0:l.collectionName)!==this.collectionIdOrName||this.client.authStore.save(this.client.authStore.token,s),s})}delete(e,t){return super.delete(e,t).then(n=>{var s,r,o;return!n||((s=this.client.authStore.model)===null||s===void 0?void 0:s.id)!==e||((r=this.client.authStore.model)===null||r===void 0?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.model)===null||o===void 0?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}listAuthMethods(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e).then(t=>Object.assign({},t,{usernamePassword:!!(t!=null&&t.usernamePassword),emailPassword:!!(t!=null&&t.emailPassword),authProviders:Array.isArray(t==null?void 0:t.authProviders)?t==null?void 0:t.authProviders:[]}))}authWithPassword(e,t,n,s){let r={method:"POST",body:{identity:e,password:t}};return r=X("This form of authWithPassword(usernameOrEmail, pass, body?, query?) is deprecated. Consider replacing it with authWithPassword(usernameOrEmail, pass, options?).",r,n,s),this.client.send(this.baseCollectionPath+"/auth-with-password",r).then(o=>this.authResponse(o))}authWithOAuth2Code(e,t,n,s,r,o,l){let a={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectUrl:s,createData:r}};return a=X("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectUrl, createData?, options?).",a,o,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",a).then(c=>this.authResponse(c))}authWithOAuth2(...e){return M(this,void 0,void 0,function*(){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{},n=(yield this.listAuthMethods()).authProviders.find(a=>a.name===t.provider);if(!n)throw new ee(new Error(`Missing or invalid provider "${t.provider}".`));const s=this.client.buildUrl("/api/oauth2-redirect"),r=new bt(this.client);let o=null;function l(){o==null||o.close(),r.unsubscribe()}return t.urlCallback||(o=Ke(void 0)),new Promise((a,c)=>M(this,void 0,void 0,function*(){var f;try{yield r.subscribe("@oauth2",w=>M(this,void 0,void 0,function*(){const k=r.clientId;try{if(!w.state||k!==w.state)throw new Error("State parameters don't match.");const m=Object.assign({},t);delete m.provider,delete m.scopes,delete m.createData,delete m.urlCallback;const _=yield this.authWithOAuth2Code(n.name,w.code,n.codeVerifier,s,t.createData,m);a(_)}catch(m){c(new ee(m))}l()}));const u={state:r.clientId};!((f=t.scopes)===null||f===void 0)&&f.length&&(u.scope=t.scopes.join(" "));const h=this._replaceQueryParams(n.authUrl+s,u);yield(t.urlCallback||function(w){o?o.location.href=w:o=Ke(w)})(h)}catch(u){l(),c(new ee(u))}}))})}authRefresh(e,t){let n={method:"POST"};return n=X("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(s=>this.authResponse(s))}requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=X("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}confirmPasswordReset(e,t,n,s,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return o=X("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,s,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}requestVerification(e,t,n){let s={method:"POST",body:{email:e}};return s=X("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}confirmVerification(e,t,n){let s={method:"POST",body:{token:e}};return s=X("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>!0)}requestEmailChange(e,t,n){let s={method:"POST",body:{newEmail:e}};return s=X("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}confirmEmailChange(e,t,n,s){let r={method:"POST",body:{token:e,password:t}};return r=X("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,n,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>!0)}listExternalAuths(e,t){return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths",t)}unlinkExternalAuth(e,t,n){return n=Object.assign({method:"DELETE"},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/external-auths/"+encodeURIComponent(t),n).then(()=>!0)}_replaceQueryParams(e,t={}){let n=e,s="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const r={},o=s.split("&");for(const l of o){if(l=="")continue;const a=l.split("=");r[decodeURIComponent(a[0].replace(/\+/g," "))]=decodeURIComponent((a[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete r[l]:r[l]=t[l]);s="";for(let l in r)r.hasOwnProperty(l)&&(s!=""&&(s+="&"),s+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(r[l].replace(/%20/g,"+")));return s!=""?n+"?"+s:n}}function Ke(i){if(typeof window>"u"||!(window!=null&&window.open))throw new ee(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,s=window.innerHeight;e=e>n?n:e,t=t>s?s:t;let r=n/2-e/2,o=s/2-t/2;return window.open(i,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class Yt extends Ue{get baseCrudPath(){return"/api/collections"}import(e,t=!1,n){return M(this,void 0,void 0,function*(){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)})}}class Qt extends ue{getRequestsList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs/requests",n)}getRequest(e,t){return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/requests/"+encodeURIComponent(e),t)}getRequestsStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/requests/stats",e)}}class Xt extends ue{check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Zt extends ue{getUrl(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let r=this.client.buildUrl(s.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const o=new URLSearchParams(n);r+=(r.includes("?")?"&":"?")+o}return r}getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class xt extends ue{getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return this.client.buildUrl(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}const en=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];class tn{constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseUrl=e,this.lang=n,this.authStore=t||new Gt,this.admins=new Vt(this),this.collections=new Yt(this),this.files=new Zt(this),this.logs=new Qt(this),this.settings=new Wt(this),this.realtime=new bt(this),this.health=new Xt(this),this.backups=new xt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new Jt(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}getFileUrl(e,t,n={}){return this.files.getUrl(e,t,n)}buildUrl(e){var t;let n=this.baseUrl;return typeof window>"u"||!window.location||n.startsWith("https://")||n.startsWith("http://")||(n=!((t=window.location.origin)===null||t===void 0)&&t.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseUrl.startsWith("/")||(n+=window.location.pathname||"/",n+=n.endsWith("/")?"":"/"),n+=this.baseUrl),e&&(n+=n.endsWith("/")?"":"/",n+=e.startsWith("/")?e.substring(1):e),n}send(e,t){return M(this,void 0,void 0,function*(){t=this.initSendOptions(e,t);let n=this.buildUrl(e);if(t.query!==void 0){const s=this.serializeQueryParams(t.query);s&&(n+=(n.includes("?")?"&":"?")+s),delete t.query}if(this.beforeSend){const s=Object.assign({},yield this.beforeSend(n,t));s.url!==void 0||s.options!==void 0?(n=s.url||n,t=s.options||t):Object.keys(s).length&&(t=s,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(s=>M(this,void 0,void 0,function*(){let r={};try{r=yield s.json()}catch{}if(this.afterSend&&(r=yield this.afterSend(s,r)),s.status>=400)throw new ee({url:s.url,status:s.status,data:r});return r})).catch(s=>{throw new ee(s)})})}initSendOptions(e,t){(t=Object.assign({method:"GET"},t)).query=t.query||{},t.body=this.convertToFormDataIfNeeded(t.body);for(let n in t)en.includes(n)||(t.query[n]=t[n],delete t[n]);if(t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||this.isFormData(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const s=new AbortController;this.cancelControllers[n]=s,t.signal=s.signal}return t}convertToFormDataIfNeeded(e){if(typeof FormData>"u"||e===void 0||typeof e!="object"||e===null||this.isFormData(e)||!this.hasBlobField(e))return e;const t=new FormData;for(let n in e){const s=Array.isArray(e[n])?e[n]:[e[n]];for(let r of s)t.append(n,r)}return t}hasBlobField(e){for(let t in e){const n=Array.isArray(e[t])?e[t]:[e[t]];for(let s of n)if(typeof Blob<"u"&&s instanceof Blob||typeof File<"u"&&s instanceof File)return!0}return!1}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}isFormData(e){return e&&(e.constructor.name==="FormData"||typeof FormData<"u"&&e instanceof FormData)}serializeQueryParams(e){const t=[];for(const n in e){if(e[n]===null)continue;const s=e[n],r=encodeURIComponent(n);if(Array.isArray(s))for(const o of s)t.push(r+"="+encodeURIComponent(o));else s instanceof Date?t.push(r+"="+encodeURIComponent(s.toISOString())):typeof s!==null&&typeof s=="object"?t.push(r+"="+encodeURIComponent(JSON.stringify(s))):t.push(r+"="+encodeURIComponent(s))}return t.join("&")}}const he=[];function re(i,e=$){let t;const n=new Set;function s(l){if(G(i,l)&&(i=l,t)){const a=!he.length;for(const c of n)c[1](),he.push(c,i);if(a){for(let c=0;c<he.length;c+=2)he[c][0](he[c+1]);he.length=0}}}function r(l){s(l(i))}function o(l,a=$){const c=[l,a];return n.add(c),n.size===1&&(t=e(s,r)||$),l(i),()=>{n.delete(c),n.size===0&&t&&(t(),t=null)}}return{set:s,update:r,subscribe:o}}const z=new tn("https://shiftswitch.pockethost.io"),se=re(z.authStore.model);z.authStore.onChange(i=>{se.set(z.authStore.model)});const we=re(!1),Ee=re(!1),Te=re(!1),_e=re(new Date),me=re(null),wt=re("v0.2.0"),ce=re([]);function nn(i){let e,t,n,s,r,o=new Date(i[0].dateStart).toLocaleDateString("fr-CH")+"",l,a,c=i[0].location+"",f,u,h,p,w,k,m,_;return{c(){e=b("div"),t=b("div"),n=P(i[1]),s=S(),r=b("div"),l=P(o),a=P(" - "),f=P(c),u=S(),h=b("div"),p=b("button"),p.textContent="Oui",w=S(),k=b("button"),k.textContent="Non",g(p,"class","button svelte-1r3mzht"),g(k,"class","button svelte-1r3mzht"),g(h,"class","group svelte-1r3mzht"),g(e,"class","popup svelte-1r3mzht")},m(v,y){O(v,e,y),d(e,t),d(t,n),d(e,s),d(e,r),d(r,l),d(r,a),d(r,f),d(e,u),d(e,h),d(h,p),d(h,w),d(h,k),m||(_=[A(p,"click",i[2]),A(k,"click",i[3])],m=!0)},p(v,[y]){y&2&&q(n,v[1]),y&1&&o!==(o=new Date(v[0].dateStart).toLocaleDateString("fr-CH")+"")&&q(l,o),y&1&&c!==(c=v[0].location+"")&&q(f,c)},i:$,o:$,d(v){v&&C(e),m=!1,Z(_)}}}function sn(i,e,t){let{object:n}=e,{text:s}=e,{onClose:r}=e;function o(){r(!0)}function l(){r(!1)}return i.$$set=a=>{"object"in a&&t(0,n=a.object),"text"in a&&t(1,s=a.text),"onClose"in a&&t(4,r=a.onClose)},[n,s,o,l,r]}class _t extends Q{constructor(e){super(),Y(this,e,sn,nn,G,{object:0,text:1,onClose:4})}}function Be(i,e,t){const n=i.slice();return n[13]=e[t][0],n[14]=e[t][1],n}function ze(i,e,t){const n=i.slice();return n[17]=e[t],n}function Ge(i){var l,a;let e,t,n,s,r,o;return n=new _t({props:{object:i[3],onClose:i[5],text:i[1].id==((a=(l=i[3].expand)==null?void 0:l.employee)==null?void 0:a.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"}}),{c(){e=b("div"),t=S(),V(n.$$.fragment),g(e,"class","overlay svelte-15nbif2")},m(c,f){O(c,e,f),O(c,t,f),K(n,c,f),s=!0,r||(o=A(e,"click",i[6]),r=!0)},p(c,f){var h,p;const u={};f&8&&(u.object=c[3]),f&10&&(u.text=c[1].id==((p=(h=c[3].expand)==null?void 0:h.employee)==null?void 0:p.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"),n.$set(u)},i(c){s||(I(n.$$.fragment,c),s=!0)},o(c){U(n.$$.fragment,c),s=!1},d(c){c&&(C(e),C(t)),B(n,c),r=!1,o()}}}function We(i){let e,t,n=i[13]+"",s,r,o=[],l=new Map,a,c=J(i[14]);const f=u=>u[17].id;for(let u=0;u<c.length;u+=1){let h=ze(i,c,u),p=f(h);l.set(p,o[u]=Je(p,h))}return{c(){e=b("div"),t=b("div"),s=P(n),r=S();for(let u=0;u<o.length;u+=1)o[u].c();a=S(),g(t,"class","date svelte-15nbif2"),g(e,"class","scroll_day svelte-15nbif2")},m(u,h){O(u,e,h),d(e,t),d(t,s),d(e,r);for(let p=0;p<o.length;p+=1)o[p]&&o[p].m(e,null);d(e,a)},p(u,h){h&1&&n!==(n=u[13]+"")&&q(s,n),h&135&&(c=J(u[14]),o=$t(o,h,f,1,u,c,l,e,Rt,Je,a,ze))},d(u){u&&C(e);for(let h=0;h<o.length;h+=1)o[h].d()}}}function Ve(i){let e;function t(r,o){var l,a;return((a=(l=r[17].expand)==null?void 0:l.employee)==null?void 0:a.username)===r[1].username?rn:on}let n=t(i),s=n(i);return{c(){s.c(),e=te()},m(r,o){s.m(r,o),O(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&C(e),s.d(r)}}}function on(i){var N,E;let e,t,n=Ie((E=(N=i[17].expand)==null?void 0:N.employee)==null?void 0:E.username)+"",s,r,o,l,a=new Date(i[17].dateStart).getHours()+"",c,f,u=new Date(i[17].dateEnd).getHours()+"",h,p,w,k,m=i[17].location+"",_,v,y,T;function R(){return i[11](i[17])}return{c(){e=b("div"),t=b("div"),s=P(n),r=S(),o=b("div"),l=P("("),c=P(a),f=P("h-"),h=P(u),p=P("h)"),w=S(),k=b("div"),_=P(m),g(t,"class","name svelte-15nbif2"),g(o,"class","time svelte-15nbif2"),g(k,"class","loc svelte-15nbif2"),g(e,"class",v=oe(i[17].swap?"shift swap":"shift noswap")+" svelte-15nbif2")},m(j,D){O(j,e,D),d(e,t),d(t,s),d(e,r),d(e,o),d(o,l),d(o,c),d(o,f),d(o,h),d(o,p),d(e,w),d(e,k),d(k,_),y||(T=A(e,"click",R),y=!0)},p(j,D){var W,ie;i=j,D&1&&n!==(n=Ie((ie=(W=i[17].expand)==null?void 0:W.employee)==null?void 0:ie.username)+"")&&q(s,n),D&1&&a!==(a=new Date(i[17].dateStart).getHours()+"")&&q(c,a),D&1&&u!==(u=new Date(i[17].dateEnd).getHours()+"")&&q(h,u),D&1&&m!==(m=i[17].location+"")&&q(_,m),D&1&&v!==(v=oe(i[17].swap?"shift swap":"shift noswap")+" svelte-15nbif2")&&g(e,"class",v)},d(j){j&&C(e),y=!1,T()}}}function rn(i){var N,E;let e,t,n=Ie((E=(N=i[17].expand)==null?void 0:N.employee)==null?void 0:E.username)+"",s,r,o,l,a=new Date(i[17].dateStart).getHours()+"",c,f,u=new Date(i[17].dateEnd).getHours()+"",h,p,w,k,m=i[17].location+"",_,v,y,T;function R(){return i[10](i[17])}return{c(){e=b("div"),t=b("div"),s=P(n),r=S(),o=b("div"),l=P("("),c=P(a),f=P("h-"),h=P(u),p=P("h)"),w=S(),k=b("div"),_=P(m),g(t,"class","name svelte-15nbif2"),g(o,"class","time svelte-15nbif2"),g(k,"class","loc svelte-15nbif2"),g(e,"class",v=oe(i[17].swap?"shift swap":"shift")+" svelte-15nbif2")},m(j,D){O(j,e,D),d(e,t),d(t,s),d(e,r),d(e,o),d(o,l),d(o,c),d(o,f),d(o,h),d(o,p),d(e,w),d(e,k),d(k,_),y||(T=A(e,"click",R),y=!0)},p(j,D){var W,ie;i=j,D&1&&n!==(n=Ie((ie=(W=i[17].expand)==null?void 0:W.employee)==null?void 0:ie.username)+"")&&q(s,n),D&1&&a!==(a=new Date(i[17].dateStart).getHours()+"")&&q(c,a),D&1&&u!==(u=new Date(i[17].dateEnd).getHours()+"")&&q(h,u),D&1&&m!==(m=i[17].location+"")&&q(_,m),D&1&&v!==(v=oe(i[17].swap?"shift swap":"shift")+" svelte-15nbif2")&&g(e,"class",v)},d(j){j&&C(e),y=!1,T()}}}function Je(i,e){var r,o;let t,n,s=(e[2]&&((o=(r=e[17].expand)==null?void 0:r.employee)==null?void 0:o.username)==e[1].username||!e[2])&&Ve(e);return{key:i,first:null,c(){t=te(),s&&s.c(),n=te(),this.first=t},m(l,a){O(l,t,a),s&&s.m(l,a),O(l,n,a)},p(l,a){var c,f;e=l,e[2]&&((f=(c=e[17].expand)==null?void 0:c.employee)==null?void 0:f.username)==e[1].username||!e[2]?s?s.p(e,a):(s=Ve(e),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null)},d(l){l&&(C(t),C(n)),s&&s.d(l)}}}function Ye(i){let e,t=i[14].length!=0&&We(i);return{c(){t&&t.c(),e=te()},m(n,s){t&&t.m(n,s),O(n,e,s)},p(n,s){n[14].length!=0?t?t.p(n,s):(t=We(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(n){n&&C(e),t&&t.d(n)}}}function ln(i){let e,t,n,s=i[4]&&Ge(i),r=J(Object.entries(i[0])),o=[];for(let l=0;l<r.length;l+=1)o[l]=Ye(Be(i,r,l));return{c(){s&&s.c(),e=S();for(let l=0;l<o.length;l+=1)o[l].c();t=te()},m(l,a){s&&s.m(l,a),O(l,e,a);for(let c=0;c<o.length;c+=1)o[c]&&o[c].m(l,a);O(l,t,a),n=!0},p(l,[a]){if(l[4]?s?(s.p(l,a),a&16&&I(s,1)):(s=Ge(l),s.c(),I(s,1),s.m(e.parentNode,e)):s&&(ye(),U(s,1,1,()=>{s=null}),ke()),a&135){r=J(Object.entries(l[0]));let c;for(c=0;c<r.length;c+=1){const f=Be(l,r,c);o[c]?o[c].p(f,a):(o[c]=Ye(f),o[c].c(),o[c].m(t.parentNode,t))}for(;c<o.length;c+=1)o[c].d(1);o.length=r.length}},i(l){n||(I(s),n=!0)},o(l){U(s),n=!1},d(l){l&&(C(e),C(t)),s&&s.d(l),ge(o,l)}}}function Ie(i){return i.charAt(0).toUpperCase()+i.slice(1)}function an(i,e,t){let n,s,r,o;L(i,se,m=>t(1,n=m)),L(i,ce,m=>t(8,s=m)),L(i,_e,m=>t(9,r=m)),L(i,Ee,m=>t(2,o=m));let l={},a=null,c=!1,f=m=>{var _,v;m&&(n.id==((v=(_=a.expand)==null?void 0:_.employee)==null?void 0:v.id)?t(3,a.swap=!a.swap,a):(t(3,a.swap=!a.swap,a),t(3,a.expand.employee=n,a))),t(4,c=!1),u(a,a.swap)};async function u(m,_){const v=s.map(T=>T.id===m.id?{...T,swap:_}:T);$e(ce,s=v,s);const y={employee:n.id,swap:!1};await z.collection("shifts").update(m.id,y),m=null}function h(){t(4,c=!1),t(3,a=null)}function p(m){t(3,a=m),t(4,c=!0)}const w=m=>p(m),k=m=>{m.swap&&p(m)};return i.$$.update=()=>{var m,_;if(i.$$.dirty&775){t(0,l={});for(const v of Object.values(s))if((o&&((_=(m=v.expand)==null?void 0:m.employee)==null?void 0:_.username)==n.username||!o)&&new Date(v.dateStart).getMonth()==r.getMonth()){const y=new Date(v.dateStart).getDate();l.hasOwnProperty(y)?l[y].push(v):t(0,l[y]=[v],l)}}},[l,n,o,a,c,f,h,p,s,r,w,k]}class cn extends Q{constructor(e){super(),Y(this,e,an,ln,G,{})}}function un(i){let e,t,n,s,r,o,l,a,c;return{c(){e=b("nav"),t=b("div"),n=b("div"),s=P(i[0]),r=S(),o=b("img"),a=S(),c=b("div"),c.textContent=`${hn}`,g(n,"class","version svelte-1261hd6"),g(o,"class","logo_img svelte-1261hd6"),x(o.src,l=dn)||g(o,"src",l),g(o,"alt","Logo"),g(t,"class","logo svelte-1261hd6"),g(c,"class","nav-text svelte-1261hd6"),g(e,"class","navbar svelte-1261hd6")},m(f,u){O(f,e,u),d(e,t),d(t,n),d(n,s),d(t,r),d(t,o),d(e,a),d(e,c)},p(f,[u]){u&1&&q(s,f[0])},i:$,o:$,d(f){f&&C(e)}}}let dn="valderuzlogo.png",hn="ShiftSwitch";function fn(i,e,t){let n;return L(i,wt,s=>t(0,n=s)),[n]}class pn extends Q{constructor(e){super(),Y(this,e,fn,un,G,{})}}function mn(i){let e,t,n,s,r,o,l,a,c,f,u,h,p,w,k,m;return{c(){e=b("div"),t=b("button"),n=b("img"),r=S(),o=b("button"),l=b("img"),c=S(),f=b("button"),u=b("img"),p=S(),w=b("button"),w.innerHTML='<img src="logout.png" class="svelte-1d49ikw"/>',x(n.src,s=i[1]?"grid.png":"scroll.png")||g(n,"src",s),g(n,"class","svelte-1d49ikw"),g(t,"class","toggle-button grid svelte-1d49ikw"),x(l.src,a=i[0]?"single_user.png":"multi_user.png")||g(l,"src",a),g(l,"class","svelte-1d49ikw"),g(o,"class","toggle-button svelte-1d49ikw"),x(u.src,h=i[2]?i[2]:"nopic.png")||g(u,"src",h),g(u,"class","profilepic svelte-1d49ikw"),g(f,"class","toggle-button svelte-1d49ikw"),g(w,"class","toggle-button svelte-1d49ikw"),g(e,"class","navbar svelte-1d49ikw")},m(_,v){O(_,e,v),d(e,t),d(t,n),d(e,r),d(e,o),d(o,l),d(e,c),d(e,f),d(f,u),d(e,p),d(e,w),k||(m=[A(t,"click",i[3]),A(o,"click",i[4]),A(f,"click",i[5]),A(w,"click",i[6])],k=!0)},p(_,[v]){v&2&&!x(n.src,s=_[1]?"grid.png":"scroll.png")&&g(n,"src",s),v&1&&!x(l.src,a=_[0]?"single_user.png":"multi_user.png")&&g(l,"src",a),v&4&&!x(u.src,h=_[2]?_[2]:"nopic.png")&&g(u,"src",h)},i:$,o:$,d(_){_&&C(e),k=!1,Z(m)}}}function gn(i,e,t){let n,s,r,o,l;L(i,se,h=>t(7,n=h)),L(i,Te,h=>t(8,s=h)),L(i,Ee,h=>t(0,r=h)),L(i,we,h=>t(1,o=h)),L(i,me,h=>t(2,l=h));function a(){s&&Te.set(!s),we.set(!o)}function c(){Ee.set(!r)}function f(){Te.set(!s)}function u(){z.authStore.clear()}return Ne(()=>{me.set(z.files.getUrl(n,n.avatar,{thumb:"100x250"}))}),[r,o,l,a,c,f,u]}class vn extends Q{constructor(e){super(),Y(this,e,gn,mn,G,{})}}function bn(i){let e,t,n,s,r,o,l=i[0].toLocaleString("fr-CH",{month:"long"})+"",a,c,f=i[0].getFullYear()+"",u,h,p,w,k,m,_;return{c(){e=b("div"),t=b("button"),n=b("img"),r=S(),o=b("div"),a=P(l),c=S(),u=P(f),h=S(),p=b("button"),w=b("img"),x(n.src,s=Qe)||g(n,"src",s),g(n,"alt","Button"),g(n,"class","svelte-co2y0d"),g(t,"class","toggle-button svelte-co2y0d"),g(w,"class","rot svelte-co2y0d"),x(w.src,k=Qe)||g(w,"src",k),g(w,"alt","Button"),g(p,"class","toggle-button svelte-co2y0d"),g(e,"class","layout svelte-co2y0d")},m(v,y){O(v,e,y),d(e,t),d(t,n),d(e,r),d(e,o),d(o,a),d(o,c),d(o,u),d(e,h),d(e,p),d(p,w),m||(_=[A(t,"click",i[3]),A(p,"click",i[4])],m=!0)},p(v,[y]){y&1&&l!==(l=v[0].toLocaleString("fr-CH",{month:"long"})+"")&&q(a,l),y&1&&f!==(f=v[0].getFullYear()+"")&&q(u,f)},i:$,o:$,d(v){v&&C(e),m=!1,Z(_)}}}let Qe="left_arrow.png";function wn(i,e,t){let{renderDate:n}=e;function s(){n.setMonth(n.getMonth()+1),t(0,n)}function r(){n.setMonth(n.getMonth()-1),t(0,n)}const o=()=>r(),l=()=>s();return i.$$set=a=>{"renderDate"in a&&t(0,n=a.renderDate)},[n,s,r,o,l]}class _n extends Q{constructor(e){super(),Y(this,e,wn,bn,G,{renderDate:0})}}function Xe(i,e,t){const n=i.slice();return n[16]=e[t],n}function Ze(i,e,t){const n=i.slice();return n[19]=e[t],n}function xe(i,e,t){const n=i.slice();return n[16]=e[t],n}function et(i){var l,a;let e,t,n,s,r,o;return n=new _t({props:{object:i[3],onClose:i[5],text:i[2].id==((a=(l=i[3].expand)==null?void 0:l.employee)==null?void 0:a.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"}}),{c(){e=b("div"),t=S(),V(n.$$.fragment),g(e,"class","overlay svelte-yi5pnl")},m(c,f){O(c,e,f),O(c,t,f),K(n,c,f),s=!0,r||(o=A(e,"click",i[6]),r=!0)},p(c,f){var h,p;const u={};f&8&&(u.object=c[3]),f&12&&(u.text=c[2].id==((p=(h=c[3].expand)==null?void 0:h.employee)==null?void 0:p.id)?"Voulez vous vraiment faire remplacer cet horaire?":"Voulez vous vraiment remplacer cet horaire?"),n.$set(u)},i(c){s||(I(n.$$.fragment,c),s=!0)},o(c){U(n.$$.fragment,c),s=!1},d(c){c&&(C(e),C(t)),B(n,c),r=!1,o()}}}function tt(i){let e;return{c(){e=b("div"),e.textContent=`${i[16]}`},m(t,n){O(t,e,n)},p:$,d(t){t&&C(e)}}}function nt(i){let e,t=J(i[1][i[16]]),n=[];for(let s=0;s<t.length;s+=1)n[s]=st(Ze(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=te()},m(s,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,r);O(s,e,r)},p(s,r){if(r&135){t=J(s[1][s[16]]);let o;for(o=0;o<t.length;o+=1){const l=Ze(s,t,o);n[o]?n[o].p(l,r):(n[o]=st(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},d(s){s&&C(e),ge(n,s)}}}function yn(i){var k,m;let e,t,n=((m=(k=i[19].expand)==null?void 0:k.employee)==null?void 0:m.username)+"",s,r,o,l,a=i[19].location+"",c,f,u,h,p;function w(){return i[14](i[19])}return{c(){e=b("div"),t=b("div"),s=P(n),r=P(" |"),o=S(),l=b("div"),c=P(a),f=S(),g(t,"class","name svelte-yi5pnl"),g(l,"class","loc svelte-yi5pnl"),g(e,"class",u=oe(i[19].swap?"shift swap":"shift noswap")+" svelte-yi5pnl")},m(_,v){O(_,e,v),d(e,t),d(t,s),d(t,r),d(e,o),d(e,l),d(l,c),d(e,f),h||(p=A(e,"click",w),h=!0)},p(_,v){var y,T;i=_,v&3&&n!==(n=((T=(y=i[19].expand)==null?void 0:y.employee)==null?void 0:T.username)+"")&&q(s,n),v&3&&a!==(a=i[19].location+"")&&q(c,a),v&3&&u!==(u=oe(i[19].swap?"shift swap":"shift noswap")+" svelte-yi5pnl")&&g(e,"class",u)},d(_){_&&C(e),h=!1,p()}}}function kn(i){var k,m;let e,t,n=((m=(k=i[19].expand)==null?void 0:k.employee)==null?void 0:m.username)+"",s,r,o,l,a=i[19].location+"",c,f,u,h,p;function w(){return i[13](i[19])}return{c(){e=b("div"),t=b("div"),s=P(n),r=P(" |"),o=S(),l=b("div"),c=P(a),f=S(),g(t,"class","name svelte-yi5pnl"),g(l,"class","loc svelte-yi5pnl"),g(e,"class",u=oe(i[19].swap?"shift swap":"shift")+" svelte-yi5pnl")},m(_,v){O(_,e,v),d(e,t),d(t,s),d(t,r),d(e,o),d(e,l),d(l,c),d(e,f),h||(p=A(e,"click",w),h=!0)},p(_,v){var y,T;i=_,v&3&&n!==(n=((T=(y=i[19].expand)==null?void 0:y.employee)==null?void 0:T.username)+"")&&q(s,n),v&3&&a!==(a=i[19].location+"")&&q(c,a),v&3&&u!==(u=oe(i[19].swap?"shift swap":"shift")+" svelte-yi5pnl")&&g(e,"class",u)},d(_){_&&C(e),h=!1,p()}}}function st(i){let e;function t(r,o){var l,a;return((a=(l=r[19].expand)==null?void 0:l.employee)==null?void 0:a.username)===r[2].username?kn:yn}let n=t(i),s=n(i);return{c(){s.c(),e=te()},m(r,o){s.m(r,o),O(r,e,o)},p(r,o){n===(n=t(r))&&s?s.p(r,o):(s.d(1),s=n(r),s&&(s.c(),s.m(e.parentNode,e)))},d(r){r&&C(e),s.d(r)}}}function it(i){let e,t,n=new Date(i[16]).getDate()+"",s,r,o,l=i[1][i[16]]&&typeof i[1][i[16]]=="object"&&i[1][i[16]].length>0&&nt(i);return{c(){e=b("div"),t=b("div"),s=P(n),r=S(),l&&l.c(),o=S(),g(t,"class","time svelte-yi5pnl"),g(e,"class","calendar-card svelte-yi5pnl")},m(a,c){O(a,e,c),d(e,t),d(t,s),d(e,r),l&&l.m(e,null),d(e,o)},p(a,c){c&1&&n!==(n=new Date(a[16]).getDate()+"")&&q(s,n),a[1][a[16]]&&typeof a[1][a[16]]=="object"&&a[1][a[16]].length>0?l?l.p(a,c):(l=nt(a),l.c(),l.m(e,o)):l&&(l.d(1),l=null)},d(a){a&&C(e),l&&l.d()}}}function Sn(i){let e,t,n,s,r,o=i[4]&&et(i),l=J(i[8]),a=[];for(let u=0;u<l.length;u+=1)a[u]=tt(xe(i,l,u));let c=J(i[0]),f=[];for(let u=0;u<c.length;u+=1)f[u]=it(Xe(i,c,u));return{c(){o&&o.c(),e=S(),t=b("div");for(let u=0;u<a.length;u+=1)a[u].c();n=S(),s=b("div");for(let u=0;u<f.length;u+=1)f[u].c();g(t,"class","weekdays svelte-yi5pnl"),g(s,"class","calendar-grid svelte-yi5pnl")},m(u,h){o&&o.m(u,h),O(u,e,h),O(u,t,h);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(t,null);O(u,n,h),O(u,s,h);for(let p=0;p<f.length;p+=1)f[p]&&f[p].m(s,null);r=!0},p(u,[h]){if(u[4]?o?(o.p(u,h),h&16&&I(o,1)):(o=et(u),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(ye(),U(o,1,1,()=>{o=null}),ke()),h&256){l=J(u[8]);let p;for(p=0;p<l.length;p+=1){const w=xe(u,l,p);a[p]?a[p].p(w,h):(a[p]=tt(w),a[p].c(),a[p].m(t,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}if(h&135){c=J(u[0]);let p;for(p=0;p<c.length;p+=1){const w=Xe(u,c,p);f[p]?f[p].p(w,h):(f[p]=it(w),f[p].c(),f[p].m(s,null))}for(;p<f.length;p+=1)f[p].d(1);f.length=c.length}},i(u){r||(I(o),r=!0)},o(u){U(o),r=!1},d(u){u&&(C(e),C(t),C(n),C(s)),o&&o.d(u),ge(a,u),ge(f,u)}}}function Cn(i,e,t){let n,s,r,o;L(i,se,y=>t(2,n=y)),L(i,ce,y=>t(10,s=y)),L(i,_e,y=>t(11,r=y)),L(i,Ee,y=>t(12,o=y));let l,a=[],c={},f=null,u=!1,h=y=>{var T,R;y&&(n.id==((R=(T=f.expand)==null?void 0:T.employee)==null?void 0:R.id)?t(3,f.swap=!f.swap,f):(t(3,f.swap=!f.swap,f),t(3,f.expand.employee=n,f))),t(4,u=!1),p(f,f.swap)};async function p(y,T){const R=s.map(E=>E.id===y.id?{...E,swap:T}:E);$e(ce,s=R,s);const N={employee:n.id,swap:!1};await z.collection("shifts").update(y.id,N),y=null}function w(){t(4,u=!1),t(3,f=null)}function k(y){t(3,f=y),t(4,u=!0)}let m=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];const _=y=>k(y),v=y=>{y.swap&&k(y)};return i.$$.update=()=>{var y,T;if(i.$$.dirty&2049){t(0,a=[]);let R=new Date(r.getFullYear(),r.getMonth());for(;R.getDay()!=2;)R.setDate(R.getDate()-1),a.unshift(new Date(R).toISOString().split("T")[0]);const N=new Date(r.getFullYear(),r.getMonth());for(;N.getMonth()==r.getMonth();)a.push(new Date(N).toISOString().split("T")[0]),N.setDate(N.getDate()+1);a.push(new Date(N).toISOString().split("T")[0])}if(i.$$.dirty&7687){t(9,l=new Date(a[0])),t(1,c={});for(const R of Object.values(s))if((o&&((T=(y=R.expand)==null?void 0:y.employee)==null?void 0:T.username)==n.username||!o)&&l<=new Date(R.dateStart)&&new Date(R.dateStart)<=new Date(r.getFullYear(),r.getMonth()+1,1)){const N=new Date(R.dateStart).toISOString().split("T")[0];c.hasOwnProperty(N)?c[N].push(R):t(1,c[N]=[R],c)}}},[a,c,n,f,u,h,w,k,m,l,s,r,o,_,v]}class On extends Q{constructor(e){super(),Y(this,e,Cn,Sn,G,{})}}function ot(i){let e,t,n,s,r,o,l,a,c,f,u,h,p,w,k,m=i[0]&&rt(i);return{c(){e=b("div"),t=b("div"),t.innerHTML='<img src="valderuzlogo.png" alt="Logo" class="svelte-11pokrt"/> <div class="title svelte-11pokrt">ShiftSwitch</div>',n=S(),s=b("div"),r=P(i[4]),o=S(),l=b("form"),m&&m.c(),a=S(),c=b("input"),f=S(),u=b("input"),h=S(),p=b("button"),p.textContent="Login",g(t,"class","logo svelte-11pokrt"),g(c,"placeholder","Username"),g(c,"type","text"),g(c,"class","input svelte-11pokrt"),g(u,"placeholder","Password"),g(u,"type","password"),g(u,"class","input svelte-11pokrt"),g(p,"class","button svelte-11pokrt"),g(l,"class","form svelte-11pokrt"),g(e,"class","container svelte-11pokrt")},m(_,v){O(_,e,v),d(e,t),d(e,n),d(e,s),d(s,r),d(e,o),d(e,l),m&&m.m(l,null),d(l,a),d(l,c),ne(c,i[1]),d(l,f),d(l,u),ne(u,i[2]),d(l,h),d(l,p),w||(k=[A(c,"input",i[7]),A(u,"input",i[8]),A(p,"click",i[5]),A(l,"submit",Ot(i[6]))],w=!0)},p(_,v){v&16&&q(r,_[4]),_[0]?m?m.p(_,v):(m=rt(_),m.c(),m.m(l,a)):m&&(m.d(1),m=null),v&2&&c.value!==_[1]&&ne(c,_[1]),v&4&&u.value!==_[2]&&ne(u,_[2])},d(_){_&&C(e),m&&m.d(),w=!1,Z(k)}}}function rt(i){let e,t;return{c(){e=b("div"),t=P(i[0]),g(e,"class","errmsg svelte-11pokrt")},m(n,s){O(n,e,s),d(e,t)},p(n,s){s&1&&q(t,n[0])},d(n){n&&C(e)}}}function Pn(i){let e,t=!i[3]&&ot(i);return{c(){t&&t.c(),e=te()},m(n,s){t&&t.m(n,s),O(n,e,s)},p(n,[s]){n[3]?t&&(t.d(1),t=null):t?t.p(n,s):(t=ot(n),t.c(),t.m(e.parentNode,e))},i:$,o:$,d(n){n&&C(e),t&&t.d(n)}}}function Tn(i,e,t){let n,s;L(i,se,h=>t(3,n=h)),L(i,wt,h=>t(4,s=h));let r="",o,l;async function a(){try{await z.collection("users").authWithPassword(o,l);const h=await z.collection("users").getOne(n.id,{});me.set(z.files.getUrl(h,h.avatar,{thumb:"100x100"}))}catch(h){console.log("signup failed: "+h.message),h.message==="Failed to authenticate."?t(0,r="Invalid username or password. Please try again."):h.message==="NetworkError"?t(0,r="Network error. Please check your internet connection."):t(0,r=h.message)}}function c(h){Et.call(this,i,h)}function f(){o=this.value,t(1,o)}function u(){l=this.value,t(2,l)}return[r,o,l,n,s,a,c,f,u]}class Dn extends Q{constructor(e){super(),Y(this,e,Tn,Pn,G,{})}}function En(i){let e,t,n,s,r,o,l,a,c,f,u,h,p,w,k,m;return{c(){e=b("div"),t=b("div"),t.textContent="Changer le mot de passe:",n=S(),s=b("div"),r=b("input"),o=S(),l=b("input"),a=S(),c=b("input"),f=S(),u=b("div"),h=b("button"),h.textContent="Exit",p=S(),w=b("button"),w.textContent="Change",g(r,"placeholder","Old Password"),g(r,"type","password"),g(r,"class","input"),g(l,"placeholder","Password"),g(l,"type","password"),g(l,"class","input"),g(c,"placeholder","Password Confirmation"),g(c,"type","password"),g(c,"class","input"),g(s,"class","group-flex svelte-hb9kik"),g(h,"class","button svelte-hb9kik"),g(w,"class","button svelte-hb9kik"),g(u,"class","group svelte-hb9kik"),g(e,"class","popup svelte-hb9kik")},m(_,v){O(_,e,v),d(e,t),d(e,n),d(e,s),d(s,r),ne(r,i[0]),d(s,o),d(s,l),ne(l,i[1]),d(s,a),d(s,c),ne(c,i[2]),d(e,f),d(e,u),d(u,h),d(u,p),d(u,w),k||(m=[A(r,"input",i[6]),A(l,"input",i[7]),A(c,"input",i[8]),A(h,"click",i[4]),A(w,"click",i[3])],k=!0)},p(_,[v]){v&1&&r.value!==_[0]&&ne(r,_[0]),v&2&&l.value!==_[1]&&ne(l,_[1]),v&4&&c.value!==_[2]&&ne(c,_[2])},i:$,o:$,d(_){_&&C(e),k=!1,Z(m)}}}function In(i,e,t){let n;L(i,se,p=>t(9,n=p));let{onClose:s}=e,r,o,l;async function a(){try{const p={password:o,passwordConfirm:l,oldPassword:r},w=await z.collection("users").update(n.id,p);s()}catch{console.log("passwords do not match")}}function c(){s()}function f(){r=this.value,t(0,r)}function u(){o=this.value,t(1,o)}function h(){l=this.value,t(2,l)}return i.$$set=p=>{"onClose"in p&&t(5,s=p.onClose)},[r,o,l,a,c,s,f,u,h]}class jn extends Q{constructor(e){super(),Y(this,e,In,En,G,{onClose:5})}}function lt(i,e,t){const n=i.slice();return n[6]=e[t],n}function at(i){let e,t=new Date(i[6]).getDate()+"",n;return{c(){e=b("div"),n=P(t),g(e,"class","day svelte-1o1p8")},m(s,r){O(s,e,r),d(e,n)},p(s,r){r&1&&t!==(t=new Date(s[6]).getDate()+"")&&q(n,t)},d(s){s&&C(e)}}}function Ln(i){let e,t,n=J(i[0]),s=[];for(let r=0;r<n.length;r+=1)s[r]=at(lt(i,n,r));return{c(){e=b("div"),t=b("div");for(let r=0;r<s.length;r+=1)s[r].c();g(t,"class","calendar-grid svelte-1o1p8")},m(r,o){O(r,e,o),d(e,t);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(t,null)},p(r,[o]){if(o&1){n=J(r[0]);let l;for(l=0;l<n.length;l+=1){const a=lt(r,n,l);s[l]?s[l].p(a,o):(s[l]=at(a),s[l].c(),s[l].m(t,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=n.length}},i:$,o:$,d(r){r&&C(e),ge(s,r)}}}function An(i,e,t){let n;L(i,_e,l=>t(3,n=l));let{text:s}=e,{onClose:r}=e,o=[];return i.$$set=l=>{"text"in l&&t(1,s=l.text),"onClose"in l&&t(2,r=l.onClose)},i.$$.update=()=>{if(i.$$.dirty&9){t(0,o=[]);let l=new Date(n.getFullYear(),n.getMonth());for(;l.getDay()!=2;)l.setDate(l.getDate()-1),o.unshift(new Date(l).toISOString().split("T")[0]);const a=new Date(n.getFullYear(),n.getMonth());for(;a.getMonth()==n.getMonth();)o.push(new Date(a).toISOString().split("T")[0]),a.setDate(a.getDate()+1);o.push(new Date(a).toISOString().split("T")[0])}},[o,s,r,n]}class qn extends Q{constructor(e){super(),Y(this,e,An,Ln,G,{text:1,onClose:2})}}function ct(i){let e,t,n,s,r,o;return n=new jn({props:{onClose:i[7]}}),{c(){e=b("div"),t=S(),V(n.$$.fragment),g(e,"class","overlay svelte-1xyydab")},m(l,a){O(l,e,a),O(l,t,a),K(n,l,a),s=!0,r||(o=A(e,"click",i[7]),r=!0)},p:$,i(l){s||(I(n.$$.fragment,l),s=!0)},o(l){U(n.$$.fragment,l),s=!1},d(l){l&&(C(e),C(t)),B(n,l),r=!1,o()}}}function Rn(i){let e,t,n,s,r,o,l,a,c,f,u=i[2].username+"",h,p,w,k,m,_=i[3]?"Grid":"Scroll",v,y,T,R,N,E,j,D,W,ie,F=i[1]&&ct(i);return j=new qn({props:{onClose:i[7],text:"heyy"}}),{c(){e=b("div"),t=b("div"),n=b("form"),s=b("img"),o=S(),l=b("input"),a=S(),c=b("div"),f=P("Nom: "),h=P(u),p=S(),w=b("div"),k=P("Preferance d'affichage: "),m=b("button"),v=P(_),y=S(),T=b("button"),T.textContent="Change Password",R=S(),F&&F.c(),N=S(),E=b("div"),V(j.$$.fragment),x(s.src,r=i[4]?i[4]:"nopic.png")||g(s,"src",r),g(s,"alt","Selected Image"),g(s,"class","profilepic svelte-1xyydab"),g(l,"type","file"),g(l,"name","avatar"),g(l,"accept",".jpg, .jpeg, .png"),Tt(l,"display","none"),g(n,"enctype","multipart/form-data"),g(m,"class","toggle svelte-1xyydab"),g(T,"class","flat-button svelte-1xyydab"),g(t,"class","settings svelte-1xyydab"),g(E,"class","dispo svelte-1xyydab"),g(e,"class","card svelte-1xyydab")},m(H,le){O(H,e,le),d(e,t),d(t,n),d(n,s),d(n,o),d(n,l),i[10](l),d(t,a),d(t,c),d(c,f),d(c,h),d(t,p),d(t,w),d(w,k),d(w,m),d(m,v),d(t,y),d(t,T),d(t,R),F&&F.m(t,null),d(e,N),d(e,E),K(j,E,null),D=!0,W||(ie=[A(s,"click",i[9]),A(l,"change",i[6]),A(m,"click",i[5]),A(T,"click",i[8])],W=!0)},p(H,[le]){(!D||le&16&&!x(s.src,r=H[4]?H[4]:"nopic.png"))&&g(s,"src",r),(!D||le&4)&&u!==(u=H[2].username+"")&&q(h,u),(!D||le&8)&&_!==(_=H[3]?"Grid":"Scroll")&&q(v,_),H[1]?F?(F.p(H,le),le&2&&I(F,1)):(F=ct(H),F.c(),I(F,1),F.m(t,null)):F&&(ye(),U(F,1,1,()=>{F=null}),ke())},i(H){D||(I(F),I(j.$$.fragment,H),D=!0)},o(H){U(F),U(j.$$.fragment,H),D=!1},d(H){H&&C(e),i[10](null),F&&F.d(),B(j),W=!1,Z(ie)}}}function $n(i,e,t){let n,s,r;L(i,se,m=>t(2,n=m)),L(i,we,m=>t(3,s=m)),L(i,me,m=>t(4,r=m));async function o(){we.set(!s);const m={useGrid:!s};await z.collection("users").update(n.id,m)}Ne(()=>{me.set(z.files.getUrl(n,n.avatar,{thumb:"100x250"}))});let l,a,c=new FormData;async function f(m){l=m.target.files[0],c.set("avatar",l),me.set(URL.createObjectURL(l)),await z.collection("users").update(n.id,{avatar:l})}let u=!1,h=()=>{t(1,u=!1)},p=()=>{t(1,u=!0)};const w=()=>a.click();function k(m){De[m?"unshift":"push"](()=>{a=m,t(0,a)})}return[a,u,n,s,r,o,f,h,p,w,k]}class Nn extends Q{constructor(e){super(),Y(this,e,$n,Rn,G,{})}}function Un(i){let e,t;return e=new Nn({}),{c(){V(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Fn(i){let e,t;return e=new cn({}),{c(){V(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Mn(i){let e,t;return e=new On({}),{c(){V(e.$$.fragment)},m(n,s){K(e,n,s),t=!0},i(n){t||(I(e.$$.fragment,n),t=!0)},o(n){U(e.$$.fragment,n),t=!1},d(n){B(e,n)}}}function Hn(i){let e,t,n,s;const r=[Mn,Fn,Un],o=[];function l(a,c){return a[0]&&!a[1]?0:!a[0]&&!a[1]?1:2}return e=l(i),t=o[e]=r[e](i),{c(){t.c(),n=te()},m(a,c){o[e].m(a,c),O(a,n,c),s=!0},p(a,[c]){let f=e;e=l(a),e!==f&&(ye(),U(o[f],1,1,()=>{o[f]=null}),ke(),t=o[e],t||(t=o[e]=r[e](a),t.c()),I(t,1),t.m(n.parentNode,n))},i(a){s||(I(t),s=!0)},o(a){U(t),s=!1},d(a){a&&C(n),o[e].d(a)}}}function Kn(i,e,t){let n,s;return L(i,we,r=>t(0,n=r)),L(i,Te,r=>t(1,s=r)),[n,s]}class Bn extends Q{constructor(e){super(),Y(this,e,Kn,Hn,G,{})}}function ut(i,e,t){const n=i.slice();return n[2]=e[t],n}function dt(i){var c,f;let e,t,n=((f=(c=i[2].expand)==null?void 0:c.employee)==null?void 0:f.username)+"",s,r,o=new Date(i[2].dateStart).toLocaleString("default")+"",l,a;return{c(){e=b("div"),t=P("De dieu! "),s=P(n),r=P(" a besoin de toi! Peut-tu prendre son horaire le "),l=P(o),a=P(" ?"),g(e,"class","swap_notification svelte-jxanx5")},m(u,h){O(u,e,h),d(e,t),d(e,s),d(e,r),d(e,l),d(e,a)},p(u,h){var p,w;h&1&&n!==(n=((w=(p=u[2].expand)==null?void 0:p.employee)==null?void 0:w.username)+"")&&q(s,n),h&1&&o!==(o=new Date(u[2].dateStart).toLocaleString("default")+"")&&q(l,o)},d(u){u&&C(e)}}}function ht(i){var s,r;let e=i[2].swap&&i[1].id!=((r=(s=i[2].expand)==null?void 0:s.employee)==null?void 0:r.id)&&new Date(i[2].dateStart)>=new Date,t,n=e&&dt(i);return{c(){n&&n.c(),t=te()},m(o,l){n&&n.m(o,l),O(o,t,l)},p(o,l){var a,c;l&3&&(e=o[2].swap&&o[1].id!=((c=(a=o[2].expand)==null?void 0:a.employee)==null?void 0:c.id)&&new Date(o[2].dateStart)>=new Date),e?n?n.p(o,l):(n=dt(o),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(o){o&&C(t),n&&n.d(o)}}}function zn(i){let e,t=J(i[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ht(ut(i,t,s));return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=te()},m(s,r){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(s,r);O(s,e,r)},p(s,[r]){if(r&3){t=J(s[0]);let o;for(o=0;o<t.length;o+=1){const l=ut(s,t,o);n[o]?n[o].p(l,r):(n[o]=ht(l),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=t.length}},i:$,o:$,d(s){s&&C(e),ge(n,s)}}}function Gn(i,e,t){let n,s;return L(i,ce,r=>t(0,n=r)),L(i,se,r=>t(1,s=r)),[n,s]}class Wn extends Q{constructor(e){super(),Y(this,e,Gn,zn,G,{})}}function Vn(i,e,t){let n;return L(i,ce,s=>t(0,n=s)),Ne(async()=>{const s=await z.collection("shifts").getList(1,50,{sort:"dateStart",expand:"employee"});$e(ce,n=s.items,n)}),[]}class Jn extends Q{constructor(e){super(),Y(this,e,Vn,null,G,{})}}function ft(i){let e,t,n,s,r,o,l,a,c,f,u,h,p,w,k;e=new Jn({}),s=new pn({});function m(v){i[2](v)}let _={};return i[1]!==void 0&&(_.renderDate=i[1]),o=new _n({props:_}),De.push(()=>Nt(o,"renderDate",m)),c=new vn({}),h=new Wn({}),w=new Bn({}),{c(){V(e.$$.fragment),t=S(),n=b("div"),V(s.$$.fragment),r=S(),V(o.$$.fragment),a=S(),V(c.$$.fragment),f=S(),u=b("div"),V(h.$$.fragment),p=S(),V(w.$$.fragment),g(n,"class","navbar svelte-1krkm0i"),g(u,"class","content svelte-1krkm0i")},m(v,y){K(e,v,y),O(v,t,y),O(v,n,y),K(s,n,null),d(n,r),K(o,n,null),d(n,a),K(c,n,null),O(v,f,y),O(v,u,y),K(h,u,null),d(u,p),K(w,u,null),k=!0},p(v,y){const T={};!l&&y&2&&(l=!0,T.renderDate=v[1],Lt(()=>l=!1)),o.$set(T)},i(v){k||(I(e.$$.fragment,v),I(s.$$.fragment,v),I(o.$$.fragment,v),I(c.$$.fragment,v),I(h.$$.fragment,v),I(w.$$.fragment,v),k=!0)},o(v){U(e.$$.fragment,v),U(s.$$.fragment,v),U(o.$$.fragment,v),U(c.$$.fragment,v),U(h.$$.fragment,v),U(w.$$.fragment,v),k=!1},d(v){v&&(C(t),C(n),C(f),C(u)),B(e,v),B(s),B(o),B(c),B(h),B(w)}}}function Yn(i){let e,t,n,s,r,o=i[0]&&ft(i);return t=new Dn({}),{c(){o&&o.c(),e=S(),V(t.$$.fragment),n=S(),s=b("footer"),s.innerHTML='<div class="footer-bar svelte-1krkm0i"></div> <div class="links svelte-1krkm0i"><a class="link svelte-1krkm0i" href="https://github.com/Engollon/shiftswitch/blob/main/README.md">Documentation</a> <a class="link svelte-1krkm0i" href="https://www.val-de-ruz.ch/decouverte/culture-sports-loisirs/piscines">Piscine</a> <a class="link svelte-1krkm0i" href="mailto:Engollon.piscine@gamil.com">Contact</a></div>'},m(l,a){o&&o.m(l,a),O(l,e,a),K(t,l,a),O(l,n,a),O(l,s,a),r=!0},p(l,[a]){l[0]?o?(o.p(l,a),a&1&&I(o,1)):(o=ft(l),o.c(),I(o,1),o.m(e.parentNode,e)):o&&(ye(),U(o,1,1,()=>{o=null}),ke())},i(l){r||(I(o),I(t.$$.fragment,l),r=!0)},o(l){U(o),U(t.$$.fragment,l),r=!1},d(l){l&&(C(e),C(n),C(s)),o&&o.d(l),B(t,l)}}}function Qn(i,e,t){let n,s;L(i,se,o=>t(0,n=o)),L(i,_e,o=>t(1,s=o));function r(o){s=o,_e.set(s)}return[n,s,r]}class Xn extends Q{constructor(e){super(),Y(this,e,Qn,Yn,G,{})}}new Xn({target:document.getElementById("app")});
